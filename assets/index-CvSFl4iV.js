var hb=Object.defineProperty;var mb=(t,e,n)=>e in t?hb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Bn=(t,e,n)=>(mb(t,typeof e!="symbol"?e+"":e,n),n);function pb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ix={exports:{}},ku={},ox={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),gb=Symbol.for("react.portal"),yb=Symbol.for("react.fragment"),vb=Symbol.for("react.strict_mode"),xb=Symbol.for("react.profiler"),Sb=Symbol.for("react.provider"),Eb=Symbol.for("react.context"),Tb=Symbol.for("react.forward_ref"),wb=Symbol.for("react.suspense"),bb=Symbol.for("react.memo"),Ab=Symbol.for("react.lazy"),$p=Symbol.iterator;function Rb(t){return t===null||typeof t!="object"?null:(t=$p&&t[$p]||t["@@iterator"],typeof t=="function"?t:null)}var ax={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lx=Object.assign,ux={};function hi(t,e,n){this.props=t,this.context=e,this.refs=ux,this.updater=n||ax}hi.prototype.isReactComponent={};hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cx(){}cx.prototype=hi.prototype;function Nh(t,e,n){this.props=t,this.context=e,this.refs=ux,this.updater=n||ax}var _h=Nh.prototype=new cx;_h.constructor=Nh;lx(_h,hi.prototype);_h.isPureReactComponent=!0;var Vp=Array.isArray,dx=Object.prototype.hasOwnProperty,Oh={current:null},fx={key:!0,ref:!0,__self:!0,__source:!0};function hx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)dx.call(e,r)&&!fx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:$o,type:t,key:i,ref:o,props:s,_owner:Oh.current}}function Lb(t,e){return{$$typeof:$o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mh(t){return typeof t=="object"&&t!==null&&t.$$typeof===$o}function Cb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gp=/\/+/g;function mc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cb(""+t.key):e.toString(36)}function Wa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $o:case gb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+mc(o,0):r,Vp(s)?(n="",t!=null&&(n=t.replace(Gp,"$&/")+"/"),Wa(s,e,n,"",function(u){return u})):s!=null&&(Mh(s)&&(s=Lb(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Vp(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+mc(i,a);o+=Wa(i,e,n,l,s)}else if(l=Rb(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+mc(i,a++),o+=Wa(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function oa(t,e,n){if(t==null)return t;var r=[],s=0;return Wa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function kb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},za={transition:null},Ib={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:za,ReactCurrentOwner:Oh};function mx(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:oa,forEach:function(t,e,n){oa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return oa(t,function(){e++}),e},toArray:function(t){return oa(t,function(e){return e})||[]},only:function(t){if(!Mh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=hi;le.Fragment=yb;le.Profiler=xb;le.PureComponent=Nh;le.StrictMode=vb;le.Suspense=wb;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ib;le.act=mx;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Oh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dx.call(e,l)&&!fx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:$o,type:t.type,key:s,ref:i,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:Eb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sb,_context:t},t.Consumer=t};le.createElement=hx;le.createFactory=function(t){var e=hx.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:Tb,render:t}};le.isValidElement=Mh;le.lazy=function(t){return{$$typeof:Ab,_payload:{_status:-1,_result:t},_init:kb}};le.memo=function(t,e){return{$$typeof:bb,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=za.transition;za.transition={};try{t()}finally{za.transition=e}};le.unstable_act=mx;le.useCallback=function(t,e){return wt.current.useCallback(t,e)};le.useContext=function(t){return wt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};le.useEffect=function(t,e){return wt.current.useEffect(t,e)};le.useId=function(){return wt.current.useId()};le.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return wt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};le.useRef=function(t){return wt.current.useRef(t)};le.useState=function(t){return wt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return wt.current.useTransition()};le.version="18.3.1";ox.exports=le;var A=ox.exports;const Q=Bo(A),Db=pb({__proto__:null,default:Q},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb=A,Nb=Symbol.for("react.element"),_b=Symbol.for("react.fragment"),Ob=Object.prototype.hasOwnProperty,Mb=Pb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fb={key:!0,ref:!0,__self:!0,__source:!0};function px(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ob.call(e,r)&&!Fb.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Nb,type:t,key:i,ref:o,props:s,_owner:Mb.current}}ku.Fragment=_b;ku.jsx=px;ku.jsxs=px;ix.exports=ku;var h=ix.exports,Od={},gx={exports:{}},Vt={},yx={exports:{}},vx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,M){var O=F.length;F.push(M);e:for(;0<O;){var z=O-1>>>1,G=F[z];if(0<s(G,M))F[z]=M,F[O]=G,O=z;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var M=F[0],O=F.pop();if(O!==M){F[0]=O;e:for(var z=0,G=F.length,ee=G>>>1;z<ee;){var ne=2*(z+1)-1,ue=F[ne],ce=ne+1,be=F[ce];if(0>s(ue,O))ce<G&&0>s(be,ue)?(F[z]=be,F[ce]=O,z=ce):(F[z]=ue,F[ne]=O,z=ne);else if(ce<G&&0>s(be,O))F[z]=be,F[ce]=O,z=ce;else break e}}return M}function s(F,M){var O=F.sortIndex-M.sortIndex;return O!==0?O:F.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,m=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=F)r(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function w(F){if(g=!1,S(F),!p)if(n(l)!==null)p=!0,V(E);else{var M=n(u);M!==null&&K(w,M.startTime-F)}}function E(F,M){p=!1,g&&(g=!1,y(R),R=-1),m=!0;var O=f;try{for(S(M),d=n(l);d!==null&&(!(d.expirationTime>M)||F&&!k());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var G=z(d.expirationTime<=M);M=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(l)&&r(l),S(M)}else r(l);d=n(l)}if(d!==null)var ee=!0;else{var ne=n(u);ne!==null&&K(w,ne.startTime-M),ee=!1}return ee}finally{d=null,f=O,m=!1}}var b=!1,L=null,R=-1,I=5,C=-1;function k(){return!(t.unstable_now()-C<I)}function U(){if(L!==null){var F=t.unstable_now();C=F;var M=!0;try{M=L(!0,F)}finally{M?B():(b=!1,L=null)}}else b=!1}var B;if(typeof x=="function")B=function(){x(U)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,W=H.port2;H.port1.onmessage=U,B=function(){W.postMessage(null)}}else B=function(){v(U,0)};function V(F){L=F,b||(b=!0,B())}function K(F,M){R=v(function(){F(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,V(E))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var O=f;f=M;try{return F()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,M){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var O=f;f=F;try{return M()}finally{f=O}},t.unstable_scheduleCallback=function(F,M,O){var z=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?z+O:z):O=z,F){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=O+G,F={id:c++,callback:M,priorityLevel:F,startTime:O,expirationTime:G,sortIndex:-1},O>z?(F.sortIndex=O,e(u,F),n(l)===null&&F===n(u)&&(g?(y(R),R=-1):g=!0,K(w,O-z))):(F.sortIndex=G,e(l,F),p||m||(p=!0,V(E))),F},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(F){var M=f;return function(){var O=f;f=M;try{return F.apply(this,arguments)}finally{f=O}}}})(vx);yx.exports=vx;var jb=yx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub=A,$t=jb;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xx=new Set,io={};function hs(t,e){ei(t,e),ei(t+"Capture",e)}function ei(t,e){for(io[t]=e,t=0;t<e.length;t++)xx.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Md=Object.prototype.hasOwnProperty,Bb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hp={},Kp={};function $b(t){return Md.call(Kp,t)?!0:Md.call(Hp,t)?!1:Bb.test(t)?Kp[t]=!0:(Hp[t]=!0,!1)}function Vb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gb(t,e,n,r){if(e===null||typeof e>"u"||Vb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fh=/[\-:]([a-z])/g;function jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fh,jh);at[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fh,jh);at[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fh,jh);at[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uh(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gb(e,n,s,r)&&(n=null),r||s===null?$b(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=Ub.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aa=Symbol.for("react.element"),As=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Bh=Symbol.for("react.strict_mode"),Fd=Symbol.for("react.profiler"),Sx=Symbol.for("react.provider"),Ex=Symbol.for("react.context"),$h=Symbol.for("react.forward_ref"),jd=Symbol.for("react.suspense"),Ud=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),Tx=Symbol.for("react.offscreen"),Wp=Symbol.iterator;function Ti(t){return t===null||typeof t!="object"?null:(t=Wp&&t[Wp]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Object.assign,pc;function Oi(t){if(pc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pc=e&&e[1]||""}return`
`+pc+t}var gc=!1;function yc(t,e){if(!t||gc)return"";gc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{gc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oi(t):""}function Hb(t){switch(t.tag){case 5:return Oi(t.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 2:case 15:return t=yc(t.type,!1),t;case 11:return t=yc(t.type.render,!1),t;case 1:return t=yc(t.type,!0),t;default:return""}}function Bd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case As:return"Portal";case Fd:return"Profiler";case Bh:return"StrictMode";case jd:return"Suspense";case Ud:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ex:return(t.displayName||"Context")+".Consumer";case Sx:return(t._context.displayName||"Context")+".Provider";case $h:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vh:return e=t.displayName||null,e!==null?e:Bd(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return Bd(t(e))}catch{}}return null}function Kb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bd(e);case 8:return e===Bh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wb(t){var e=wx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function la(t){t._valueTracker||(t._valueTracker=Wb(t))}function bx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $d(t,e){var n=e.checked;return _e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ax(t,e){e=e.checked,e!=null&&Uh(t,"checked",e,!1)}function Vd(t,e){Ax(t,e);var n=Cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gd(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gd(t,e,n){(e!=="number"||bl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mi=Array.isArray;function Hs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return _e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Mi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function Rx(t,e){var n=Cr(e.value),r=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ua,Cx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ua=ua||document.createElement("div"),ua.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ua.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zb=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(t){zb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vi[e]=Vi[t]})});function kx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vi.hasOwnProperty(t)&&Vi[t]?(""+e).trim():e+"px"}function Ix(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qb=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wd(t,e){if(e){if(qb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=null;function Gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yd=null,Ks=null,Ws=null;function Xp(t){if(t=Ho(t)){if(typeof Yd!="function")throw Error($(280));var e=t.stateNode;e&&(e=_u(e),Yd(t.stateNode,t.type,e))}}function Dx(t){Ks?Ws?Ws.push(t):Ws=[t]:Ks=t}function Px(){if(Ks){var t=Ks,e=Ws;if(Ws=Ks=null,Xp(t),e)for(t=0;t<e.length;t++)Xp(e[t])}}function Nx(t,e){return t(e)}function _x(){}var vc=!1;function Ox(t,e,n){if(vc)return t(e,n);vc=!0;try{return Nx(t,e,n)}finally{vc=!1,(Ks!==null||Ws!==null)&&(_x(),Px())}}function ao(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Qd=!1;if(Zn)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){Qd=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{Qd=!1}function Yb(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Gi=!1,Al=null,Rl=!1,Xd=null,Qb={onError:function(t){Gi=!0,Al=t}};function Xb(t,e,n,r,s,i,o,a,l){Gi=!1,Al=null,Yb.apply(Qb,arguments)}function Jb(t,e,n,r,s,i,o,a,l){if(Xb.apply(this,arguments),Gi){if(Gi){var u=Al;Gi=!1,Al=null}else throw Error($(198));Rl||(Rl=!0,Xd=u)}}function ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jp(t){if(ms(t)!==t)throw Error($(188))}function Zb(t){var e=t.alternate;if(!e){if(e=ms(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jp(s),t;if(i===r)return Jp(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Fx(t){return t=Zb(t),t!==null?jx(t):null}function jx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jx(t);if(e!==null)return e;t=t.sibling}return null}var Ux=$t.unstable_scheduleCallback,Zp=$t.unstable_cancelCallback,eA=$t.unstable_shouldYield,tA=$t.unstable_requestPaint,Be=$t.unstable_now,nA=$t.unstable_getCurrentPriorityLevel,Hh=$t.unstable_ImmediatePriority,Bx=$t.unstable_UserBlockingPriority,Ll=$t.unstable_NormalPriority,rA=$t.unstable_LowPriority,$x=$t.unstable_IdlePriority,Iu=null,Dn=null;function sA(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Iu,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:aA,iA=Math.log,oA=Math.LN2;function aA(t){return t>>>=0,t===0?32:31-(iA(t)/oA|0)|0}var ca=64,da=4194304;function Fi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Fi(a):(i&=o,i!==0&&(r=Fi(i)))}else o=n&~s,o!==0?r=Fi(o):i!==0&&(r=Fi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),s=1<<n,r|=t[n],e&=~s;return r}function lA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=lA(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Jd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vx(){var t=ca;return ca<<=1,!(ca&4194240)&&(ca=64),t}function xc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function cA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Kh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function Gx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hx,Wh,Kx,Wx,zx,Zd=!1,fa=[],xr=null,Sr=null,Er=null,lo=new Map,uo=new Map,hr=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eg(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":lo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(e.pointerId)}}function bi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ho(e),e!==null&&Wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fA(t,e,n,r,s){switch(e){case"focusin":return xr=bi(xr,t,e,n,r,s),!0;case"dragenter":return Sr=bi(Sr,t,e,n,r,s),!0;case"mouseover":return Er=bi(Er,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return lo.set(i,bi(lo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,uo.set(i,bi(uo.get(i)||null,t,e,n,r,s)),!0}return!1}function qx(t){var e=Wr(t.target);if(e!==null){var n=ms(e);if(n!==null){if(e=n.tag,e===13){if(e=Mx(n),e!==null){t.blockedOn=e,zx(t.priority,function(){Kx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ef(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qd=r,n.target.dispatchEvent(r),qd=null}else return e=Ho(n),e!==null&&Wh(e),t.blockedOn=n,!1;e.shift()}return!0}function tg(t,e,n){qa(t)&&n.delete(e)}function hA(){Zd=!1,xr!==null&&qa(xr)&&(xr=null),Sr!==null&&qa(Sr)&&(Sr=null),Er!==null&&qa(Er)&&(Er=null),lo.forEach(tg),uo.forEach(tg)}function Ai(t,e){t.blockedOn===e&&(t.blockedOn=null,Zd||(Zd=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,hA)))}function co(t){function e(s){return Ai(s,t)}if(0<fa.length){Ai(fa[0],t);for(var n=1;n<fa.length;n++){var r=fa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Ai(xr,t),Sr!==null&&Ai(Sr,t),Er!==null&&Ai(Er,t),lo.forEach(e),uo.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)qx(n),n.blockedOn===null&&hr.shift()}var zs=sr.ReactCurrentBatchConfig,kl=!0;function mA(t,e,n,r){var s=ve,i=zs.transition;zs.transition=null;try{ve=1,zh(t,e,n,r)}finally{ve=s,zs.transition=i}}function pA(t,e,n,r){var s=ve,i=zs.transition;zs.transition=null;try{ve=4,zh(t,e,n,r)}finally{ve=s,zs.transition=i}}function zh(t,e,n,r){if(kl){var s=ef(t,e,n,r);if(s===null)kc(t,e,r,Il,n),eg(t,r);else if(fA(s,t,e,n,r))r.stopPropagation();else if(eg(t,r),e&4&&-1<dA.indexOf(t)){for(;s!==null;){var i=Ho(s);if(i!==null&&Hx(i),i=ef(t,e,n,r),i===null&&kc(t,e,r,Il,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else kc(t,e,r,null,n)}}var Il=null;function ef(t,e,n,r){if(Il=null,t=Gh(r),t=Wr(t),t!==null)if(e=ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Il=t,null}function Yx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nA()){case Hh:return 1;case Bx:return 4;case Ll:case rA:return 16;case $x:return 536870912;default:return 16}default:return 16}}var pr=null,qh=null,Ya=null;function Qx(){if(Ya)return Ya;var t,e=qh,n=e.length,r,s="value"in pr?pr.value:pr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ya=s.slice(t,1<r?1-r:void 0)}function Qa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ha(){return!0}function ng(){return!1}function Gt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ha:ng,this.isPropagationStopped=ng,this}return _e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),e}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yh=Gt(mi),Go=_e({},mi,{view:0,detail:0}),gA=Gt(Go),Sc,Ec,Ri,Du=_e({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ri&&(Ri&&t.type==="mousemove"?(Sc=t.screenX-Ri.screenX,Ec=t.screenY-Ri.screenY):Ec=Sc=0,Ri=t),Sc)},movementY:function(t){return"movementY"in t?t.movementY:Ec}}),rg=Gt(Du),yA=_e({},Du,{dataTransfer:0}),vA=Gt(yA),xA=_e({},Go,{relatedTarget:0}),Tc=Gt(xA),SA=_e({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),EA=Gt(SA),TA=_e({},mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wA=Gt(TA),bA=_e({},mi,{data:0}),sg=Gt(bA),AA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LA[t])?!!e[t]:!1}function Qh(){return CA}var kA=_e({},Go,{key:function(t){if(t.key){var e=AA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(t){return t.type==="keypress"?Qa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IA=Gt(kA),DA=_e({},Du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ig=Gt(DA),PA=_e({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),NA=Gt(PA),_A=_e({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),OA=Gt(_A),MA=_e({},Du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FA=Gt(MA),jA=[9,13,27,32],Xh=Zn&&"CompositionEvent"in window,Hi=null;Zn&&"documentMode"in document&&(Hi=document.documentMode);var UA=Zn&&"TextEvent"in window&&!Hi,Xx=Zn&&(!Xh||Hi&&8<Hi&&11>=Hi),og=" ",ag=!1;function Jx(t,e){switch(t){case"keyup":return jA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function BA(t,e){switch(t){case"compositionend":return Zx(e);case"keypress":return e.which!==32?null:(ag=!0,og);case"textInput":return t=e.data,t===og&&ag?null:t;default:return null}}function $A(t,e){if(Ls)return t==="compositionend"||!Xh&&Jx(t,e)?(t=Qx(),Ya=qh=pr=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xx&&e.locale!=="ko"?null:e.data;default:return null}}var VA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VA[t.type]:e==="textarea"}function eS(t,e,n,r){Dx(r),e=Dl(e,"onChange"),0<e.length&&(n=new Yh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ki=null,fo=null;function GA(t){dS(t,0)}function Pu(t){var e=Is(t);if(bx(e))return t}function HA(t,e){if(t==="change")return e}var tS=!1;if(Zn){var wc;if(Zn){var bc="oninput"in document;if(!bc){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),bc=typeof ug.oninput=="function"}wc=bc}else wc=!1;tS=wc&&(!document.documentMode||9<document.documentMode)}function cg(){Ki&&(Ki.detachEvent("onpropertychange",nS),fo=Ki=null)}function nS(t){if(t.propertyName==="value"&&Pu(fo)){var e=[];eS(e,fo,t,Gh(t)),Ox(GA,e)}}function KA(t,e,n){t==="focusin"?(cg(),Ki=e,fo=n,Ki.attachEvent("onpropertychange",nS)):t==="focusout"&&cg()}function WA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pu(fo)}function zA(t,e){if(t==="click")return Pu(e)}function qA(t,e){if(t==="input"||t==="change")return Pu(e)}function YA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:YA;function ho(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Md.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fg(t,e){var n=dg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dg(n)}}function rS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sS(){for(var t=window,e=bl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bl(t.document)}return e}function Jh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QA(t){var e=sS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rS(n.ownerDocument.documentElement,n)){if(r!==null&&Jh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=fg(n,i);var o=fg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XA=Zn&&"documentMode"in document&&11>=document.documentMode,Cs=null,tf=null,Wi=null,nf=!1;function hg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nf||Cs==null||Cs!==bl(r)||(r=Cs,"selectionStart"in r&&Jh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wi&&ho(Wi,r)||(Wi=r,r=Dl(tf,"onSelect"),0<r.length&&(e=new Yh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cs)))}function ma(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},Ac={},iS={};Zn&&(iS=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Nu(t){if(Ac[t])return Ac[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iS)return Ac[t]=e[n];return t}var oS=Nu("animationend"),aS=Nu("animationiteration"),lS=Nu("animationstart"),uS=Nu("transitionend"),cS=new Map,mg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){cS.set(t,e),hs(e,[t])}for(var Rc=0;Rc<mg.length;Rc++){var Lc=mg[Rc],JA=Lc.toLowerCase(),ZA=Lc[0].toUpperCase()+Lc.slice(1);Pr(JA,"on"+ZA)}Pr(oS,"onAnimationEnd");Pr(aS,"onAnimationIteration");Pr(lS,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(uS,"onTransitionEnd");ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function pg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jb(r,e,void 0,t),t.currentTarget=null}function dS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;pg(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;pg(s,a,u),i=l}}}if(Rl)throw t=Xd,Rl=!1,Xd=null,t}function Ae(t,e){var n=e[lf];n===void 0&&(n=e[lf]=new Set);var r=t+"__bubble";n.has(r)||(fS(e,t,2,!1),n.add(r))}function Cc(t,e,n){var r=0;e&&(r|=4),fS(n,t,r,e)}var pa="_reactListening"+Math.random().toString(36).slice(2);function mo(t){if(!t[pa]){t[pa]=!0,xx.forEach(function(n){n!=="selectionchange"&&(eR.has(n)||Cc(n,!1,t),Cc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pa]||(e[pa]=!0,Cc("selectionchange",!1,e))}}function fS(t,e,n,r){switch(Yx(e)){case 1:var s=mA;break;case 4:s=pA;break;default:s=zh}n=s.bind(null,e,n,t),s=void 0,!Qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function kc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Wr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ox(function(){var u=i,c=Gh(n),d=[];e:{var f=cS.get(t);if(f!==void 0){var m=Yh,p=t;switch(t){case"keypress":if(Qa(n)===0)break e;case"keydown":case"keyup":m=IA;break;case"focusin":p="focus",m=Tc;break;case"focusout":p="blur",m=Tc;break;case"beforeblur":case"afterblur":m=Tc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=vA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=NA;break;case oS:case aS:case lS:m=EA;break;case uS:m=OA;break;case"scroll":m=gA;break;case"wheel":m=FA;break;case"copy":case"cut":case"paste":m=wA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ig}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var x=u,S;x!==null;){S=x;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,y!==null&&(w=ao(x,y),w!=null&&g.push(po(x,w,S)))),v)break;x=x.return}0<g.length&&(f=new m(f,p,null,n,c),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==qd&&(p=n.relatedTarget||n.fromElement)&&(Wr(p)||p[er]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?Wr(p):null,p!==null&&(v=ms(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(g=rg,w="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=ig,w="onPointerLeave",y="onPointerEnter",x="pointer"),v=m==null?f:Is(m),S=p==null?f:Is(p),f=new g(w,x+"leave",m,n,c),f.target=v,f.relatedTarget=S,w=null,Wr(c)===u&&(g=new g(y,x+"enter",p,n,c),g.target=S,g.relatedTarget=v,w=g),v=w,m&&p)t:{for(g=m,y=p,x=0,S=g;S;S=xs(S))x++;for(S=0,w=y;w;w=xs(w))S++;for(;0<x-S;)g=xs(g),x--;for(;0<S-x;)y=xs(y),S--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=xs(g),y=xs(y)}g=null}else g=null;m!==null&&gg(d,f,m,g,!1),p!==null&&v!==null&&gg(d,v,p,g,!0)}}e:{if(f=u?Is(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var E=HA;else if(lg(f))if(tS)E=qA;else{E=WA;var b=KA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=zA);if(E&&(E=E(t,u))){eS(d,E,n,c);break e}b&&b(t,f,u),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&Gd(f,"number",f.value)}switch(b=u?Is(u):window,t){case"focusin":(lg(b)||b.contentEditable==="true")&&(Cs=b,tf=u,Wi=null);break;case"focusout":Wi=tf=Cs=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,hg(d,n,c);break;case"selectionchange":if(XA)break;case"keydown":case"keyup":hg(d,n,c)}var L;if(Xh)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ls?Jx(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Xx&&n.locale!=="ko"&&(Ls||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ls&&(L=Qx()):(pr=c,qh="value"in pr?pr.value:pr.textContent,Ls=!0)),b=Dl(u,R),0<b.length&&(R=new sg(R,t,null,n,c),d.push({event:R,listeners:b}),L?R.data=L:(L=Zx(n),L!==null&&(R.data=L)))),(L=UA?BA(t,n):$A(t,n))&&(u=Dl(u,"onBeforeInput"),0<u.length&&(c=new sg("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=L))}dS(d,e)})}function po(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ao(t,n),i!=null&&r.unshift(po(t,i,s)),i=ao(t,e),i!=null&&r.push(po(t,i,s))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=ao(n,i),l!=null&&o.unshift(po(n,l,a))):s||(l=ao(n,i),l!=null&&o.push(po(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tR=/\r\n?/g,nR=/\u0000|\uFFFD/g;function yg(t){return(typeof t=="string"?t:""+t).replace(tR,`
`).replace(nR,"")}function ga(t,e,n){if(e=yg(e),yg(t)!==e&&n)throw Error($(425))}function Pl(){}var rf=null,sf=null;function of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var af=typeof setTimeout=="function"?setTimeout:void 0,rR=typeof clearTimeout=="function"?clearTimeout:void 0,vg=typeof Promise=="function"?Promise:void 0,sR=typeof queueMicrotask=="function"?queueMicrotask:typeof vg<"u"?function(t){return vg.resolve(null).then(t).catch(iR)}:af;function iR(t){setTimeout(function(){throw t})}function Ic(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),co(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);co(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pi=Math.random().toString(36).slice(2),Rn="__reactFiber$"+pi,go="__reactProps$"+pi,er="__reactContainer$"+pi,lf="__reactEvents$"+pi,oR="__reactListeners$"+pi,aR="__reactHandles$"+pi;function Wr(t){var e=t[Rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[Rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xg(t);t!==null;){if(n=t[Rn])return n;t=xg(t)}return e}t=n,n=t.parentNode}return null}function Ho(t){return t=t[Rn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function _u(t){return t[go]||null}var uf=[],Ds=-1;function Nr(t){return{current:t}}function Re(t){0>Ds||(t.current=uf[Ds],uf[Ds]=null,Ds--)}function Te(t,e){Ds++,uf[Ds]=t.current,t.current=e}var kr={},yt=Nr(kr),kt=Nr(!1),os=kr;function ti(t,e){var n=t.type.contextTypes;if(!n)return kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function It(t){return t=t.childContextTypes,t!=null}function Nl(){Re(kt),Re(yt)}function Sg(t,e,n){if(yt.current!==kr)throw Error($(168));Te(yt,e),Te(kt,n)}function hS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,Kb(t)||"Unknown",s));return _e({},n,r)}function _l(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,os=yt.current,Te(yt,t),Te(kt,kt.current),!0}function Eg(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=hS(t,e,os),r.__reactInternalMemoizedMergedChildContext=t,Re(kt),Re(yt),Te(yt,t)):Re(kt),Te(kt,n)}var Wn=null,Ou=!1,Dc=!1;function mS(t){Wn===null?Wn=[t]:Wn.push(t)}function lR(t){Ou=!0,mS(t)}function _r(){if(!Dc&&Wn!==null){Dc=!0;var t=0,e=ve;try{var n=Wn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,Ou=!1}catch(s){throw Wn!==null&&(Wn=Wn.slice(t+1)),Ux(Hh,_r),s}finally{ve=e,Dc=!1}}return null}var Ps=[],Ns=0,Ol=null,Ml=0,Qt=[],Xt=0,as=null,qn=1,Yn="";function Br(t,e){Ps[Ns++]=Ml,Ps[Ns++]=Ol,Ol=t,Ml=e}function pS(t,e,n){Qt[Xt++]=qn,Qt[Xt++]=Yn,Qt[Xt++]=as,as=t;var r=qn;t=Yn;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var i=32-gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qn=1<<32-gn(e)+s|n<<s|r,Yn=i+t}else qn=1<<i|n<<s|r,Yn=t}function Zh(t){t.return!==null&&(Br(t,1),pS(t,1,0))}function em(t){for(;t===Ol;)Ol=Ps[--Ns],Ps[Ns]=null,Ml=Ps[--Ns],Ps[Ns]=null;for(;t===as;)as=Qt[--Xt],Qt[Xt]=null,Yn=Qt[--Xt],Qt[Xt]=null,qn=Qt[--Xt],Qt[Xt]=null}var jt=null,Mt=null,ke=!1,fn=null;function gS(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Tg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Mt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Mt=null,!0):!1;default:return!1}}function cf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function df(t){if(ke){var e=Mt;if(e){var n=e;if(!Tg(t,e)){if(cf(t))throw Error($(418));e=Tr(n.nextSibling);var r=jt;e&&Tg(t,e)?gS(r,n):(t.flags=t.flags&-4097|2,ke=!1,jt=t)}}else{if(cf(t))throw Error($(418));t.flags=t.flags&-4097|2,ke=!1,jt=t}}}function wg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function ya(t){if(t!==jt)return!1;if(!ke)return wg(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!of(t.type,t.memoizedProps)),e&&(e=Mt)){if(cf(t))throw yS(),Error($(418));for(;e;)gS(t,e),e=Tr(e.nextSibling)}if(wg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=jt?Tr(t.stateNode.nextSibling):null;return!0}function yS(){for(var t=Mt;t;)t=Tr(t.nextSibling)}function ni(){Mt=jt=null,ke=!1}function tm(t){fn===null?fn=[t]:fn.push(t)}var uR=sr.ReactCurrentBatchConfig;function Li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function va(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bg(t){var e=t._init;return e(t._payload)}function vS(t){function e(y,x){if(t){var S=y.deletions;S===null?(y.deletions=[x],y.flags|=16):S.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=Rr(y,x),y.index=0,y.sibling=null,y}function i(y,x,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<x?(y.flags|=2,x):S):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,S,w){return x===null||x.tag!==6?(x=jc(S,y.mode,w),x.return=y,x):(x=s(x,S),x.return=y,x)}function l(y,x,S,w){var E=S.type;return E===Rs?c(y,x,S.props.children,w,S.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ur&&bg(E)===x.type)?(w=s(x,S.props),w.ref=Li(y,x,S),w.return=y,w):(w=rl(S.type,S.key,S.props,null,y.mode,w),w.ref=Li(y,x,S),w.return=y,w)}function u(y,x,S,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Uc(S,y.mode,w),x.return=y,x):(x=s(x,S.children||[]),x.return=y,x)}function c(y,x,S,w,E){return x===null||x.tag!==7?(x=es(S,y.mode,w,E),x.return=y,x):(x=s(x,S),x.return=y,x)}function d(y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=jc(""+x,y.mode,S),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case aa:return S=rl(x.type,x.key,x.props,null,y.mode,S),S.ref=Li(y,null,x),S.return=y,S;case As:return x=Uc(x,y.mode,S),x.return=y,x;case ur:var w=x._init;return d(y,w(x._payload),S)}if(Mi(x)||Ti(x))return x=es(x,y.mode,S,null),x.return=y,x;va(y,x)}return null}function f(y,x,S,w){var E=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return E!==null?null:a(y,x,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case aa:return S.key===E?l(y,x,S,w):null;case As:return S.key===E?u(y,x,S,w):null;case ur:return E=S._init,f(y,x,E(S._payload),w)}if(Mi(S)||Ti(S))return E!==null?null:c(y,x,S,w,null);va(y,S)}return null}function m(y,x,S,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(S)||null,a(x,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case aa:return y=y.get(w.key===null?S:w.key)||null,l(x,y,w,E);case As:return y=y.get(w.key===null?S:w.key)||null,u(x,y,w,E);case ur:var b=w._init;return m(y,x,S,b(w._payload),E)}if(Mi(w)||Ti(w))return y=y.get(S)||null,c(x,y,w,E,null);va(x,w)}return null}function p(y,x,S,w){for(var E=null,b=null,L=x,R=x=0,I=null;L!==null&&R<S.length;R++){L.index>R?(I=L,L=null):I=L.sibling;var C=f(y,L,S[R],w);if(C===null){L===null&&(L=I);break}t&&L&&C.alternate===null&&e(y,L),x=i(C,x,R),b===null?E=C:b.sibling=C,b=C,L=I}if(R===S.length)return n(y,L),ke&&Br(y,R),E;if(L===null){for(;R<S.length;R++)L=d(y,S[R],w),L!==null&&(x=i(L,x,R),b===null?E=L:b.sibling=L,b=L);return ke&&Br(y,R),E}for(L=r(y,L);R<S.length;R++)I=m(L,y,R,S[R],w),I!==null&&(t&&I.alternate!==null&&L.delete(I.key===null?R:I.key),x=i(I,x,R),b===null?E=I:b.sibling=I,b=I);return t&&L.forEach(function(k){return e(y,k)}),ke&&Br(y,R),E}function g(y,x,S,w){var E=Ti(S);if(typeof E!="function")throw Error($(150));if(S=E.call(S),S==null)throw Error($(151));for(var b=E=null,L=x,R=x=0,I=null,C=S.next();L!==null&&!C.done;R++,C=S.next()){L.index>R?(I=L,L=null):I=L.sibling;var k=f(y,L,C.value,w);if(k===null){L===null&&(L=I);break}t&&L&&k.alternate===null&&e(y,L),x=i(k,x,R),b===null?E=k:b.sibling=k,b=k,L=I}if(C.done)return n(y,L),ke&&Br(y,R),E;if(L===null){for(;!C.done;R++,C=S.next())C=d(y,C.value,w),C!==null&&(x=i(C,x,R),b===null?E=C:b.sibling=C,b=C);return ke&&Br(y,R),E}for(L=r(y,L);!C.done;R++,C=S.next())C=m(L,y,R,C.value,w),C!==null&&(t&&C.alternate!==null&&L.delete(C.key===null?R:C.key),x=i(C,x,R),b===null?E=C:b.sibling=C,b=C);return t&&L.forEach(function(U){return e(y,U)}),ke&&Br(y,R),E}function v(y,x,S,w){if(typeof S=="object"&&S!==null&&S.type===Rs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case aa:e:{for(var E=S.key,b=x;b!==null;){if(b.key===E){if(E=S.type,E===Rs){if(b.tag===7){n(y,b.sibling),x=s(b,S.props.children),x.return=y,y=x;break e}}else if(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ur&&bg(E)===b.type){n(y,b.sibling),x=s(b,S.props),x.ref=Li(y,b,S),x.return=y,y=x;break e}n(y,b);break}else e(y,b);b=b.sibling}S.type===Rs?(x=es(S.props.children,y.mode,w,S.key),x.return=y,y=x):(w=rl(S.type,S.key,S.props,null,y.mode,w),w.ref=Li(y,x,S),w.return=y,y=w)}return o(y);case As:e:{for(b=S.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(y,x.sibling),x=s(x,S.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Uc(S,y.mode,w),x.return=y,y=x}return o(y);case ur:return b=S._init,v(y,x,b(S._payload),w)}if(Mi(S))return p(y,x,S,w);if(Ti(S))return g(y,x,S,w);va(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(y,x.sibling),x=s(x,S),x.return=y,y=x):(n(y,x),x=jc(S,y.mode,w),x.return=y,y=x),o(y)):n(y,x)}return v}var ri=vS(!0),xS=vS(!1),Fl=Nr(null),jl=null,_s=null,nm=null;function rm(){nm=_s=jl=null}function sm(t){var e=Fl.current;Re(Fl),t._currentValue=e}function ff(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qs(t,e){jl=t,nm=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(nm!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if(jl===null)throw Error($(308));_s=t,jl.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var zr=null;function im(t){zr===null?zr=[t]:zr.push(t)}function SS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,im(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function om(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ES(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,im(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function Xa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kh(t,n)}}function Ag(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ul(t,e,n,r){var s=t.updateQueue;cr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,c=u=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(f=e,m=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(m,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(m,d,f):p,f==null)break e;d=_e({},d,f);break e;case 2:cr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);us|=o,t.lanes=o,t.memoizedState=d}}function Rg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Ko={},Pn=Nr(Ko),yo=Nr(Ko),vo=Nr(Ko);function qr(t){if(t===Ko)throw Error($(174));return t}function am(t,e){switch(Te(vo,e),Te(yo,t),Te(Pn,Ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kd(e,t)}Re(Pn),Te(Pn,e)}function si(){Re(Pn),Re(yo),Re(vo)}function TS(t){qr(vo.current);var e=qr(Pn.current),n=Kd(e,t.type);e!==n&&(Te(yo,t),Te(Pn,n))}function lm(t){yo.current===t&&(Re(Pn),Re(yo))}var De=Nr(0);function Bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pc=[];function um(){for(var t=0;t<Pc.length;t++)Pc[t]._workInProgressVersionPrimary=null;Pc.length=0}var Ja=sr.ReactCurrentDispatcher,Nc=sr.ReactCurrentBatchConfig,ls=0,Ne=null,ze=null,Je=null,$l=!1,zi=!1,xo=0,cR=0;function lt(){throw Error($(321))}function cm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function dm(t,e,n,r,s,i){if(ls=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ja.current=t===null||t.memoizedState===null?mR:pR,t=n(r,s),zi){i=0;do{if(zi=!1,xo=0,25<=i)throw Error($(301));i+=1,Je=ze=null,e.updateQueue=null,Ja.current=gR,t=n(r,s)}while(zi)}if(Ja.current=Vl,e=ze!==null&&ze.next!==null,ls=0,Je=ze=Ne=null,$l=!1,e)throw Error($(300));return t}function fm(){var t=xo!==0;return xo=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ne.memoizedState=Je=t:Je=Je.next=t,Je}function tn(){if(ze===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Je===null?Ne.memoizedState:Je.next;if(e!==null)Je=e,ze=t;else{if(t===null)throw Error($(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Je===null?Ne.memoizedState=Je=t:Je=Je.next=t}return Je}function So(t,e){return typeof e=="function"?e(t):e}function _c(t){var e=tn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((ls&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ne.lanes|=c,us|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,vn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Oc(t){var e=tn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function wS(){}function bS(t,e){var n=Ne,r=tn(),s=e(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,hm(LS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Eo(9,RS.bind(null,n,r,s,e),void 0,null),tt===null)throw Error($(349));ls&30||AS(n,e,s)}return s}function AS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function RS(t,e,n,r){e.value=n,e.getSnapshot=r,CS(e)&&kS(t)}function LS(t,e,n){return n(function(){CS(e)&&kS(t)})}function CS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function kS(t){var e=tr(t,1);e!==null&&yn(e,t,1,-1)}function Lg(t){var e=wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:t},e.queue=t,t=t.dispatch=hR.bind(null,Ne,t),[e.memoizedState,t]}function Eo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function IS(){return tn().memoizedState}function Za(t,e,n,r){var s=wn();Ne.flags|=t,s.memoizedState=Eo(1|e,n,void 0,r===void 0?null:r)}function Mu(t,e,n,r){var s=tn();r=r===void 0?null:r;var i=void 0;if(ze!==null){var o=ze.memoizedState;if(i=o.destroy,r!==null&&cm(r,o.deps)){s.memoizedState=Eo(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=Eo(1|e,n,i,r)}function Cg(t,e){return Za(8390656,8,t,e)}function hm(t,e){return Mu(2048,8,t,e)}function DS(t,e){return Mu(4,2,t,e)}function PS(t,e){return Mu(4,4,t,e)}function NS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _S(t,e,n){return n=n!=null?n.concat([t]):null,Mu(4,4,NS.bind(null,e,t),n)}function mm(){}function OS(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function MS(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FS(t,e,n){return ls&21?(vn(n,e)||(n=Vx(),Ne.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function dR(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Nc.transition;Nc.transition={};try{t(!1),e()}finally{ve=n,Nc.transition=r}}function jS(){return tn().memoizedState}function fR(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},US(t))BS(e,n);else if(n=SS(t,e,n,r),n!==null){var s=Tt();yn(n,t,r,s),$S(n,e,r)}}function hR(t,e,n){var r=Ar(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(US(t))BS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,vn(a,o)){var l=e.interleaved;l===null?(s.next=s,im(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=SS(t,e,s,r),n!==null&&(s=Tt(),yn(n,t,r,s),$S(n,e,r))}}function US(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function BS(t,e){zi=$l=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $S(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kh(t,n)}}var Vl={readContext:en,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},mR={readContext:en,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:Cg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Za(4194308,4,NS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Za(4194308,4,t,e)},useInsertionEffect:function(t,e){return Za(4,2,t,e)},useMemo:function(t,e){var n=wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fR.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:Lg,useDebugValue:mm,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=Lg(!1),e=t[0];return t=dR.bind(null,t[1]),wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=wn();if(ke){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),tt===null)throw Error($(349));ls&30||AS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Cg(LS.bind(null,r,i,t),[t]),r.flags|=2048,Eo(9,RS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wn(),e=tt.identifierPrefix;if(ke){var n=Yn,r=qn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pR={readContext:en,useCallback:OS,useContext:en,useEffect:hm,useImperativeHandle:_S,useInsertionEffect:DS,useLayoutEffect:PS,useMemo:MS,useReducer:_c,useRef:IS,useState:function(){return _c(So)},useDebugValue:mm,useDeferredValue:function(t){var e=tn();return FS(e,ze.memoizedState,t)},useTransition:function(){var t=_c(So)[0],e=tn().memoizedState;return[t,e]},useMutableSource:wS,useSyncExternalStore:bS,useId:jS,unstable_isNewReconciler:!1},gR={readContext:en,useCallback:OS,useContext:en,useEffect:hm,useImperativeHandle:_S,useInsertionEffect:DS,useLayoutEffect:PS,useMemo:MS,useReducer:Oc,useRef:IS,useState:function(){return Oc(So)},useDebugValue:mm,useDeferredValue:function(t){var e=tn();return ze===null?e.memoizedState=t:FS(e,ze.memoizedState,t)},useTransition:function(){var t=Oc(So)[0],e=tn().memoizedState;return[t,e]},useMutableSource:wS,useSyncExternalStore:bS,useId:jS,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=_e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fu={isMounted:function(t){return(t=t._reactInternals)?ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Ar(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(yn(e,t,s,r),Xa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Ar(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(yn(e,t,s,r),Xa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Ar(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=wr(t,s,r),e!==null&&(yn(e,t,r,n),Xa(e,t,r))}};function kg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ho(n,r)||!ho(s,i):!0}function VS(t,e,n){var r=!1,s=kr,i=e.contextType;return typeof i=="object"&&i!==null?i=en(i):(s=It(e)?os:yt.current,r=e.contextTypes,i=(r=r!=null)?ti(t,s):kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ig(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fu.enqueueReplaceState(e,e.state,null)}function mf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},om(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=en(i):(i=It(e)?os:yt.current,s.context=ti(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(hf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fu.enqueueReplaceState(s,s.state,null),Ul(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ii(t,e){try{var n="",r=e;do n+=Hb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yR=typeof WeakMap=="function"?WeakMap:Map;function GS(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,Af=r),pf(t,e)},n}function HS(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){pf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){pf(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Dg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=DR.bind(null,t,e,n),e.then(t,t))}function Pg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ng(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,wr(n,e,1))),n.lanes|=1),t)}var vR=sr.ReactCurrentOwner,Ct=!1;function xt(t,e,n,r){e.child=t===null?xS(e,null,n,r):ri(e,t.child,n,r)}function _g(t,e,n,r,s){n=n.render;var i=e.ref;return qs(e,s),r=dm(t,e,n,r,i,s),n=fm(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(ke&&n&&Zh(e),e.flags|=1,xt(t,e,r,s),e.child)}function Og(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Tm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,KS(t,e,i,r,s)):(t=rl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ho,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=Rr(i,r),t.ref=e.ref,t.return=e,e.child=t}function KS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ho(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,nr(t,e,s)}return gf(t,e,n,r,s)}function WS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ms,_t),_t|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ms,_t),_t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ms,_t),_t|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Ms,_t),_t|=r;return xt(t,e,s,n),e.child}function zS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gf(t,e,n,r,s){var i=It(n)?os:yt.current;return i=ti(e,i),qs(e,s),n=dm(t,e,n,r,i,s),r=fm(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(ke&&r&&Zh(e),e.flags|=1,xt(t,e,n,s),e.child)}function Mg(t,e,n,r,s){if(It(n)){var i=!0;_l(e)}else i=!1;if(qs(e,s),e.stateNode===null)el(t,e),VS(e,n,r),mf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=en(u):(u=It(n)?os:yt.current,u=ti(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Ig(e,o,r,u),cr=!1;var f=e.memoizedState;o.state=f,Ul(e,r,o,s),l=e.memoizedState,a!==r||f!==l||kt.current||cr?(typeof c=="function"&&(hf(e,n,c,r),l=e.memoizedState),(a=cr||kg(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ES(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:cn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=en(l):(l=It(n)?os:yt.current,l=ti(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Ig(e,o,r,l),cr=!1,f=e.memoizedState,o.state=f,Ul(e,r,o,s);var p=e.memoizedState;a!==d||f!==p||kt.current||cr?(typeof m=="function"&&(hf(e,n,m,r),p=e.memoizedState),(u=cr||kg(e,n,u,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return yf(t,e,n,r,i,s)}function yf(t,e,n,r,s,i){zS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Eg(e,n,!1),nr(t,e,i);r=e.stateNode,vR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ri(e,t.child,null,i),e.child=ri(e,null,a,i)):xt(t,e,a,i),e.memoizedState=r.state,s&&Eg(e,n,!0),e.child}function qS(t){var e=t.stateNode;e.pendingContext?Sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sg(t,e.context,!1),am(t,e.containerInfo)}function Fg(t,e,n,r,s){return ni(),tm(s),e.flags|=256,xt(t,e,n,r),e.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function xf(t){return{baseLanes:t,cachePool:null,transitions:null}}function YS(t,e,n){var r=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(De,s&1),t===null)return df(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Bu(o,r,0,null),t=es(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=xf(n),e.memoizedState=vf,t):pm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return xR(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Rr(a,i):(i=es(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?xf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=vf,r}return i=t.child,t=i.sibling,r=Rr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pm(t,e){return e=Bu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xa(t,e,n,r){return r!==null&&tm(r),ri(e,t.child,null,n),t=pm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Mc(Error($(422))),xa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Bu({mode:"visible",children:r.children},s,0,null),i=es(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ri(e,t.child,null,o),e.child.memoizedState=xf(o),e.memoizedState=vf,i);if(!(e.mode&1))return xa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=Mc(i,r,void 0),xa(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ct||a){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),yn(r,t,s,-1))}return Em(),r=Mc(Error($(421))),xa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=PR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mt=Tr(s.nextSibling),jt=e,ke=!0,fn=null,t!==null&&(Qt[Xt++]=qn,Qt[Xt++]=Yn,Qt[Xt++]=as,qn=t.id,Yn=t.overflow,as=e),e=pm(e,r.children),e.flags|=4096,e)}function jg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ff(t.return,e,n)}function Fc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function QS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jg(t,n,e);else if(t.tag===19)jg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Fc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Fc(e,!0,n,null,i);break;case"together":Fc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function el(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SR(t,e,n){switch(e.tag){case 3:qS(e),ni();break;case 5:TS(e);break;case 1:It(e.type)&&_l(e);break;case 4:am(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Fl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?YS(t,e,n):(Te(De,De.current&1),t=nr(t,e,n),t!==null?t.sibling:null);Te(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,WS(t,e,n)}return nr(t,e,n)}var XS,Sf,JS,ZS;XS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sf=function(){};JS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qr(Pn.current);var i=null;switch(n){case"input":s=$d(t,s),r=$d(t,r),i=[];break;case"select":s=_e({},s,{value:void 0}),r=_e({},r,{value:void 0}),i=[];break;case"textarea":s=Hd(t,s),r=Hd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pl)}Wd(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(io.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(io.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ae("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};ZS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ci(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ER(t,e,n){var r=e.pendingProps;switch(em(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return It(e.type)&&Nl(),ut(e),null;case 3:return r=e.stateNode,si(),Re(kt),Re(yt),um(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ya(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(Cf(fn),fn=null))),Sf(t,e),ut(e),null;case 5:lm(e);var s=qr(vo.current);if(n=e.type,t!==null&&e.stateNode!=null)JS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ut(e),null}if(t=qr(Pn.current),ya(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Rn]=e,r[go]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<ji.length;s++)Ae(ji[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":zp(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":Yp(r,i),Ae("invalid",r)}Wd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ga(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ga(r.textContent,a,t),s=["children",""+a]):io.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":la(r),qp(r,i,!0);break;case"textarea":la(r),Qp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rn]=e,t[go]=r,XS(t,e,!1,!1),e.stateNode=t;e:{switch(o=zd(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<ji.length;s++)Ae(ji[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":zp(t,r),s=$d(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=_e({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Yp(t,r),s=Hd(t,r),Ae("invalid",t);break;default:s=r}Wd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Ix(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Cx(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&oo(t,l):typeof l=="number"&&oo(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(io.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ae("scroll",t):l!=null&&Uh(t,i,l,o))}switch(n){case"input":la(t),qp(t,r,!1);break;case"textarea":la(t),Qp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Hs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)ZS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=qr(vo.current),qr(Pn.current),ya(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rn]=e,(i=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:ga(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ga(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rn]=e,e.stateNode=r}return ut(e),null;case 13:if(Re(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Mt!==null&&e.mode&1&&!(e.flags&128))yS(),ni(),e.flags|=98560,i=!1;else if(i=ya(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Rn]=e}else ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else fn!==null&&(Cf(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?qe===0&&(qe=3):Em())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return si(),Sf(t,e),t===null&&mo(e.stateNode.containerInfo),ut(e),null;case 10:return sm(e.type._context),ut(e),null;case 17:return It(e.type)&&Nl(),ut(e),null;case 19:if(Re(De),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ci(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bl(t),o!==null){for(e.flags|=128,Ci(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>oi&&(e.flags|=128,r=!0,Ci(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return ut(e),null}else 2*Be()-i.renderingStartTime>oi&&n!==1073741824&&(e.flags|=128,r=!0,Ci(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=De.current,Te(De,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Sm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_t&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function TR(t,e){switch(em(e),e.tag){case 1:return It(e.type)&&Nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return si(),Re(kt),Re(yt),um(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lm(e),null;case 13:if(Re(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(De),null;case 4:return si(),null;case 10:return sm(e.type._context),null;case 22:case 23:return Sm(),null;case 24:return null;default:return null}}var Sa=!1,mt=!1,wR=typeof WeakSet=="function"?WeakSet:Set,q=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Ef(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Ug=!1;function bR(t,e){if(rf=kl,t=sS(),Jh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++c===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sf={focusedElem:t,selectionRange:n},kl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:cn(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(w){Fe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return p=Ug,Ug=!1,p}function qi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ef(e,n,i)}s=s.next}while(s!==r)}}function ju(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eE(t){var e=t.alternate;e!==null&&(t.alternate=null,eE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rn],delete e[go],delete e[lf],delete e[oR],delete e[aR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tE(t){return t.tag===5||t.tag===3||t.tag===4}function Bg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pl));else if(r!==4&&(t=t.child,t!==null))for(wf(t,e,n),t=t.sibling;t!==null;)wf(t,e,n),t=t.sibling}function bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bf(t,e,n),t=t.sibling;t!==null;)bf(t,e,n),t=t.sibling}var rt=null,dn=!1;function ir(t,e,n){for(n=n.child;n!==null;)nE(t,e,n),n=n.sibling}function nE(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Iu,n)}catch{}switch(n.tag){case 5:mt||Os(n,e);case 6:var r=rt,s=dn;rt=null,ir(t,e,n),rt=r,dn=s,rt!==null&&(dn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(dn?(t=rt,n=n.stateNode,t.nodeType===8?Ic(t.parentNode,n):t.nodeType===1&&Ic(t,n),co(t)):Ic(rt,n.stateNode));break;case 4:r=rt,s=dn,rt=n.stateNode.containerInfo,dn=!0,ir(t,e,n),rt=r,dn=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ef(n,e,o),s=s.next}while(s!==r)}ir(t,e,n);break;case 1:if(!mt&&(Os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,ir(t,e,n),mt=r):ir(t,e,n);break;default:ir(t,e,n)}}function $g(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wR),e.forEach(function(r){var s=NR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,dn=!1;break e;case 3:rt=a.stateNode.containerInfo,dn=!0;break e;case 4:rt=a.stateNode.containerInfo,dn=!0;break e}a=a.return}if(rt===null)throw Error($(160));nE(i,o,s),rt=null,dn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Fe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rE(e,t),e=e.sibling}function rE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),Sn(t),r&4){try{qi(3,t,t.return),ju(3,t)}catch(g){Fe(t,t.return,g)}try{qi(5,t,t.return)}catch(g){Fe(t,t.return,g)}}break;case 1:rn(e,t),Sn(t),r&512&&n!==null&&Os(n,n.return);break;case 5:if(rn(e,t),Sn(t),r&512&&n!==null&&Os(n,n.return),t.flags&32){var s=t.stateNode;try{oo(s,"")}catch(g){Fe(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ax(s,i),zd(a,o);var u=zd(a,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Ix(s,d):c==="dangerouslySetInnerHTML"?Cx(s,d):c==="children"?oo(s,d):Uh(s,c,d,u)}switch(a){case"input":Vd(s,i);break;case"textarea":Rx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Hs(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Hs(s,!!i.multiple,i.defaultValue,!0):Hs(s,!!i.multiple,i.multiple?[]:"",!1))}s[go]=i}catch(g){Fe(t,t.return,g)}}break;case 6:if(rn(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Fe(t,t.return,g)}}break;case 3:if(rn(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{co(e.containerInfo)}catch(g){Fe(t,t.return,g)}break;case 4:rn(e,t),Sn(t);break;case 13:rn(e,t),Sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vm=Be())),r&4&&$g(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(u=mt)||c,rn(e,t),mt=u):rn(e,t),Sn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(q=t,c=t.child;c!==null;){for(d=q=c;q!==null;){switch(f=q,m=f.child,f.tag){case 0:case 11:case 14:case 15:qi(4,f,f.return);break;case 1:Os(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Fe(r,n,g)}}break;case 5:Os(f,f.return);break;case 22:if(f.memoizedState!==null){Gg(d);continue}}m!==null?(m.return=f,q=m):Gg(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kx("display",o))}catch(g){Fe(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Fe(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:rn(e,t),Sn(t),r&4&&$g(t);break;case 21:break;default:rn(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tE(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(oo(s,""),r.flags&=-33);var i=Bg(t);bf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Bg(t);wf(t,a,o);break;default:throw Error($(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AR(t,e,n){q=t,sE(t)}function sE(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sa;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||mt;a=Sa;var u=mt;if(Sa=o,(mt=l)&&!u)for(q=s;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?Hg(s):l!==null?(l.return=o,q=l):Hg(s);for(;i!==null;)q=i,sE(i),i=i.sibling;q=s,Sa=a,mt=u}Vg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Vg(t)}}function Vg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||ju(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Rg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&co(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}mt||e.flags&512&&Tf(e)}catch(f){Fe(e,e.return,f)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Gg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Hg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ju(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Fe(e,s,l)}}var i=e.return;try{Tf(e)}catch(l){Fe(e,i,l)}break;case 5:var o=e.return;try{Tf(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var RR=Math.ceil,Gl=sr.ReactCurrentDispatcher,gm=sr.ReactCurrentOwner,Zt=sr.ReactCurrentBatchConfig,he=0,tt=null,Ge=null,ot=0,_t=0,Ms=Nr(0),qe=0,To=null,us=0,Uu=0,ym=0,Yi=null,Rt=null,vm=0,oi=1/0,Gn=null,Hl=!1,Af=null,br=null,Ea=!1,gr=null,Kl=0,Qi=0,Rf=null,tl=-1,nl=0;function Tt(){return he&6?Be():tl!==-1?tl:tl=Be()}function Ar(t){return t.mode&1?he&2&&ot!==0?ot&-ot:uR.transition!==null?(nl===0&&(nl=Vx()),nl):(t=ve,t!==0||(t=window.event,t=t===void 0?16:Yx(t.type)),t):1}function yn(t,e,n,r){if(50<Qi)throw Qi=0,Rf=null,Error($(185));Vo(t,n,r),(!(he&2)||t!==tt)&&(t===tt&&(!(he&2)&&(Uu|=n),qe===4&&mr(t,ot)),Dt(t,r),n===1&&he===0&&!(e.mode&1)&&(oi=Be()+500,Ou&&_r()))}function Dt(t,e){var n=t.callbackNode;uA(t,e);var r=Cl(t,t===tt?ot:0);if(r===0)n!==null&&Zp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zp(n),e===1)t.tag===0?lR(Kg.bind(null,t)):mS(Kg.bind(null,t)),sR(function(){!(he&6)&&_r()}),n=null;else{switch(Gx(r)){case 1:n=Hh;break;case 4:n=Bx;break;case 16:n=Ll;break;case 536870912:n=$x;break;default:n=Ll}n=fE(n,iE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iE(t,e){if(tl=-1,nl=0,he&6)throw Error($(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var r=Cl(t,t===tt?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wl(t,r);else{e=r;var s=he;he|=2;var i=aE();(tt!==t||ot!==e)&&(Gn=null,oi=Be()+500,Zr(t,e));do try{kR();break}catch(a){oE(t,a)}while(!0);rm(),Gl.current=i,he=s,Ge!==null?e=0:(tt=null,ot=0,e=qe)}if(e!==0){if(e===2&&(s=Jd(t),s!==0&&(r=s,e=Lf(t,s))),e===1)throw n=To,Zr(t,0),mr(t,r),Dt(t,Be()),n;if(e===6)mr(t,r);else{if(s=t.current.alternate,!(r&30)&&!LR(s)&&(e=Wl(t,r),e===2&&(i=Jd(t),i!==0&&(r=i,e=Lf(t,i))),e===1))throw n=To,Zr(t,0),mr(t,r),Dt(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:$r(t,Rt,Gn);break;case 3:if(mr(t,r),(r&130023424)===r&&(e=vm+500-Be(),10<e)){if(Cl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=af($r.bind(null,t,Rt,Gn),e);break}$r(t,Rt,Gn);break;case 4:if(mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RR(r/1960))-r,10<r){t.timeoutHandle=af($r.bind(null,t,Rt,Gn),r);break}$r(t,Rt,Gn);break;case 5:$r(t,Rt,Gn);break;default:throw Error($(329))}}}return Dt(t,Be()),t.callbackNode===n?iE.bind(null,t):null}function Lf(t,e){var n=Yi;return t.current.memoizedState.isDehydrated&&(Zr(t,e).flags|=256),t=Wl(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&Cf(e)),t}function Cf(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function LR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~ym,e&=~Uu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Kg(t){if(he&6)throw Error($(327));Ys();var e=Cl(t,0);if(!(e&1))return Dt(t,Be()),null;var n=Wl(t,e);if(t.tag!==0&&n===2){var r=Jd(t);r!==0&&(e=r,n=Lf(t,r))}if(n===1)throw n=To,Zr(t,0),mr(t,e),Dt(t,Be()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$r(t,Rt,Gn),Dt(t,Be()),null}function xm(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(oi=Be()+500,Ou&&_r())}}function cs(t){gr!==null&&gr.tag===0&&!(he&6)&&Ys();var e=he;he|=1;var n=Zt.transition,r=ve;try{if(Zt.transition=null,ve=1,t)return t()}finally{ve=r,Zt.transition=n,he=e,!(he&6)&&_r()}}function Sm(){_t=Ms.current,Re(Ms)}function Zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rR(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(em(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:si(),Re(kt),Re(yt),um();break;case 5:lm(r);break;case 4:si();break;case 13:Re(De);break;case 19:Re(De);break;case 10:sm(r.type._context);break;case 22:case 23:Sm()}n=n.return}if(tt=t,Ge=t=Rr(t.current,null),ot=_t=e,qe=0,To=null,ym=Uu=us=0,Rt=Yi=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zr=null}return t}function oE(t,e){do{var n=Ge;try{if(rm(),Ja.current=Vl,$l){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$l=!1}if(ls=0,Je=ze=Ne=null,zi=!1,xo=0,gm.current=null,n===null||n.return===null){qe=1,To=e,Ge=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=Pg(o);if(m!==null){m.flags&=-257,Ng(m,o,a,i,e),m.mode&1&&Dg(i,u,e),e=m,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){Dg(i,u,e),Em();break e}l=Error($(426))}}else if(ke&&a.mode&1){var v=Pg(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ng(v,o,a,i,e),tm(ii(l,a));break e}}i=l=ii(l,a),qe!==4&&(qe=2),Yi===null?Yi=[i]:Yi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=GS(i,l,e);Ag(i,y);break e;case 1:a=l;var x=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(br===null||!br.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=HS(i,a,e);Ag(i,w);break e}}i=i.return}while(i!==null)}uE(n)}catch(E){e=E,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function aE(){var t=Gl.current;return Gl.current=Vl,t===null?Vl:t}function Em(){(qe===0||qe===3||qe===2)&&(qe=4),tt===null||!(us&268435455)&&!(Uu&268435455)||mr(tt,ot)}function Wl(t,e){var n=he;he|=2;var r=aE();(tt!==t||ot!==e)&&(Gn=null,Zr(t,e));do try{CR();break}catch(s){oE(t,s)}while(!0);if(rm(),he=n,Gl.current=r,Ge!==null)throw Error($(261));return tt=null,ot=0,qe}function CR(){for(;Ge!==null;)lE(Ge)}function kR(){for(;Ge!==null&&!eA();)lE(Ge)}function lE(t){var e=dE(t.alternate,t,_t);t.memoizedProps=t.pendingProps,e===null?uE(t):Ge=e,gm.current=null}function uE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TR(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Ge=null;return}}else if(n=ER(n,e,_t),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);qe===0&&(qe=5)}function $r(t,e,n){var r=ve,s=Zt.transition;try{Zt.transition=null,ve=1,IR(t,e,n,r)}finally{Zt.transition=s,ve=r}return null}function IR(t,e,n,r){do Ys();while(gr!==null);if(he&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cA(t,i),t===tt&&(Ge=tt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ea||(Ea=!0,fE(Ll,function(){return Ys(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var o=ve;ve=1;var a=he;he|=4,gm.current=null,bR(t,n),rE(n,t),QA(sf),kl=!!rf,sf=rf=null,t.current=n,AR(n),tA(),he=a,ve=o,Zt.transition=i}else t.current=n;if(Ea&&(Ea=!1,gr=t,Kl=s),i=t.pendingLanes,i===0&&(br=null),sA(n.stateNode),Dt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,t=Af,Af=null,t;return Kl&1&&t.tag!==0&&Ys(),i=t.pendingLanes,i&1?t===Rf?Qi++:(Qi=0,Rf=t):Qi=0,_r(),null}function Ys(){if(gr!==null){var t=Gx(Kl),e=Zt.transition,n=ve;try{if(Zt.transition=null,ve=16>t?16:t,gr===null)var r=!1;else{if(t=gr,gr=null,Kl=0,he&6)throw Error($(331));var s=he;for(he|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(q=u;q!==null;){var c=q;switch(c.tag){case 0:case 11:case 15:qi(8,c,i)}var d=c.child;if(d!==null)d.return=c,q=d;else for(;q!==null;){c=q;var f=c.sibling,m=c.return;if(eE(c),c===u){q=null;break}if(f!==null){f.return=m,q=f;break}q=m}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,q=y;break e}q=i.return}}var x=t.current;for(q=x;q!==null;){o=q;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,q=S;else e:for(o=x;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ju(9,a)}}catch(E){Fe(a,a.return,E)}if(a===o){q=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,q=w;break e}q=a.return}}if(he=s,_r(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Iu,t)}catch{}r=!0}return r}finally{ve=n,Zt.transition=e}}return!1}function Wg(t,e,n){e=ii(n,e),e=GS(t,e,1),t=wr(t,e,1),e=Tt(),t!==null&&(Vo(t,1,e),Dt(t,e))}function Fe(t,e,n){if(t.tag===3)Wg(t,t,n);else for(;e!==null;){if(e.tag===3){Wg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=ii(n,t),t=HS(e,t,1),e=wr(e,t,1),t=Tt(),e!==null&&(Vo(e,1,t),Dt(e,t));break}}e=e.return}}function DR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(ot&n)===n&&(qe===4||qe===3&&(ot&130023424)===ot&&500>Be()-vm?Zr(t,0):ym|=n),Dt(t,e)}function cE(t,e){e===0&&(t.mode&1?(e=da,da<<=1,!(da&130023424)&&(da=4194304)):e=1);var n=Tt();t=tr(t,e),t!==null&&(Vo(t,e,n),Dt(t,n))}function PR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cE(t,n)}function NR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),cE(t,n)}var dE;dE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,SR(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,ke&&e.flags&1048576&&pS(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;el(t,e),t=e.pendingProps;var s=ti(e,yt.current);qs(e,n),s=dm(null,e,r,t,s,n);var i=fm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(i=!0,_l(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,om(e),s.updater=Fu,e.stateNode=s,s._reactInternals=e,mf(e,r,t,n),e=yf(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&Zh(e),xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(el(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=OR(r),t=cn(r,t),s){case 0:e=gf(null,e,r,t,n);break e;case 1:e=Mg(null,e,r,t,n);break e;case 11:e=_g(null,e,r,t,n);break e;case 14:e=Og(null,e,r,cn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),gf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Mg(t,e,r,s,n);case 3:e:{if(qS(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ES(t,e),Ul(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ii(Error($(423)),e),e=Fg(t,e,r,n,s);break e}else if(r!==s){s=ii(Error($(424)),e),e=Fg(t,e,r,n,s);break e}else for(Mt=Tr(e.stateNode.containerInfo.firstChild),jt=e,ke=!0,fn=null,n=xS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ni(),r===s){e=nr(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return TS(e),t===null&&df(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,of(r,s)?o=null:i!==null&&of(r,i)&&(e.flags|=32),zS(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&df(e),null;case 13:return YS(t,e,n);case 4:return am(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ri(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),_g(t,e,r,s,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Fl,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!kt.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Qn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ff(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ff(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qs(e,n),s=en(s),r=r(s),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,s=cn(r,e.pendingProps),s=cn(r.type,s),Og(t,e,r,s,n);case 15:return KS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),el(t,e),e.tag=1,It(r)?(t=!0,_l(e)):t=!1,qs(e,n),VS(e,r,s),mf(e,r,s,n),yf(null,e,r,!0,t,n);case 19:return QS(t,e,n);case 22:return WS(t,e,n)}throw Error($(156,e.tag))};function fE(t,e){return Ux(t,e)}function _R(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new _R(t,e,n,r)}function Tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OR(t){if(typeof t=="function")return Tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$h)return 11;if(t===Vh)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Tm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return es(n.children,s,i,e);case Bh:o=8,s|=8;break;case Fd:return t=Jt(12,n,e,s|2),t.elementType=Fd,t.lanes=i,t;case jd:return t=Jt(13,n,e,s),t.elementType=jd,t.lanes=i,t;case Ud:return t=Jt(19,n,e,s),t.elementType=Ud,t.lanes=i,t;case Tx:return Bu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sx:o=10;break e;case Ex:o=9;break e;case $h:o=11;break e;case Vh:o=14;break e;case ur:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function es(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function Bu(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=Tx,t.lanes=n,t.stateNode={isHidden:!1},t}function jc(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function Uc(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wm(t,e,n,r,s,i,o,a,l){return t=new MR(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},om(i),t}function FR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hE(t){if(!t)return kr;t=t._reactInternals;e:{if(ms(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(It(n))return hS(t,n,e)}return e}function mE(t,e,n,r,s,i,o,a,l){return t=wm(n,r,!0,t,s,i,o,a,l),t.context=hE(null),n=t.current,r=Tt(),s=Ar(n),i=Qn(r,s),i.callback=e??null,wr(n,i,s),t.current.lanes=s,Vo(t,s,r),Dt(t,r),t}function $u(t,e,n,r){var s=e.current,i=Tt(),o=Ar(s);return n=hE(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wr(s,e,o),t!==null&&(yn(t,s,o,i),Xa(t,s,o)),o}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bm(t,e){zg(t,e),(t=t.alternate)&&zg(t,e)}function jR(){return null}var pE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Am(t){this._internalRoot=t}Vu.prototype.render=Am.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));$u(t,e,null,null)};Vu.prototype.unmount=Am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){$u(null,t,null,null)}),e[er]=null}};function Vu(t){this._internalRoot=t}Vu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&qx(t)}};function Rm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qg(){}function UR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=zl(o);i.call(u)}}var o=mE(e,r,t,0,null,!1,!1,"",qg);return t._reactRootContainer=o,t[er]=o.current,mo(t.nodeType===8?t.parentNode:t),cs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=zl(l);a.call(u)}}var l=wm(t,0,!1,null,null,!1,!1,"",qg);return t._reactRootContainer=l,t[er]=l.current,mo(t.nodeType===8?t.parentNode:t),cs(function(){$u(e,l,n,r)}),l}function Hu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=zl(o);a.call(l)}}$u(e,o,t,s)}else o=UR(n,e,t,s,r);return zl(o)}Hx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fi(e.pendingLanes);n!==0&&(Kh(e,n|1),Dt(e,Be()),!(he&6)&&(oi=Be()+500,_r()))}break;case 13:cs(function(){var r=tr(t,1);if(r!==null){var s=Tt();yn(r,t,1,s)}}),bm(t,1)}};Wh=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Tt();yn(e,t,134217728,n)}bm(t,134217728)}};Kx=function(t){if(t.tag===13){var e=Ar(t),n=tr(t,e);if(n!==null){var r=Tt();yn(n,t,e,r)}bm(t,e)}};Wx=function(){return ve};zx=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Yd=function(t,e,n){switch(e){case"input":if(Vd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_u(r);if(!s)throw Error($(90));bx(r),Vd(r,s)}}}break;case"textarea":Rx(t,n);break;case"select":e=n.value,e!=null&&Hs(t,!!n.multiple,e,!1)}};Nx=xm;_x=cs;var BR={usingClientEntryPoint:!1,Events:[Ho,Is,_u,Dx,Px,xm]},ki={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$R={bundleType:ki.bundleType,version:ki.version,rendererPackageName:ki.rendererPackageName,rendererConfig:ki.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fx(t),t===null?null:t.stateNode},findFiberByHostInstance:ki.findFiberByHostInstance||jR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{Iu=Ta.inject($R),Dn=Ta}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BR;Vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rm(e))throw Error($(200));return FR(t,e,null,n)};Vt.createRoot=function(t,e){if(!Rm(t))throw Error($(299));var n=!1,r="",s=pE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wm(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,mo(t.nodeType===8?t.parentNode:t),new Am(e)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Fx(e),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return cs(t)};Vt.hydrate=function(t,e,n){if(!Gu(e))throw Error($(200));return Hu(null,t,e,!0,n)};Vt.hydrateRoot=function(t,e,n){if(!Rm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=pE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mE(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,mo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vu(e)};Vt.render=function(t,e,n){if(!Gu(e))throw Error($(200));return Hu(null,t,e,!1,n)};Vt.unmountComponentAtNode=function(t){if(!Gu(t))throw Error($(40));return t._reactRootContainer?(cs(function(){Hu(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Vt.unstable_batchedUpdates=xm;Vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Hu(t,e,n,!1,r)};Vt.version="18.3.1-next-f1338f8080-20240426";function gE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gE)}catch(t){console.error(t)}}gE(),gx.exports=Vt;var yE=gx.exports;const VR=Bo(yE);var Yg=yE;Od.createRoot=Yg.createRoot,Od.hydrateRoot=Yg.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wo.apply(this,arguments)}var yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yr||(yr={}));const Qg="popstate";function GR(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return kf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ql(s)}return KR(e,n,null,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HR(){return Math.random().toString(36).substr(2,8)}function Xg(t,e){return{usr:t.state,key:t.key,idx:e}}function kf(t,e,n,r){return n===void 0&&(n=null),wo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gi(e):e,{state:n,key:e&&e.key||r||HR()})}function ql(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function KR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=yr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(wo({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=yr.Pop;let v=c(),y=v==null?null:v-u;u=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=yr.Push;let x=kf(g.location,v,y);u=c()+1;let S=Xg(x,u),w=g.createHref(x);try{o.pushState(S,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(w)}i&&l&&l({action:a,location:g.location,delta:1})}function m(v,y){a=yr.Replace;let x=kf(g.location,v,y);u=c();let S=Xg(x,u),w=g.createHref(x);o.replaceState(S,"",w),i&&l&&l({action:a,location:g.location,delta:0})}function p(v){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:ql(v);return x=x.replace(/ $/,"%20"),He(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let g={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Qg,d),l=v,()=>{s.removeEventListener(Qg,d),l=null}},createHref(v){return e(s,v)},createURL:p,encodeLocation(v){let y=p(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(v){return o.go(v)}};return g}var Jg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jg||(Jg={}));function WR(t,e,n){return n===void 0&&(n="/"),zR(t,e,n,!1)}function zR(t,e,n,r){let s=typeof e=="string"?gi(e):e,i=Lm(s.pathname||"/",n);if(i==null)return null;let o=xE(t);qR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=iL(i);a=rL(o[l],u,r)}return a}function xE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(He(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Lr([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(He(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xE(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:tL(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of SE(i.path))s(i,o,l)}),e}function SE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=SE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function qR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YR=/^:[\w-]+$/,QR=3,XR=2,JR=1,ZR=10,eL=-2,Zg=t=>t==="*";function tL(t,e){let n=t.split("/"),r=n.length;return n.some(Zg)&&(r+=eL),e&&(r+=XR),n.filter(s=>!Zg(s)).reduce((s,i)=>s+(YR.test(i)?QR:i===""?JR:ZR),r)}function nL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function rL(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=e0({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=e0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Lr([i,d.pathname]),pathnameBase:uL(Lr([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Lr([i,d.pathnameBase]))}return o}function e0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=sL(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:m}=c;if(f==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function sL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function iL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Lm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function oL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?gi(t):t;return{pathname:n?n.startsWith("/")?n:aL(n,e):e,search:cL(r),hash:dL(s)}}function aL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Bc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function EE(t,e){let n=lL(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function TE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=gi(t):(s=wo({},t),He(!s.pathname||!s.pathname.includes("?"),Bc("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),Bc("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),Bc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=oL(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Lr=t=>t.join("/").replace(/\/\/+/g,"/"),uL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wE=["post","put","patch","delete"];new Set(wE);const hL=["get",...wE];new Set(hL);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bo.apply(this,arguments)}const Cm=A.createContext(null),mL=A.createContext(null),ps=A.createContext(null),Ku=A.createContext(null),Or=A.createContext({outlet:null,matches:[],isDataRoute:!1}),bE=A.createContext(null);function pL(t,e){let{relative:n}=e===void 0?{}:e;Wo()||He(!1);let{basename:r,navigator:s}=A.useContext(ps),{hash:i,pathname:o,search:a}=RE(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Lr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Wo(){return A.useContext(Ku)!=null}function Nt(){return Wo()||He(!1),A.useContext(Ku).location}function AE(t){A.useContext(ps).static||A.useLayoutEffect(t)}function $e(){let{isDataRoute:t}=A.useContext(Or);return t?CL():gL()}function gL(){Wo()||He(!1);let t=A.useContext(Cm),{basename:e,future:n,navigator:r}=A.useContext(ps),{matches:s}=A.useContext(Or),{pathname:i}=Nt(),o=JSON.stringify(EE(s,n.v7_relativeSplatPath)),a=A.useRef(!1);return AE(()=>{a.current=!0}),A.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=TE(u,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Lr([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,i,t])}function gs(){let{matches:t}=A.useContext(Or),e=t[t.length-1];return e?e.params:{}}function RE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(ps),{matches:s}=A.useContext(Or),{pathname:i}=Nt(),o=JSON.stringify(EE(s,r.v7_relativeSplatPath));return A.useMemo(()=>TE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function yL(t,e){return vL(t,e)}function vL(t,e,n,r){Wo()||He(!1);let{navigator:s,static:i}=A.useContext(ps),{matches:o}=A.useContext(Or),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Nt(),d;if(e){var f;let y=typeof e=="string"?gi(e):e;u==="/"||(f=y.pathname)!=null&&f.startsWith(u)||He(!1),d=y}else d=c;let m=d.pathname||"/",p=m;if(u!=="/"){let y=u.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=!i&&n&&n.matches&&n.matches.length>0?n.matches:WR(t,{pathname:p}),v=wL(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Lr([u,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Lr([u,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return e&&v?A.createElement(Ku.Provider,{value:{location:bo({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:yr.Pop}},v):v}function xL(){let t=LL(),e=fL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const SL=A.createElement(xL,null);class EL extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Or.Provider,{value:this.props.routeContext},A.createElement(bE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TL(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(Cm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Or.Provider,{value:e},r)}function wL(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||He(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:m}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let m,p=!1,g=null,v=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||SL,l&&(u<0&&f===0?(p=!0,v=null):u===f&&(p=!0,v=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),x=()=>{let S;return m?S=g:p?S=v:d.route.Component?S=A.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=c,A.createElement(TL,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?A.createElement(EL,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var LE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(LE||{}),Yl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Yl||{});function bL(t){let e=A.useContext(Cm);return e||He(!1),e}function AL(t){let e=A.useContext(mL);return e||He(!1),e}function RL(t){let e=A.useContext(Or);return e||He(!1),e}function CE(t){let e=RL(),n=e.matches[e.matches.length-1];return n.route.id||He(!1),n.route.id}function LL(){var t;let e=A.useContext(bE),n=AL(Yl.UseRouteError),r=CE(Yl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function CL(){let{router:t}=bL(LE.UseNavigateStable),e=CE(Yl.UseNavigateStable),n=A.useRef(!1);return AE(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bo({fromRouteId:e},i)))},[t,e])}function kL(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Oe(t){He(!1)}function IL(t){let{basename:e="/",children:n=null,location:r,navigationType:s=yr.Pop,navigator:i,static:o=!1,future:a}=t;Wo()&&He(!1);let l=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:i,static:o,future:bo({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=gi(r));let{pathname:c="/",search:d="",hash:f="",state:m=null,key:p="default"}=r,g=A.useMemo(()=>{let v=Lm(c,l);return v==null?null:{location:{pathname:v,search:d,hash:f,state:m,key:p},navigationType:s}},[l,c,d,f,m,p,s]);return g==null?null:A.createElement(ps.Provider,{value:u},A.createElement(Ku.Provider,{children:n,value:g}))}function DL(t){let{children:e,location:n}=t;return yL(If(e),n)}new Promise(()=>{});function If(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,If(r.props.children,i));return}r.type!==Oe&&He(!1),!r.props.index||!r.props.children||He(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=If(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Df(){return Df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Df.apply(this,arguments)}function PL(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function NL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _L(t,e){return t.button===0&&(!e||e==="_self")&&!NL(t)}function Pf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function OL(t,e){let n=Pf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const ML=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FL="6";try{window.__reactRouterVersion=FL}catch{}const jL="startTransition",t0=Db[jL];function UL(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=GR({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=A.useCallback(d=>{u&&t0?t0(()=>l(d)):l(d)},[l,u]);return A.useLayoutEffect(()=>o.listen(c),[o,c]),A.useEffect(()=>kL(r),[r]),A.createElement(IL,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const BL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$L=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ze=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,f=PL(e,ML),{basename:m}=A.useContext(ps),p,g=!1;if(typeof u=="string"&&$L.test(u)&&(p=u,BL))try{let S=new URL(window.location.href),w=u.startsWith("//")?new URL(S.protocol+u):new URL(u),E=Lm(w.pathname,m);w.origin===S.origin&&E!=null?u=E+w.search+w.hash:g=!0}catch{}let v=pL(u,{relative:s}),y=VL(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:d});function x(S){r&&r(S),S.defaultPrevented||y(S)}return A.createElement("a",Df({},f,{href:p||v,onClick:g||i?r:x,ref:n,target:l}))});var n0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(n0||(n0={}));var r0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(r0||(r0={}));function VL(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=$e(),u=Nt(),c=RE(t,{relative:o});return A.useCallback(d=>{if(_L(d,n)){d.preventDefault();let f=r!==void 0?r:ql(u)===ql(c);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,c,r,s,n,t,i,o,a])}function km(t){let e=A.useRef(Pf(t)),n=A.useRef(!1),r=Nt(),s=A.useMemo(()=>OL(r.search,n.current?null:e.current),[r.search]),i=$e(),o=A.useCallback((a,l)=>{const u=Pf(typeof a=="function"?a(s):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}function Nf(t,e){return Nf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Nf(t,e)}function zo(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Nf(t,e)}var qo=function(){function t(){this.listeners=[]}var e=t.prototype;return e.subscribe=function(r){var s=this,i=r||function(){};return this.listeners.push(i),this.onSubscribe(),function(){s.listeners=s.listeners.filter(function(o){return o!==i}),s.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},t}();function me(){return me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},me.apply(null,arguments)}var Ql=typeof window>"u";function ft(){}function GL(t,e){return typeof t=="function"?t(e):t}function _f(t){return typeof t=="number"&&t>=0&&t!==1/0}function Xl(t){return Array.isArray(t)?t:[t]}function kE(t,e){return Math.max(t+(e||0)-Date.now(),0)}function sl(t,e,n){return Wu(t)?typeof e=="function"?me({},n,{queryKey:t,queryFn:e}):me({},e,{queryKey:t}):t}function dr(t,e,n){return Wu(t)?[me({},e,{queryKey:t}),n]:[t||{},e]}function HL(t,e){if(t===!0&&e===!0||t==null&&e==null)return"all";if(t===!1&&e===!1)return"none";var n=t??!e;return n?"active":"inactive"}function s0(t,e){var n=t.active,r=t.exact,s=t.fetching,i=t.inactive,o=t.predicate,a=t.queryKey,l=t.stale;if(Wu(a)){if(r){if(e.queryHash!==Im(a,e.options))return!1}else if(!Jl(e.queryKey,a))return!1}var u=HL(n,i);if(u==="none")return!1;if(u!=="all"){var c=e.isActive();if(u==="active"&&!c||u==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof s=="boolean"&&e.isFetching()!==s||o&&!o(e))}function i0(t,e){var n=t.exact,r=t.fetching,s=t.predicate,i=t.mutationKey;if(Wu(i)){if(!e.options.mutationKey)return!1;if(n){if(Yr(e.options.mutationKey)!==Yr(i))return!1}else if(!Jl(e.options.mutationKey,i))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||s&&!s(e))}function Im(t,e){var n=(e==null?void 0:e.queryKeyHashFn)||Yr;return n(t)}function Yr(t){var e=Xl(t);return KL(e)}function KL(t){return JSON.stringify(t,function(e,n){return Of(n)?Object.keys(n).sort().reduce(function(r,s){return r[s]=n[s],r},{}):n})}function Jl(t,e){return IE(Xl(t),Xl(e))}function IE(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(function(n){return!IE(t[n],e[n])}):!1}function Zl(t,e){if(t===e)return t;var n=Array.isArray(t)&&Array.isArray(e);if(n||Of(t)&&Of(e)){for(var r=n?t.length:Object.keys(t).length,s=n?e:Object.keys(e),i=s.length,o=n?[]:{},a=0,l=0;l<i;l++){var u=n?l:s[l];o[u]=Zl(t[u],e[u]),o[u]===t[u]&&a++}return r===i&&a===r?t:o}return e}function WL(t,e){if(t&&!e||e&&!t)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}function Of(t){if(!o0(t))return!1;var e=t.constructor;if(typeof e>"u")return!0;var n=e.prototype;return!(!o0(n)||!n.hasOwnProperty("isPrototypeOf"))}function o0(t){return Object.prototype.toString.call(t)==="[object Object]"}function Wu(t){return typeof t=="string"||Array.isArray(t)}function zL(t){return new Promise(function(e){setTimeout(e,t)})}function a0(t){Promise.resolve().then(t).catch(function(e){return setTimeout(function(){throw e})})}function DE(){if(typeof AbortController=="function")return new AbortController}var qL=function(t){zo(e,t);function e(){var r;return r=t.call(this)||this,r.setup=function(s){var i;if(!Ql&&((i=window)!=null&&i.addEventListener)){var o=function(){return s()};return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}},r}var n=e.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},n.setEventListener=function(s){var i,o=this;this.setup=s,(i=this.cleanup)==null||i.call(this),this.cleanup=s(function(a){typeof a=="boolean"?o.setFocused(a):o.onFocus()})},n.setFocused=function(s){this.focused=s,s&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(s){s()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(qo),Xi=new qL,YL=function(t){zo(e,t);function e(){var r;return r=t.call(this)||this,r.setup=function(s){var i;if(!Ql&&((i=window)!=null&&i.addEventListener)){var o=function(){return s()};return window.addEventListener("online",o,!1),window.addEventListener("offline",o,!1),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}}},r}var n=e.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},n.setEventListener=function(s){var i,o=this;this.setup=s,(i=this.cleanup)==null||i.call(this),this.cleanup=s(function(a){typeof a=="boolean"?o.setOnline(a):o.onOnline()})},n.setOnline=function(s){this.online=s,s&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(s){s()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(qo),il=new YL;function QL(t){return Math.min(1e3*Math.pow(2,t),3e4)}function eu(t){return typeof(t==null?void 0:t.cancel)=="function"}var PE=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function ol(t){return t instanceof PE}var NE=function(e){var n=this,r=!1,s,i,o,a;this.abort=e.abort,this.cancel=function(f){return s==null?void 0:s(f)},this.cancelRetry=function(){r=!0},this.continueRetry=function(){r=!1},this.continue=function(){return i==null?void 0:i()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(f,m){o=f,a=m});var l=function(m){n.isResolved||(n.isResolved=!0,e.onSuccess==null||e.onSuccess(m),i==null||i(),o(m))},u=function(m){n.isResolved||(n.isResolved=!0,e.onError==null||e.onError(m),i==null||i(),a(m))},c=function(){return new Promise(function(m){i=m,n.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){i=void 0,n.isPaused=!1,e.onContinue==null||e.onContinue()})},d=function f(){if(!n.isResolved){var m;try{m=e.fn()}catch(p){m=Promise.reject(p)}s=function(g){if(!n.isResolved&&(u(new PE(g)),n.abort==null||n.abort(),eu(m)))try{m.cancel()}catch{}},n.isTransportCancelable=eu(m),Promise.resolve(m).then(l).catch(function(p){var g,v;if(!n.isResolved){var y=(g=e.retry)!=null?g:3,x=(v=e.retryDelay)!=null?v:QL,S=typeof x=="function"?x(n.failureCount,p):x,w=y===!0||typeof y=="number"&&n.failureCount<y||typeof y=="function"&&y(n.failureCount,p);if(r||!w){u(p);return}n.failureCount++,e.onFail==null||e.onFail(n.failureCount,p),zL(S).then(function(){if(!Xi.isFocused()||!il.isOnline())return c()}).then(function(){r?u(p):f()})}})}};d()},XL=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var e=t.prototype;return e.batch=function(r){var s;this.transactions++;try{s=r()}finally{this.transactions--,this.transactions||this.flush()}return s},e.schedule=function(r){var s=this;this.transactions?this.queue.push(r):a0(function(){s.notifyFn(r)})},e.batchCalls=function(r){var s=this;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];s.schedule(function(){r.apply(void 0,o)})}},e.flush=function(){var r=this,s=this.queue;this.queue=[],s.length&&a0(function(){r.batchNotifyFn(function(){s.forEach(function(i){r.notifyFn(i)})})})},e.setNotifyFunction=function(r){this.notifyFn=r},e.setBatchNotifyFunction=function(r){this.batchNotifyFn=r},t}(),je=new XL,_E=console;function tu(){return _E}function JL(t){_E=t}var ZL=function(){function t(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var e=t.prototype;return e.setOptions=function(r){var s;this.options=me({},this.defaultOptions,r),this.meta=r==null?void 0:r.meta,this.cacheTime=Math.max(this.cacheTime||0,(s=this.options.cacheTime)!=null?s:5*60*1e3)},e.setDefaultOptions=function(r){this.defaultOptions=r},e.scheduleGc=function(){var r=this;this.clearGcTimeout(),_f(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){r.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(r,s){var i,o,a=this.state.data,l=GL(r,a);return(i=(o=this.options).isDataEqual)!=null&&i.call(o,a,l)?l=a:this.options.structuralSharing!==!1&&(l=Zl(a,l)),this.dispatch({data:l,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt}),l},e.setState=function(r,s){this.dispatch({type:"setState",state:r,setStateOptions:s})},e.cancel=function(r){var s,i=this.promise;return(s=this.retryer)==null||s.cancel(r),i?i.then(ft).catch(ft):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(r){return r.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(r){return r.getCurrentResult().isStale})},e.isStaleByTime=function(r){return r===void 0&&(r=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!kE(this.state.dataUpdatedAt,r)},e.onFocus=function(){var r,s=this.observers.find(function(i){return i.shouldFetchOnWindowFocus()});s&&s.refetch(),(r=this.retryer)==null||r.continue()},e.onOnline=function(){var r,s=this.observers.find(function(i){return i.shouldFetchOnReconnect()});s&&s.refetch(),(r=this.retryer)==null||r.continue()},e.addObserver=function(r){this.observers.indexOf(r)===-1&&(this.observers.push(r),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:r}))},e.removeObserver=function(r){this.observers.indexOf(r)!==-1&&(this.observers=this.observers.filter(function(s){return s!==r}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:r}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(r,s){var i=this,o,a,l;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var u;return(u=this.retryer)==null||u.continueRetry(),this.promise}}if(r&&this.setOptions(r),!this.options.queryFn){var c=this.observers.find(function(x){return x.options.queryFn});c&&this.setOptions(c.options)}var d=Xl(this.queryKey),f=DE(),m={queryKey:d,pageParam:void 0,meta:this.meta};Object.defineProperty(m,"signal",{enumerable:!0,get:function(){if(f)return i.abortSignalConsumed=!0,f.signal}});var p=function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(m)):Promise.reject("Missing queryFn")},g={fetchOptions:s,options:this.options,queryKey:d,state:this.state,fetchFn:p,meta:this.meta};if((o=this.options.behavior)!=null&&o.onFetch){var v;(v=this.options.behavior)==null||v.onFetch(g)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((a=g.fetchOptions)==null?void 0:a.meta)){var y;this.dispatch({type:"fetch",meta:(y=g.fetchOptions)==null?void 0:y.meta})}return this.retryer=new NE({fn:g.fetchFn,abort:f==null||(l=f.abort)==null?void 0:l.bind(f),onSuccess:function(S){i.setData(S),i.cache.config.onSuccess==null||i.cache.config.onSuccess(S,i),i.cacheTime===0&&i.optionalRemove()},onError:function(S){ol(S)&&S.silent||i.dispatch({type:"error",error:S}),ol(S)||(i.cache.config.onError==null||i.cache.config.onError(S,i),tu().error(S)),i.cacheTime===0&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(r){var s=this;this.state=this.reducer(this.state,r),je.batch(function(){s.observers.forEach(function(i){i.onQueryUpdate(r)}),s.cache.notify({query:s,type:"queryUpdated",action:r})})},e.getDefaultState=function(r){var s=typeof r.initialData=="function"?r.initialData():r.initialData,i=typeof r.initialData<"u",o=i?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0,a=typeof s<"u";return{data:s,dataUpdateCount:0,dataUpdatedAt:a?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:a?"success":"idle"}},e.reducer=function(r,s){var i,o;switch(s.type){case"failed":return me({},r,{fetchFailureCount:r.fetchFailureCount+1});case"pause":return me({},r,{isPaused:!0});case"continue":return me({},r,{isPaused:!1});case"fetch":return me({},r,{fetchFailureCount:0,fetchMeta:(i=s.meta)!=null?i:null,isFetching:!0,isPaused:!1},!r.dataUpdatedAt&&{error:null,status:"loading"});case"success":return me({},r,{data:s.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(o=s.dataUpdatedAt)!=null?o:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=s.error;return ol(a)&&a.revert&&this.revertState?me({},this.revertState):me({},r,{error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return me({},r,{isInvalidated:!0});case"setState":return me({},r,s.state);default:return r}},t}(),eC=function(t){zo(e,t);function e(r){var s;return s=t.call(this)||this,s.config=r||{},s.queries=[],s.queriesMap={},s}var n=e.prototype;return n.build=function(s,i,o){var a,l=i.queryKey,u=(a=i.queryHash)!=null?a:Im(l,i),c=this.get(u);return c||(c=new ZL({cache:this,queryKey:l,queryHash:u,options:s.defaultQueryOptions(i),state:o,defaultOptions:s.getQueryDefaults(l),meta:i.meta}),this.add(c)),c},n.add=function(s){this.queriesMap[s.queryHash]||(this.queriesMap[s.queryHash]=s,this.queries.push(s),this.notify({type:"queryAdded",query:s}))},n.remove=function(s){var i=this.queriesMap[s.queryHash];i&&(s.destroy(),this.queries=this.queries.filter(function(o){return o!==s}),i===s&&delete this.queriesMap[s.queryHash],this.notify({type:"queryRemoved",query:s}))},n.clear=function(){var s=this;je.batch(function(){s.queries.forEach(function(i){s.remove(i)})})},n.get=function(s){return this.queriesMap[s]},n.getAll=function(){return this.queries},n.find=function(s,i){var o=dr(s,i),a=o[0];return typeof a.exact>"u"&&(a.exact=!0),this.queries.find(function(l){return s0(a,l)})},n.findAll=function(s,i){var o=dr(s,i),a=o[0];return Object.keys(a).length>0?this.queries.filter(function(l){return s0(a,l)}):this.queries},n.notify=function(s){var i=this;je.batch(function(){i.listeners.forEach(function(o){o(s)})})},n.onFocus=function(){var s=this;je.batch(function(){s.queries.forEach(function(i){i.onFocus()})})},n.onOnline=function(){var s=this;je.batch(function(){s.queries.forEach(function(i){i.onOnline()})})},e}(qo),tC=function(){function t(n){this.options=me({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||nC(),this.meta=n.meta}var e=t.prototype;return e.setState=function(r){this.dispatch({type:"setState",state:r})},e.addObserver=function(r){this.observers.indexOf(r)===-1&&this.observers.push(r)},e.removeObserver=function(r){this.observers=this.observers.filter(function(s){return s!==r})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(ft).catch(ft)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var r=this,s,i=this.state.status==="loading",o=Promise.resolve();return i||(this.dispatch({type:"loading",variables:this.options.variables}),o=o.then(function(){r.mutationCache.config.onMutate==null||r.mutationCache.config.onMutate(r.state.variables,r)}).then(function(){return r.options.onMutate==null?void 0:r.options.onMutate(r.state.variables)}).then(function(a){a!==r.state.context&&r.dispatch({type:"loading",context:a,variables:r.state.variables})})),o.then(function(){return r.executeMutation()}).then(function(a){s=a,r.mutationCache.config.onSuccess==null||r.mutationCache.config.onSuccess(s,r.state.variables,r.state.context,r)}).then(function(){return r.options.onSuccess==null?void 0:r.options.onSuccess(s,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(s,null,r.state.variables,r.state.context)}).then(function(){return r.dispatch({type:"success",data:s}),s}).catch(function(a){return r.mutationCache.config.onError==null||r.mutationCache.config.onError(a,r.state.variables,r.state.context,r),tu().error(a),Promise.resolve().then(function(){return r.options.onError==null?void 0:r.options.onError(a,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(void 0,a,r.state.variables,r.state.context)}).then(function(){throw r.dispatch({type:"error",error:a}),a})})},e.executeMutation=function(){var r=this,s;return this.retryer=new NE({fn:function(){return r.options.mutationFn?r.options.mutationFn(r.state.variables):Promise.reject("No mutationFn found")},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:(s=this.options.retry)!=null?s:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(r){var s=this;this.state=rC(this.state,r),je.batch(function(){s.observers.forEach(function(i){i.onMutationUpdate(r)}),s.mutationCache.notify(s)})},t}();function nC(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function rC(t,e){switch(e.type){case"failed":return me({},t,{failureCount:t.failureCount+1});case"pause":return me({},t,{isPaused:!0});case"continue":return me({},t,{isPaused:!1});case"loading":return me({},t,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return me({},t,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return me({},t,{data:void 0,error:e.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return me({},t,e.state);default:return t}}var sC=function(t){zo(e,t);function e(r){var s;return s=t.call(this)||this,s.config=r||{},s.mutations=[],s.mutationId=0,s}var n=e.prototype;return n.build=function(s,i,o){var a=new tC({mutationCache:this,mutationId:++this.mutationId,options:s.defaultMutationOptions(i),state:o,defaultOptions:i.mutationKey?s.getMutationDefaults(i.mutationKey):void 0,meta:i.meta});return this.add(a),a},n.add=function(s){this.mutations.push(s),this.notify(s)},n.remove=function(s){this.mutations=this.mutations.filter(function(i){return i!==s}),s.cancel(),this.notify(s)},n.clear=function(){var s=this;je.batch(function(){s.mutations.forEach(function(i){s.remove(i)})})},n.getAll=function(){return this.mutations},n.find=function(s){return typeof s.exact>"u"&&(s.exact=!0),this.mutations.find(function(i){return i0(s,i)})},n.findAll=function(s){return this.mutations.filter(function(i){return i0(s,i)})},n.notify=function(s){var i=this;je.batch(function(){i.listeners.forEach(function(o){o(s)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var s=this.mutations.filter(function(i){return i.state.isPaused});return je.batch(function(){return s.reduce(function(i,o){return i.then(function(){return o.continue().catch(ft)})},Promise.resolve())})},e}(qo);function iC(){return{onFetch:function(e){e.fetchFn=function(){var n,r,s,i,o,a,l=(n=e.fetchOptions)==null||(r=n.meta)==null?void 0:r.refetchPage,u=(s=e.fetchOptions)==null||(i=s.meta)==null?void 0:i.fetchMore,c=u==null?void 0:u.pageParam,d=(u==null?void 0:u.direction)==="forward",f=(u==null?void 0:u.direction)==="backward",m=((o=e.state.data)==null?void 0:o.pages)||[],p=((a=e.state.data)==null?void 0:a.pageParams)||[],g=DE(),v=g==null?void 0:g.signal,y=p,x=!1,S=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},w=function(H,W,V,K){return y=K?[W].concat(y):[].concat(y,[W]),K?[V].concat(H):[].concat(H,[V])},E=function(H,W,V,K){if(x)return Promise.reject("Cancelled");if(typeof V>"u"&&!W&&H.length)return Promise.resolve(H);var F={queryKey:e.queryKey,signal:v,pageParam:V,meta:e.meta},M=S(F),O=Promise.resolve(M).then(function(G){return w(H,V,G,K)});if(eu(M)){var z=O;z.cancel=M.cancel}return O},b;if(!m.length)b=E([]);else if(d){var L=typeof c<"u",R=L?c:l0(e.options,m);b=E(m,L,R)}else if(f){var I=typeof c<"u",C=I?c:oC(e.options,m);b=E(m,I,C,!0)}else(function(){y=[];var B=typeof e.options.getNextPageParam>"u",H=l&&m[0]?l(m[0],0,m):!0;b=H?E([],B,p[0]):Promise.resolve(w([],p[0],m[0]));for(var W=function(F){b=b.then(function(M){var O=l&&m[F]?l(m[F],F,m):!0;if(O){var z=B?p[F]:l0(e.options,M);return E(M,B,z)}return Promise.resolve(w(M,p[F],m[F]))})},V=1;V<m.length;V++)W(V)})();var k=b.then(function(B){return{pages:B,pageParams:y}}),U=k;return U.cancel=function(){x=!0,g==null||g.abort(),eu(b)&&b.cancel()},k}}}}function l0(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function oC(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}var aC=function(){function t(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new eC,this.mutationCache=n.mutationCache||new sC,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=t.prototype;return e.mount=function(){var r=this;this.unsubscribeFocus=Xi.subscribe(function(){Xi.isFocused()&&il.isOnline()&&(r.mutationCache.onFocus(),r.queryCache.onFocus())}),this.unsubscribeOnline=il.subscribe(function(){Xi.isFocused()&&il.isOnline()&&(r.mutationCache.onOnline(),r.queryCache.onOnline())})},e.unmount=function(){var r,s;(r=this.unsubscribeFocus)==null||r.call(this),(s=this.unsubscribeOnline)==null||s.call(this)},e.isFetching=function(r,s){var i=dr(r,s),o=i[0];return o.fetching=!0,this.queryCache.findAll(o).length},e.isMutating=function(r){return this.mutationCache.findAll(me({},r,{fetching:!0})).length},e.getQueryData=function(r,s){var i;return(i=this.queryCache.find(r,s))==null?void 0:i.state.data},e.getQueriesData=function(r){return this.getQueryCache().findAll(r).map(function(s){var i=s.queryKey,o=s.state,a=o.data;return[i,a]})},e.setQueryData=function(r,s,i){var o=sl(r),a=this.defaultQueryOptions(o);return this.queryCache.build(this,a).setData(s,i)},e.setQueriesData=function(r,s,i){var o=this;return je.batch(function(){return o.getQueryCache().findAll(r).map(function(a){var l=a.queryKey;return[l,o.setQueryData(l,s,i)]})})},e.getQueryState=function(r,s){var i;return(i=this.queryCache.find(r,s))==null?void 0:i.state},e.removeQueries=function(r,s){var i=dr(r,s),o=i[0],a=this.queryCache;je.batch(function(){a.findAll(o).forEach(function(l){a.remove(l)})})},e.resetQueries=function(r,s,i){var o=this,a=dr(r,s,i),l=a[0],u=a[1],c=this.queryCache,d=me({},l,{active:!0});return je.batch(function(){return c.findAll(l).forEach(function(f){f.reset()}),o.refetchQueries(d,u)})},e.cancelQueries=function(r,s,i){var o=this,a=dr(r,s,i),l=a[0],u=a[1],c=u===void 0?{}:u;typeof c.revert>"u"&&(c.revert=!0);var d=je.batch(function(){return o.queryCache.findAll(l).map(function(f){return f.cancel(c)})});return Promise.all(d).then(ft).catch(ft)},e.invalidateQueries=function(r,s,i){var o,a,l,u=this,c=dr(r,s,i),d=c[0],f=c[1],m=me({},d,{active:(o=(a=d.refetchActive)!=null?a:d.active)!=null?o:!0,inactive:(l=d.refetchInactive)!=null?l:!1});return je.batch(function(){return u.queryCache.findAll(d).forEach(function(p){p.invalidate()}),u.refetchQueries(m,f)})},e.refetchQueries=function(r,s,i){var o=this,a=dr(r,s,i),l=a[0],u=a[1],c=je.batch(function(){return o.queryCache.findAll(l).map(function(f){return f.fetch(void 0,me({},u,{meta:{refetchPage:l==null?void 0:l.refetchPage}}))})}),d=Promise.all(c).then(ft);return u!=null&&u.throwOnError||(d=d.catch(ft)),d},e.fetchQuery=function(r,s,i){var o=sl(r,s,i),a=this.defaultQueryOptions(o);typeof a.retry>"u"&&(a.retry=!1);var l=this.queryCache.build(this,a);return l.isStaleByTime(a.staleTime)?l.fetch(a):Promise.resolve(l.state.data)},e.prefetchQuery=function(r,s,i){return this.fetchQuery(r,s,i).then(ft).catch(ft)},e.fetchInfiniteQuery=function(r,s,i){var o=sl(r,s,i);return o.behavior=iC(),this.fetchQuery(o)},e.prefetchInfiniteQuery=function(r,s,i){return this.fetchInfiniteQuery(r,s,i).then(ft).catch(ft)},e.cancelMutations=function(){var r=this,s=je.batch(function(){return r.mutationCache.getAll().map(function(i){return i.cancel()})});return Promise.all(s).then(ft).catch(ft)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(r){return this.mutationCache.build(this,r).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(r){this.defaultOptions=r},e.setQueryDefaults=function(r,s){var i=this.queryDefaults.find(function(o){return Yr(r)===Yr(o.queryKey)});i?i.defaultOptions=s:this.queryDefaults.push({queryKey:r,defaultOptions:s})},e.getQueryDefaults=function(r){var s;return r?(s=this.queryDefaults.find(function(i){return Jl(r,i.queryKey)}))==null?void 0:s.defaultOptions:void 0},e.setMutationDefaults=function(r,s){var i=this.mutationDefaults.find(function(o){return Yr(r)===Yr(o.mutationKey)});i?i.defaultOptions=s:this.mutationDefaults.push({mutationKey:r,defaultOptions:s})},e.getMutationDefaults=function(r){var s;return r?(s=this.mutationDefaults.find(function(i){return Jl(r,i.mutationKey)}))==null?void 0:s.defaultOptions:void 0},e.defaultQueryOptions=function(r){if(r!=null&&r._defaulted)return r;var s=me({},this.defaultOptions.queries,this.getQueryDefaults(r==null?void 0:r.queryKey),r,{_defaulted:!0});return!s.queryHash&&s.queryKey&&(s.queryHash=Im(s.queryKey,s)),s},e.defaultQueryObserverOptions=function(r){return this.defaultQueryOptions(r)},e.defaultMutationOptions=function(r){return r!=null&&r._defaulted?r:me({},this.defaultOptions.mutations,this.getMutationDefaults(r==null?void 0:r.mutationKey),r,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),lC=function(t){zo(e,t);function e(r,s){var i;return i=t.call(this)||this,i.client=r,i.options=s,i.trackedProps=[],i.selectError=null,i.bindMethods(),i.setOptions(s),i}var n=e.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),u0(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return Mf(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return Mf(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(s,i){var o=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(s),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var l=this.hasListeners();l&&c0(this.currentQuery,a,this.options,o)&&this.executeFetch(),this.updateResult(i),l&&(this.currentQuery!==a||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var u=this.computeRefetchInterval();l&&(this.currentQuery!==a||this.options.enabled!==o.enabled||u!==this.currentRefetchInterval)&&this.updateRefetchInterval(u)},n.getOptimisticResult=function(s){var i=this.client.defaultQueryObserverOptions(s),o=this.client.getQueryCache().build(this.client,i);return this.createResult(o,i)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(s,i){var o=this,a={},l=function(c){o.trackedProps.includes(c)||o.trackedProps.push(c)};return Object.keys(s).forEach(function(u){Object.defineProperty(a,u,{configurable:!1,enumerable:!0,get:function(){return l(u),s[u]}})}),(i.useErrorBoundary||i.suspense)&&l("error"),a},n.getNextResult=function(s){var i=this;return new Promise(function(o,a){var l=i.subscribe(function(u){u.isFetching||(l(),u.isError&&(s!=null&&s.throwOnError)?a(u.error):o(u))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(s){return this.fetch(me({},s,{meta:{refetchPage:s==null?void 0:s.refetchPage}}))},n.fetchOptimistic=function(s){var i=this,o=this.client.defaultQueryObserverOptions(s),a=this.client.getQueryCache().build(this.client,o);return a.fetch().then(function(){return i.createResult(a,o)})},n.fetch=function(s){var i=this;return this.executeFetch(s).then(function(){return i.updateResult(),i.currentResult})},n.executeFetch=function(s){this.updateQuery();var i=this.currentQuery.fetch(this.options,s);return s!=null&&s.throwOnError||(i=i.catch(ft)),i},n.updateStaleTimeout=function(){var s=this;if(this.clearStaleTimeout(),!(Ql||this.currentResult.isStale||!_f(this.options.staleTime))){var i=kE(this.currentResult.dataUpdatedAt,this.options.staleTime),o=i+1;this.staleTimeoutId=setTimeout(function(){s.currentResult.isStale||s.updateResult()},o)}},n.computeRefetchInterval=function(){var s;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(s=this.options.refetchInterval)!=null?s:!1},n.updateRefetchInterval=function(s){var i=this;this.clearRefetchInterval(),this.currentRefetchInterval=s,!(Ql||this.options.enabled===!1||!_f(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(i.options.refetchIntervalInBackground||Xi.isFocused())&&i.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(s,i){var o=this.currentQuery,a=this.options,l=this.currentResult,u=this.currentResultState,c=this.currentResultOptions,d=s!==o,f=d?s.state:this.currentQueryInitialState,m=d?this.currentResult:this.previousQueryResult,p=s.state,g=p.dataUpdatedAt,v=p.error,y=p.errorUpdatedAt,x=p.isFetching,S=p.status,w=!1,E=!1,b;if(i.optimisticResults){var L=this.hasListeners(),R=!L&&u0(s,i),I=L&&c0(s,o,i,a);(R||I)&&(x=!0,g||(S="loading"))}if(i.keepPreviousData&&!p.dataUpdateCount&&(m!=null&&m.isSuccess)&&S!=="error")b=m.data,g=m.dataUpdatedAt,S=m.status,w=!0;else if(i.select&&typeof p.data<"u")if(l&&p.data===(u==null?void 0:u.data)&&i.select===this.selectFn)b=this.selectResult;else try{this.selectFn=i.select,b=i.select(p.data),i.structuralSharing!==!1&&(b=Zl(l==null?void 0:l.data,b)),this.selectResult=b,this.selectError=null}catch(U){tu().error(U),this.selectError=U}else b=p.data;if(typeof i.placeholderData<"u"&&typeof b>"u"&&(S==="loading"||S==="idle")){var C;if(l!=null&&l.isPlaceholderData&&i.placeholderData===(c==null?void 0:c.placeholderData))C=l.data;else if(C=typeof i.placeholderData=="function"?i.placeholderData():i.placeholderData,i.select&&typeof C<"u")try{C=i.select(C),i.structuralSharing!==!1&&(C=Zl(l==null?void 0:l.data,C)),this.selectError=null}catch(U){tu().error(U),this.selectError=U}typeof C<"u"&&(S="success",b=C,E=!0)}this.selectError&&(v=this.selectError,b=this.selectResult,y=Date.now(),S="error");var k={status:S,isLoading:S==="loading",isSuccess:S==="success",isError:S==="error",isIdle:S==="idle",data:b,dataUpdatedAt:g,error:v,errorUpdatedAt:y,failureCount:p.fetchFailureCount,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:x,isRefetching:x&&S!=="loading",isLoadingError:S==="error"&&p.dataUpdatedAt===0,isPlaceholderData:E,isPreviousData:w,isRefetchError:S==="error"&&p.dataUpdatedAt!==0,isStale:Dm(s,i),refetch:this.refetch,remove:this.remove};return k},n.shouldNotifyListeners=function(s,i){if(!i)return!0;var o=this.options,a=o.notifyOnChangeProps,l=o.notifyOnChangePropsExclusions;if(!a&&!l||a==="tracked"&&!this.trackedProps.length)return!0;var u=a==="tracked"?this.trackedProps:a;return Object.keys(s).some(function(c){var d=c,f=s[d]!==i[d],m=u==null?void 0:u.some(function(g){return g===c}),p=l==null?void 0:l.some(function(g){return g===c});return f&&!p&&(!u||m)})},n.updateResult=function(s){var i=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!WL(this.currentResult,i)){var o={cache:!0};(s==null?void 0:s.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,i)&&(o.listeners=!0),this.notify(me({},o,s))}},n.updateQuery=function(){var s=this.client.getQueryCache().build(this.client,this.options);if(s!==this.currentQuery){var i=this.currentQuery;this.currentQuery=s,this.currentQueryInitialState=s.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(i==null||i.removeObserver(this),s.addObserver(this))}},n.onQueryUpdate=function(s){var i={};s.type==="success"?i.onSuccess=!0:s.type==="error"&&!ol(s.error)&&(i.onError=!0),this.updateResult(i),this.hasListeners()&&this.updateTimers()},n.notify=function(s){var i=this;je.batch(function(){s.onSuccess?(i.options.onSuccess==null||i.options.onSuccess(i.currentResult.data),i.options.onSettled==null||i.options.onSettled(i.currentResult.data,null)):s.onError&&(i.options.onError==null||i.options.onError(i.currentResult.error),i.options.onSettled==null||i.options.onSettled(void 0,i.currentResult.error)),s.listeners&&i.listeners.forEach(function(o){o(i.currentResult)}),s.cache&&i.client.getQueryCache().notify({query:i.currentQuery,type:"observerResultsUpdated"})})},e}(qo);function uC(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function u0(t,e){return uC(t,e)||t.state.dataUpdatedAt>0&&Mf(t,e,e.refetchOnMount)}function Mf(t,e,n){if(e.enabled!==!1){var r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Dm(t,e)}return!1}function c0(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Dm(t,n)}function Dm(t,e){return t.isStaleByTime(e.staleTime)}var cC=VR.unstable_batchedUpdates;je.setBatchNotifyFunction(cC);var dC=console;JL(dC);var d0=Q.createContext(void 0),OE=Q.createContext(!1);function ME(t){return t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=d0),window.ReactQueryClientContext):d0}var fC=function(){var e=Q.useContext(ME(Q.useContext(OE)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},hC=function(e){var n=e.client,r=e.contextSharing,s=r===void 0?!1:r,i=e.children;Q.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var o=ME(s);return Q.createElement(OE.Provider,{value:s},Q.createElement(o.Provider,{value:n},i))};function mC(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var pC=Q.createContext(mC()),gC=function(){return Q.useContext(pC)};function yC(t,e,n){return typeof e=="function"?e.apply(void 0,n):typeof e=="boolean"?e:!!t}function vC(t,e){var n=Q.useRef(!1),r=Q.useState(0),s=r[1],i=fC(),o=gC(),a=i.defaultQueryObserverOptions(t);a.optimisticResults=!0,a.onError&&(a.onError=je.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=je.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=je.batchCalls(a.onSettled)),a.suspense&&(typeof a.staleTime!="number"&&(a.staleTime=1e3),a.cacheTime===0&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&(o.isReset()||(a.retryOnMount=!1));var l=Q.useState(function(){return new e(i,a)}),u=l[0],c=u.getOptimisticResult(a);if(Q.useEffect(function(){n.current=!0,o.clearReset();var d=u.subscribe(je.batchCalls(function(){n.current&&s(function(f){return f+1})}));return u.updateResult(),function(){n.current=!1,d()}},[o,u]),Q.useEffect(function(){u.setOptions(a,{listeners:!1})},[a,u]),a.suspense&&c.isLoading)throw u.fetchOptimistic(a).then(function(d){var f=d.data;a.onSuccess==null||a.onSuccess(f),a.onSettled==null||a.onSettled(f,null)}).catch(function(d){o.clearReset(),a.onError==null||a.onError(d),a.onSettled==null||a.onSettled(void 0,d)});if(c.isError&&!o.isReset()&&!c.isFetching&&yC(a.suspense,a.useErrorBoundary,[c.error,u.getCurrentQuery()]))throw c.error;return a.notifyOnChangeProps==="tracked"&&(c=u.trackResult(c,a)),c}function Ff(t,e,n){var r=sl(t,e,n);return vC(r,lC)}var xC=typeof Element<"u",SC=typeof Map=="function",EC=typeof Set=="function",TC=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function al(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!al(t[r],e[r]))return!1;return!0}var i;if(SC&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!al(r.value[1],e.get(r.value[0])))return!1;return!0}if(EC&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(TC&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(xC&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!al(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var wC=function(e,n){try{return al(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const bC=Bo(wC);var AC=function(t,e,n,r,s,i,o,a){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,s,i,o,a],c=0;l=new Error(e.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},RC=AC;const f0=Bo(RC);var LC=function(e,n,r,s){var i=r?r.call(s,e,n):void 0;if(i!==void 0)return!!i;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<o.length;u++){var c=o[u];if(!l(c))return!1;var d=e[c],f=n[c];if(i=r?r.call(s,d,f,c):void 0,i===!1||i===void 0&&d!==f)return!1}return!0};const CC=Bo(LC);var FE=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(FE||{}),$c={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},h0=Object.values(FE),Pm={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},kC=Object.entries(Pm).reduce((t,[e,n])=>(t[n]=e,t),{}),mn="data-rh",Qs={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Xs=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},IC=t=>{let e=Xs(t,"title");const n=Xs(t,Qs.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=Xs(t,Qs.DEFAULT_TITLE);return e||r||void 0},DC=t=>Xs(t,Qs.ON_CHANGE_CLIENT_STATE)||(()=>{}),Vc=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),PC=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let i=0;i<s.length;i+=1){const a=s[i].toLowerCase();if(t.indexOf(a)!==-1&&r[a])return n.concat(r)}}return n},[]),NC=t=>console&&typeof console.warn=="function"&&console.warn(t),Ii=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&NC(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,i)=>{const o={};i.filter(l=>{let u;const c=Object.keys(l);for(let f=0;f<c.length;f+=1){const m=c[f],p=m.toLowerCase();e.indexOf(p)!==-1&&!(u==="rel"&&l[u].toLowerCase()==="canonical")&&!(p==="rel"&&l[p].toLowerCase()==="stylesheet")&&(u=p),e.indexOf(m)!==-1&&(m==="innerHTML"||m==="cssText"||m==="itemprop")&&(u=m)}if(!u||!l[u])return!1;const d=l[u].toLowerCase();return r[u]||(r[u]={}),o[u]||(o[u]={}),r[u][d]?!1:(o[u][d]=!0,!0)}).reverse().forEach(l=>s.push(l));const a=Object.keys(o);for(let l=0;l<a.length;l+=1){const u=a[l],c={...r[u],...o[u]};r[u]=c}return s},[]).reverse()},_C=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},OC=t=>({baseTag:PC(["href"],t),bodyAttributes:Vc("bodyAttributes",t),defer:Xs(t,Qs.DEFER),encode:Xs(t,Qs.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Vc("htmlAttributes",t),linkTags:Ii("link",["rel","href"],t),metaTags:Ii("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Ii("noscript",["innerHTML"],t),onChangeClientState:DC(t),scriptTags:Ii("script",["src","innerHTML"],t),styleTags:Ii("style",["cssText"],t),title:IC(t),titleAttributes:Vc("titleAttributes",t),prioritizeSeoTags:_C(t,Qs.PRIORITIZE_SEO_TAGS)}),jE=t=>Array.isArray(t)?t.join(""):t,MC=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},Gc=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(MC(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},m0=(t,e)=>({...t,[e]:void 0}),FC=["noscript","script","style"],jf=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),UE=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),jC=(t,e,n,r)=>{const s=UE(n),i=jE(e);return s?`<${t} ${mn}="true" ${s}>${jf(i,r)}</${t}>`:`<${t} ${mn}="true">${jf(i,r)}</${t}>`},UC=(t,e,n=!0)=>e.reduce((r,s)=>{const i=s,o=Object.keys(i).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,c)=>{const d=typeof i[c]>"u"?c:`${c}="${jf(i[c],n)}"`;return u?`${u} ${d}`:d},""),a=i.innerHTML||i.cssText||"",l=FC.indexOf(t)===-1;return`${r}<${t} ${mn}="true" ${o}${l?"/>":`>${a}</${t}>`}`},""),BE=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Pm[r];return n[s||r]=t[r],n},e),BC=(t,e,n)=>{const r={key:e,[mn]:!0},s=BE(n,r);return[Q.createElement("title",s,e)]},ll=(t,e)=>e.map((n,r)=>{const s={key:r,[mn]:!0};return Object.keys(n).forEach(i=>{const a=Pm[i]||i;if(a==="innerHTML"||a==="cssText"){const l=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:l}}else s[a]=n[i]}),Q.createElement(t,s)}),qt=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>BC(t,e.title,e.titleAttributes),toString:()=>jC(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>BE(e),toString:()=>UE(e)};default:return{toComponent:()=>ll(t,e),toString:()=>UC(t,e,n)}}},$C=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=Gc(t,$c.meta),i=Gc(e,$c.link),o=Gc(n,$c.script);return{priorityMethods:{toComponent:()=>[...ll("meta",s.priority),...ll("link",i.priority),...ll("script",o.priority)],toString:()=>`${qt("meta",s.priority,r)} ${qt("link",i.priority,r)} ${qt("script",o.priority,r)}`},metaTags:s.default,linkTags:i.default,scriptTags:o.default}},VC=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:i,styleTags:o,title:a="",titleAttributes:l,prioritizeSeoTags:u}=t;let{linkTags:c,metaTags:d,scriptTags:f}=t,m={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:m,linkTags:c,metaTags:d,scriptTags:f}=$C(t)),{priority:m,base:qt("base",e,r),bodyAttributes:qt("bodyAttributes",n,r),htmlAttributes:qt("htmlAttributes",s,r),link:qt("link",c,r),meta:qt("meta",d,r),noscript:qt("noscript",i,r),script:qt("script",f,r),style:qt("style",o,r),title:qt("title",{title:a,titleAttributes:l},r)}},Uf=VC,wa=[],$E=!!(typeof window<"u"&&window.document&&window.document.createElement),Bf=class{constructor(t,e){Bn(this,"instances",[]);Bn(this,"canUseDOM",$E);Bn(this,"context");Bn(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?wa:this.instances,add:t=>{(this.canUseDOM?wa:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?wa:this.instances).indexOf(t);(this.canUseDOM?wa:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Uf({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},GC={},VE=Q.createContext(GC),Zs,GE=(Zs=class extends A.Component{constructor(n){super(n);Bn(this,"helmetData");this.helmetData=new Bf(this.props.context||{},Zs.canUseDOM)}render(){return Q.createElement(VE.Provider,{value:this.helmetData.value},this.props.children)}},Bn(Zs,"canUseDOM",$E),Zs),Ss=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${mn}]`),s=[].slice.call(r),i=[];let o;return e&&e.length&&e.forEach(a=>{const l=document.createElement(t);for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u))if(u==="innerHTML")l.innerHTML=a.innerHTML;else if(u==="cssText")l.styleSheet?l.styleSheet.cssText=a.cssText:l.appendChild(document.createTextNode(a.cssText));else{const c=u,d=typeof a[c]>"u"?"":a[c];l.setAttribute(u,d)}l.setAttribute(mn,"true"),s.some((u,c)=>(o=c,l.isEqualNode(u)))?s.splice(o,1):i.push(l)}),s.forEach(a=>{var l;return(l=a.parentNode)==null?void 0:l.removeChild(a)}),i.forEach(a=>n.appendChild(a)),{oldTags:s,newTags:i}},$f=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(mn),s=r?r.split(","):[],i=[...s],o=Object.keys(e);for(const a of o){const l=e[a]||"";n.getAttribute(a)!==l&&n.setAttribute(a,l),s.indexOf(a)===-1&&s.push(a);const u=i.indexOf(a);u!==-1&&i.splice(u,1)}for(let a=i.length-1;a>=0;a-=1)n.removeAttribute(i[a]);s.length===i.length?n.removeAttribute(mn):n.getAttribute(mn)!==o.join(",")&&n.setAttribute(mn,o.join(","))},HC=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=jE(t)),$f("title",e)},p0=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:i,metaTags:o,noscriptTags:a,onChangeClientState:l,scriptTags:u,styleTags:c,title:d,titleAttributes:f}=t;$f("body",r),$f("html",s),HC(d,f);const m={baseTag:Ss("base",n),linkTags:Ss("link",i),metaTags:Ss("meta",o),noscriptTags:Ss("noscript",a),scriptTags:Ss("script",u),styleTags:Ss("style",c)},p={},g={};Object.keys(m).forEach(v=>{const{newTags:y,oldTags:x}=m[v];y.length&&(p[v]=y),x.length&&(g[v]=m[v].oldTags)}),e&&e(),l(t,p,g)},Di=null,KC=t=>{Di&&cancelAnimationFrame(Di),t.defer?Di=requestAnimationFrame(()=>{p0(t,()=>{Di=null})}):(p0(t),Di=null)},WC=KC,g0=class extends A.Component{constructor(){super(...arguments);Bn(this,"rendered",!1)}shouldComponentUpdate(e){return!CC(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=OC(e.get().map(i=>{const o={...i.props};return delete o.context,o}));GE.canUseDOM?WC(s):Uf&&(r=Uf(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},_d,zC=(_d=class extends A.Component{shouldComponentUpdate(t){return!bC(m0(this.props,"helmetData"),m0(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return f0(h0.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${h0.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),f0(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return Q.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...i}=r.props,o=Object.keys(i).reduce((l,u)=>(l[kC[u]||u]=i[u],l),{});let{type:a}=r;switch(typeof a=="symbol"?a=a.toString():this.warnOnInvalidChildren(r,s),a){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,o,s);break;default:e=this.mapObjectTypeChildren(r,e,o,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof Bf)){const s=r;r=new Bf(s.context,!0),delete n.helmetData}return r?Q.createElement(g0,{...n,context:r.value}):Q.createElement(VE.Consumer,null,s=>Q.createElement(g0,{...n,context:s}))}},Bn(_d,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),_d);function HE(t,e){return function(){return t.apply(e,arguments)}}const{toString:qC}=Object.prototype,{getPrototypeOf:Nm}=Object,zu=(t=>e=>{const n=qC.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xn=t=>(t=t.toLowerCase(),e=>zu(e)===t),qu=t=>e=>typeof e===t,{isArray:yi}=Array,Ao=qu("undefined");function YC(t){return t!==null&&!Ao(t)&&t.constructor!==null&&!Ao(t.constructor)&&Ut(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const KE=xn("ArrayBuffer");function QC(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&KE(t.buffer),e}const XC=qu("string"),Ut=qu("function"),WE=qu("number"),Yu=t=>t!==null&&typeof t=="object",JC=t=>t===!0||t===!1,ul=t=>{if(zu(t)!=="object")return!1;const e=Nm(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ZC=xn("Date"),ek=xn("File"),tk=xn("Blob"),nk=xn("FileList"),rk=t=>Yu(t)&&Ut(t.pipe),sk=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ut(t.append)&&((e=zu(t))==="formdata"||e==="object"&&Ut(t.toString)&&t.toString()==="[object FormData]"))},ik=xn("URLSearchParams"),[ok,ak,lk,uk]=["ReadableStream","Request","Response","Headers"].map(xn),ck=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yo(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),yi(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function zE(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qE=t=>!Ao(t)&&t!==Qr;function Vf(){const{caseless:t}=qE(this)&&this||{},e={},n=(r,s)=>{const i=t&&zE(e,s)||s;ul(e[i])&&ul(r)?e[i]=Vf(e[i],r):ul(r)?e[i]=Vf({},r):yi(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Yo(arguments[r],n);return e}const dk=(t,e,n,{allOwnKeys:r}={})=>(Yo(e,(s,i)=>{n&&Ut(s)?t[i]=HE(s,n):t[i]=s},{allOwnKeys:r}),t),fk=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),hk=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},mk=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Nm(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},pk=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},gk=t=>{if(!t)return null;if(yi(t))return t;let e=t.length;if(!WE(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},yk=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Nm(Uint8Array)),vk=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},xk=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Sk=xn("HTMLFormElement"),Ek=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),y0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Tk=xn("RegExp"),YE=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Yo(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},wk=t=>{YE(t,(e,n)=>{if(Ut(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ut(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},bk=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return yi(t)?r(t):r(String(t).split(e)),n},Ak=()=>{},Rk=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Lk(t){return!!(t&&Ut(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Ck=t=>{const e=new Array(10),n=(r,s)=>{if(Yu(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=yi(r)?[]:{};return Yo(r,(o,a)=>{const l=n(o,s+1);!Ao(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},kk=xn("AsyncFunction"),Ik=t=>t&&(Yu(t)||Ut(t))&&Ut(t.then)&&Ut(t.catch),QE=((t,e)=>t?setImmediate:e?((n,r)=>(Qr.addEventListener("message",({source:s,data:i})=>{s===Qr&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Qr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ut(Qr.postMessage)),Dk=typeof queueMicrotask<"u"?queueMicrotask.bind(Qr):typeof process<"u"&&process.nextTick||QE,_={isArray:yi,isArrayBuffer:KE,isBuffer:YC,isFormData:sk,isArrayBufferView:QC,isString:XC,isNumber:WE,isBoolean:JC,isObject:Yu,isPlainObject:ul,isReadableStream:ok,isRequest:ak,isResponse:lk,isHeaders:uk,isUndefined:Ao,isDate:ZC,isFile:ek,isBlob:tk,isRegExp:Tk,isFunction:Ut,isStream:rk,isURLSearchParams:ik,isTypedArray:yk,isFileList:nk,forEach:Yo,merge:Vf,extend:dk,trim:ck,stripBOM:fk,inherits:hk,toFlatObject:mk,kindOf:zu,kindOfTest:xn,endsWith:pk,toArray:gk,forEachEntry:vk,matchAll:xk,isHTMLForm:Sk,hasOwnProperty:y0,hasOwnProp:y0,reduceDescriptors:YE,freezeMethods:wk,toObjectSet:bk,toCamelCase:Ek,noop:Ak,toFiniteNumber:Rk,findKey:zE,global:Qr,isContextDefined:qE,isSpecCompliantForm:Lk,toJSONObject:Ck,isAsyncFn:kk,isThenable:Ik,setImmediate:QE,asap:Dk};function se(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}_.inherits(se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const XE=se.prototype,JE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{JE[t]={value:t}});Object.defineProperties(se,JE);Object.defineProperty(XE,"isAxiosError",{value:!0});se.from=(t,e,n,r,s,i)=>{const o=Object.create(XE);return _.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),se.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Pk=null;function Gf(t){return _.isPlainObject(t)||_.isArray(t)}function ZE(t){return _.endsWith(t,"[]")?t.slice(0,-2):t}function v0(t,e,n){return t?t.concat(e).map(function(s,i){return s=ZE(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Nk(t){return _.isArray(t)&&!t.some(Gf)}const _k=_.toFlatObject(_,{},null,function(e){return/^is[A-Z]/.test(e)});function Qu(t,e,n){if(!_.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=_.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!_.isUndefined(v[g])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(e);if(!_.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(_.isDate(p))return p.toISOString();if(!l&&_.isBlob(p))throw new se("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(p)||_.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,g,v){let y=p;if(p&&!v&&typeof p=="object"){if(_.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(_.isArray(p)&&Nk(p)||(_.isFileList(p)||_.endsWith(g,"[]"))&&(y=_.toArray(p)))return g=ZE(g),y.forEach(function(S,w){!(_.isUndefined(S)||S===null)&&e.append(o===!0?v0([g],w,i):o===null?g:g+"[]",u(S))}),!1}return Gf(p)?!0:(e.append(v0(v,g,i),u(p)),!1)}const d=[],f=Object.assign(_k,{defaultVisitor:c,convertValue:u,isVisitable:Gf});function m(p,g){if(!_.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(p),_.forEach(p,function(y,x){(!(_.isUndefined(y)||y===null)&&s.call(e,y,_.isString(x)?x.trim():x,g,f))===!0&&m(y,g?g.concat(x):[x])}),d.pop()}}if(!_.isObject(t))throw new TypeError("data must be an object");return m(t),e}function x0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function _m(t,e){this._pairs=[],t&&Qu(t,this,e)}const eT=_m.prototype;eT.append=function(e,n){this._pairs.push([e,n])};eT.toString=function(e){const n=e?function(r){return e.call(this,r,x0)}:x0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Ok(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tT(t,e,n){if(!e)return t;const r=n&&n.encode||Ok;_.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=_.isURLSearchParams(e)?e.toString():new _m(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class S0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_.forEach(this.handlers,function(r){r!==null&&e(r)})}}const nT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mk=typeof URLSearchParams<"u"?URLSearchParams:_m,Fk=typeof FormData<"u"?FormData:null,jk=typeof Blob<"u"?Blob:null,Uk={isBrowser:!0,classes:{URLSearchParams:Mk,FormData:Fk,Blob:jk},protocols:["http","https","file","blob","url","data"]},Om=typeof window<"u"&&typeof document<"u",Hf=typeof navigator=="object"&&navigator||void 0,Bk=Om&&(!Hf||["ReactNative","NativeScript","NS"].indexOf(Hf.product)<0),$k=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Vk=Om&&window.location.href||"http://localhost",Gk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Om,hasStandardBrowserEnv:Bk,hasStandardBrowserWebWorkerEnv:$k,navigator:Hf,origin:Vk},Symbol.toStringTag,{value:"Module"})),pt={...Gk,...Uk};function Hk(t,e){return Qu(t,new pt.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return pt.isNode&&_.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function Kk(t){return _.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Wk(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function rT(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&_.isArray(s)?s.length:o,l?(_.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!_.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&_.isArray(s[o])&&(s[o]=Wk(s[o])),!a)}if(_.isFormData(t)&&_.isFunction(t.entries)){const n={};return _.forEachEntry(t,(r,s)=>{e(Kk(r),s,n,0)}),n}return null}function zk(t,e,n){if(_.isString(t))try{return(e||JSON.parse)(t),_.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Qo={transitional:nT,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=_.isObject(e);if(i&&_.isHTMLForm(e)&&(e=new FormData(e)),_.isFormData(e))return s?JSON.stringify(rT(e)):e;if(_.isArrayBuffer(e)||_.isBuffer(e)||_.isStream(e)||_.isFile(e)||_.isBlob(e)||_.isReadableStream(e))return e;if(_.isArrayBufferView(e))return e.buffer;if(_.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Hk(e,this.formSerializer).toString();if((a=_.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Qu(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),zk(e)):e}],transformResponse:[function(e){const n=this.transitional||Qo.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(_.isResponse(e)||_.isReadableStream(e))return e;if(e&&_.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?se.from(a,se.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pt.classes.FormData,Blob:pt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],t=>{Qo.headers[t]={}});const qk=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yk=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&qk[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},E0=Symbol("internals");function Pi(t){return t&&String(t).trim().toLowerCase()}function cl(t){return t===!1||t==null?t:_.isArray(t)?t.map(cl):String(t)}function Qk(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Xk=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Hc(t,e,n,r,s){if(_.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!_.isString(e)){if(_.isString(r))return e.indexOf(r)!==-1;if(_.isRegExp(r))return r.test(e)}}function Jk(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Zk(t,e){const n=_.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class Pt{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,u){const c=Pi(l);if(!c)throw new Error("header name must be a non-empty string");const d=_.findKey(s,c);(!d||s[d]===void 0||u===!0||u===void 0&&s[d]!==!1)&&(s[d||l]=cl(a))}const o=(a,l)=>_.forEach(a,(u,c)=>i(u,c,l));if(_.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(_.isString(e)&&(e=e.trim())&&!Xk(e))o(Yk(e),n);else if(_.isHeaders(e))for(const[a,l]of e.entries())i(l,a,r);else e!=null&&i(n,e,r);return this}get(e,n){if(e=Pi(e),e){const r=_.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Qk(s);if(_.isFunction(n))return n.call(this,s,r);if(_.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Pi(e),e){const r=_.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Hc(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Pi(o),o){const a=_.findKey(r,o);a&&(!n||Hc(r,r[a],a,n))&&(delete r[a],s=!0)}}return _.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Hc(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return _.forEach(this,(s,i)=>{const o=_.findKey(r,i);if(o){n[o]=cl(s),delete n[i];return}const a=e?Jk(i):String(i).trim();a!==i&&delete n[i],n[a]=cl(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return _.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&_.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[E0]=this[E0]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Pi(o);r[a]||(Zk(s,o),r[a]=!0)}return _.isArray(e)?e.forEach(i):i(e),this}}Pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(Pt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});_.freezeMethods(Pt);function Kc(t,e){const n=this||Qo,r=e||n,s=Pt.from(r.headers);let i=r.data;return _.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function sT(t){return!!(t&&t.__CANCEL__)}function vi(t,e,n){se.call(this,t??"canceled",se.ERR_CANCELED,e,n),this.name="CanceledError"}_.inherits(vi,se,{__CANCEL__:!0});function iT(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new se("Request failed with status code "+n.status,[se.ERR_BAD_REQUEST,se.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function eI(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function tI(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[i];o||(o=u),n[s]=l,r[s]=u;let d=i,f=0;for(;d!==s;)f+=n[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const m=c&&u-c;return m?Math.round(f*1e3/m):void 0}}function nI(t,e){let n=0,r=1e3/e,s,i;const o=(u,c=Date.now())=>{n=c,s=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const c=Date.now(),d=c-n;d>=r?o(u,c):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},r-d)))},()=>s&&o(s)]}const nu=(t,e,n=3)=>{let r=0;const s=tI(50,250);return nI(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,u=s(l),c=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},T0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},w0=t=>(...e)=>_.asap(()=>t(...e)),rI=pt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,pt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(pt.origin),pt.navigator&&/(msie|trident)/i.test(pt.navigator.userAgent)):()=>!0,sI=pt.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];_.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),_.isString(r)&&o.push("path="+r),_.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iI(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function oI(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function oT(t,e,n){let r=!iI(e);return t&&r||n==!1?oI(t,e):e}const b0=t=>t instanceof Pt?{...t}:t;function ds(t,e){e=e||{};const n={};function r(u,c,d,f){return _.isPlainObject(u)&&_.isPlainObject(c)?_.merge.call({caseless:f},u,c):_.isPlainObject(c)?_.merge({},c):_.isArray(c)?c.slice():c}function s(u,c,d,f){if(_.isUndefined(c)){if(!_.isUndefined(u))return r(void 0,u,d,f)}else return r(u,c,d,f)}function i(u,c){if(!_.isUndefined(c))return r(void 0,c)}function o(u,c){if(_.isUndefined(c)){if(!_.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,d){if(d in e)return r(u,c);if(d in t)return r(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c,d)=>s(b0(u),b0(c),d,!0)};return _.forEach(Object.keys(Object.assign({},t,e)),function(c){const d=l[c]||s,f=d(t[c],e[c],c);_.isUndefined(f)&&d!==a||(n[c]=f)}),n}const aT=t=>{const e=ds({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=Pt.from(o),e.url=tT(oT(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(_.isFormData(n)){if(pt.hasStandardBrowserEnv||pt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...c]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...c].join("; "))}}if(pt.hasStandardBrowserEnv&&(r&&_.isFunction(r)&&(r=r(e)),r||r!==!1&&rI(e.url))){const u=s&&i&&sI.read(i);u&&o.set(s,u)}return e},aI=typeof XMLHttpRequest<"u",lI=aI&&function(t){return new Promise(function(n,r){const s=aT(t);let i=s.data;const o=Pt.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,c,d,f,m,p;function g(){m&&m(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function y(){if(!v)return;const S=Pt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:t,request:v};iT(function(L){n(L),g()},function(L){r(L),g()},E),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(r(new se("Request aborted",se.ECONNABORTED,t,v)),v=null)},v.onerror=function(){r(new se("Network Error",se.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let w=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||nT;s.timeoutErrorMessage&&(w=s.timeoutErrorMessage),r(new se(w,E.clarifyTimeoutError?se.ETIMEDOUT:se.ECONNABORTED,t,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&_.forEach(o.toJSON(),function(w,E){v.setRequestHeader(E,w)}),_.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),a&&a!=="json"&&(v.responseType=s.responseType),u&&([f,p]=nu(u,!0),v.addEventListener("progress",f)),l&&v.upload&&([d,m]=nu(l),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(c=S=>{v&&(r(!S||S.type?new vi(null,t,v):S),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const x=eI(s.url);if(x&&pt.protocols.indexOf(x)===-1){r(new se("Unsupported protocol "+x+":",se.ERR_BAD_REQUEST,t));return}v.send(i||null)})},uI=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,a();const c=u instanceof Error?u:this.reason;r.abort(c instanceof se?c:new vi(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,i(new se(`timeout ${e} of ms exceeded`,se.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>_.asap(a),l}},cI=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},dI=async function*(t,e){for await(const n of fI(t))yield*cI(n,e)},fI=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},A0=(t,e,n,r)=>{const s=dI(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await s.next();if(u){a(),l.close();return}let d=c.byteLength;if(n){let f=i+=d;n(f)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Xu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",lT=Xu&&typeof ReadableStream=="function",hI=Xu&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),uT=(t,...e)=>{try{return!!t(...e)}catch{return!1}},mI=lT&&uT(()=>{let t=!1;const e=new Request(pt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),R0=64*1024,Kf=lT&&uT(()=>_.isReadableStream(new Response("").body)),ru={stream:Kf&&(t=>t.body)};Xu&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ru[e]&&(ru[e]=_.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new se(`Response type '${e}' is not supported`,se.ERR_NOT_SUPPORT,r)})})})(new Response);const pI=async t=>{if(t==null)return 0;if(_.isBlob(t))return t.size;if(_.isSpecCompliantForm(t))return(await new Request(pt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(_.isArrayBufferView(t)||_.isArrayBuffer(t))return t.byteLength;if(_.isURLSearchParams(t)&&(t=t+""),_.isString(t))return(await hI(t)).byteLength},gI=async(t,e)=>{const n=_.toFiniteNumber(t.getContentLength());return n??pI(e)},yI=Xu&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:f}=aT(t);u=u?(u+"").toLowerCase():"text";let m=uI([s,i&&i.toAbortSignal()],o),p;const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(l&&mI&&n!=="get"&&n!=="head"&&(v=await gI(c,r))!==0){let E=new Request(e,{method:"POST",body:r,duplex:"half"}),b;if(_.isFormData(r)&&(b=E.headers.get("content-type"))&&c.setContentType(b),E.body){const[L,R]=T0(v,nu(w0(l)));r=A0(E.body,R0,L,R)}}_.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...f,signal:m,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:y?d:void 0});let x=await fetch(p);const S=Kf&&(u==="stream"||u==="response");if(Kf&&(a||S&&g)){const E={};["status","statusText","headers"].forEach(I=>{E[I]=x[I]});const b=_.toFiniteNumber(x.headers.get("content-length")),[L,R]=a&&T0(b,nu(w0(a),!0))||[];x=new Response(A0(x.body,R0,L,()=>{R&&R(),g&&g()}),E)}u=u||"text";let w=await ru[_.findKey(ru,u)||"text"](x,t);return!S&&g&&g(),await new Promise((E,b)=>{iT(E,b,{data:w,headers:Pt.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:p})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new se("Network Error",se.ERR_NETWORK,t,p),{cause:y.cause||y}):se.from(y,y&&y.code,t,p)}}),Wf={http:Pk,xhr:lI,fetch:yI};_.forEach(Wf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const L0=t=>`- ${t}`,vI=t=>_.isFunction(t)||t===null||t===!1,cT={getAdapter:t=>{t=_.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!vI(n)&&(r=Wf[(o=String(n)).toLowerCase()],r===void 0))throw new se(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(L0).join(`
`):" "+L0(i[0]):"as no adapter specified";throw new se("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Wf};function Wc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new vi(null,t)}function C0(t){return Wc(t),t.headers=Pt.from(t.headers),t.data=Kc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),cT.getAdapter(t.adapter||Qo.adapter)(t).then(function(r){return Wc(t),r.data=Kc.call(t,t.transformResponse,r),r.headers=Pt.from(r.headers),r},function(r){return sT(r)||(Wc(t),r&&r.response&&(r.response.data=Kc.call(t,t.transformResponse,r.response),r.response.headers=Pt.from(r.response.headers))),Promise.reject(r)})}const dT="1.8.1",Ju={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ju[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const k0={};Ju.transitional=function(e,n,r){function s(i,o){return"[Axios v"+dT+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new se(s(o," has been removed"+(n?" in "+n:"")),se.ERR_DEPRECATED);return n&&!k0[o]&&(k0[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};Ju.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function xI(t,e,n){if(typeof t!="object")throw new se("options must be an object",se.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new se("option "+i+" must be "+l,se.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new se("Unknown option "+i,se.ERR_BAD_OPTION)}}const dl={assertOptions:xI,validators:Ju},En=dl.validators;class ts{constructor(e){this.defaults=e,this.interceptors={request:new S0,response:new S0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ds(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&dl.assertOptions(r,{silentJSONParsing:En.transitional(En.boolean),forcedJSONParsing:En.transitional(En.boolean),clarifyTimeoutError:En.transitional(En.boolean)},!1),s!=null&&(_.isFunction(s)?n.paramsSerializer={serialize:s}:dl.assertOptions(s,{encode:En.function,serialize:En.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),dl.assertOptions(n,{baseUrl:En.spelling("baseURL"),withXsrfToken:En.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&_.merge(i.common,i[n.method]);i&&_.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=Pt.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let c,d=0,f;if(!l){const p=[C0.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),f=p.length,c=Promise.resolve(n);d<f;)c=c.then(p[d++],p[d++]);return c}f=a.length;let m=n;for(d=0;d<f;){const p=a[d++],g=a[d++];try{m=p(m)}catch(v){g.call(this,v);break}}try{c=C0.call(this,m)}catch(p){return Promise.reject(p)}for(d=0,f=u.length;d<f;)c=c.then(u[d++],u[d++]);return c}getUri(e){e=ds(this.defaults,e);const n=oT(e.baseURL,e.url,e.allowAbsoluteUrls);return tT(n,e.params,e.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(e){ts.prototype[e]=function(n,r){return this.request(ds(r||{},{method:e,url:n,data:(r||{}).data}))}});_.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(ds(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ts.prototype[e]=n(),ts.prototype[e+"Form"]=n(!0)});class Mm{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new vi(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Mm(function(s){e=s}),cancel:e}}}function SI(t){return function(n){return t.apply(null,n)}}function EI(t){return _.isObject(t)&&t.isAxiosError===!0}const zf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zf).forEach(([t,e])=>{zf[e]=t});function fT(t){const e=new ts(t),n=HE(ts.prototype.request,e);return _.extend(n,ts.prototype,e,{allOwnKeys:!0}),_.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return fT(ds(t,s))},n}const Se=fT(Qo);Se.Axios=ts;Se.CanceledError=vi;Se.CancelToken=Mm;Se.isCancel=sT;Se.VERSION=dT;Se.toFormData=Qu;Se.AxiosError=se;Se.Cancel=Se.CanceledError;Se.all=function(e){return Promise.all(e)};Se.spread=SI;Se.isAxiosError=EI;Se.mergeConfig=ds;Se.AxiosHeaders=Pt;Se.formToJSON=t=>rT(_.isHTMLForm(t)?new FormData(t):t);Se.getAdapter=cT.getAdapter;Se.HttpStatusCode=zf;Se.default=Se;const Ce=Se.create({baseURL:"https://newtestapi-livid.vercel.app",headers:{Referer:"https://www.mangakakalot.gg/"}});function Fn(){return h.jsx("div",{className:"flex justify-center items-center h-screen",children:h.jsxs("div",{children:[h.jsx("img",{src:"/loading.gif",alt:"Loading"}),h.jsx("br",{}),h.jsx("h1",{className:"text-2xl font-bold",children:"Loading..."})]})})}var hT={},Zu={},Fm={},zc={},qc={exports:{}},Yc,I0;function TI(){if(I0)return Yc;I0=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Yc=t,Yc}var Qc,D0;function wI(){if(D0)return Qc;D0=1;var t=TI();function e(){}function n(){}return n.resetWarningCache=e,Qc=function(){function r(o,a,l,u,c,d){if(d!==t){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return i.PropTypes=i,i},Qc}var P0;function bI(){return P0||(P0=1,qc.exports=wI()()),qc.exports}var N0;function AI(){return N0||(N0=1,function(t){(function(e,n){n(t,A,bI())})(sx,function(e,n,r){Object.defineProperty(e,"__esModule",{value:!0}),e.setHasSupportToCaptureOption=p;var s=o(n),i=o(r);function o(x){return x&&x.__esModule?x:{default:x}}var a=Object.assign||function(x){for(var S=1;S<arguments.length;S++){var w=arguments[S];for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(x[E]=w[E])}return x};function l(x,S){var w={};for(var E in x)S.indexOf(E)>=0||Object.prototype.hasOwnProperty.call(x,E)&&(w[E]=x[E]);return w}function u(x,S){if(!(x instanceof S))throw new TypeError("Cannot call a class as a function")}var c=function(){function x(S,w){for(var E=0;E<w.length;E++){var b=w[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,w,E){return w&&x(S.prototype,w),E&&x(S,E),S}}();function d(x,S){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:x}function f(x,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);x.prototype=Object.create(S&&S.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(x,S):x.__proto__=S)}var m=!1;function p(x){m=x}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){p(!0)}}))}catch{}function g(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return m?x:x.capture}function v(x){if("touches"in x){var S=x.touches[0],w=S.pageX,E=S.pageY;return{x:w,y:E}}var b=x.screenX,L=x.screenY;return{x:b,y:L}}var y=function(x){f(S,x);function S(){var w;u(this,S);for(var E=arguments.length,b=Array(E),L=0;L<E;L++)b[L]=arguments[L];var R=d(this,(w=S.__proto__||Object.getPrototypeOf(S)).call.apply(w,[this].concat(b)));return R._handleSwipeStart=R._handleSwipeStart.bind(R),R._handleSwipeMove=R._handleSwipeMove.bind(R),R._handleSwipeEnd=R._handleSwipeEnd.bind(R),R._onMouseDown=R._onMouseDown.bind(R),R._onMouseMove=R._onMouseMove.bind(R),R._onMouseUp=R._onMouseUp.bind(R),R._setSwiperRef=R._setSwiperRef.bind(R),R}return c(S,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,g({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,g({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(E){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(E))}},{key:"_onMouseMove",value:function(E){this.mouseDown&&this._handleSwipeMove(E)}},{key:"_onMouseUp",value:function(E){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(E)}},{key:"_handleSwipeStart",value:function(E){var b=v(E),L=b.x,R=b.y;this.moveStart={x:L,y:R},this.props.onSwipeStart(E)}},{key:"_handleSwipeMove",value:function(E){if(this.moveStart){var b=v(E),L=b.x,R=b.y,I=L-this.moveStart.x,C=R-this.moveStart.y;this.moving=!0;var k=this.props.onSwipeMove({x:I,y:C},E);k&&E.cancelable&&E.preventDefault(),this.movePosition={deltaX:I,deltaY:C}}}},{key:"_handleSwipeEnd",value:function(E){this.props.onSwipeEnd(E);var b=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-b?this.props.onSwipeLeft(1,E):this.movePosition.deltaX>b&&this.props.onSwipeRight(1,E),this.movePosition.deltaY<-b?this.props.onSwipeUp(1,E):this.movePosition.deltaY>b&&this.props.onSwipeDown(1,E)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(E){this.swiper=E,this.props.innerRef(E)}},{key:"render",value:function(){var E=this.props;E.tagName;var b=E.className,L=E.style,R=E.children;E.allowMouseEvents,E.onSwipeUp,E.onSwipeDown,E.onSwipeLeft,E.onSwipeRight,E.onSwipeStart,E.onSwipeMove,E.onSwipeEnd,E.innerRef,E.tolerance;var I=l(E,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return s.default.createElement(this.props.tagName,a({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:b,style:L},I),R)}}]),S}(n.Component);y.displayName="ReactSwipe",y.propTypes={tagName:i.default.string,className:i.default.string,style:i.default.object,children:i.default.node,allowMouseEvents:i.default.bool,onSwipeUp:i.default.func,onSwipeDown:i.default.func,onSwipeLeft:i.default.func,onSwipeRight:i.default.func,onSwipeStart:i.default.func,onSwipeMove:i.default.func,onSwipeEnd:i.default.func,innerRef:i.default.func,tolerance:i.default.number.isRequired},y.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},e.default=y})}(zc)),zc}(function(t){(function(e,n){n(t,AI())})(sx,function(e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=s(n);function s(i){return i&&i.__esModule?i:{default:i}}e.default=r.default})})(Fm);var Xo={},mT={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(i=s(i,r(a)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var a in i)e.call(i,a)&&i[a]&&(o=s(o,a));return o}function s(i,o){return o?i?i+" "+o:i+o:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(mT);var RI=mT.exports;Object.defineProperty(Xo,"__esModule",{value:!0});Xo.default=void 0;var or=LI(RI);function LI(t){return t&&t.__esModule?t:{default:t}}function CI(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var kI={ROOT:function(e){return(0,or.default)(CI({"carousel-root":!0},e||"",!!e))},CAROUSEL:function(e){return(0,or.default)({carousel:!0,"carousel-slider":e})},WRAPPER:function(e,n){return(0,or.default)({"thumbs-wrapper":!e,"slider-wrapper":e,"axis-horizontal":n==="horizontal","axis-vertical":n!=="horizontal"})},SLIDER:function(e,n){return(0,or.default)({thumbs:!e,slider:e,animated:!n})},ITEM:function(e,n,r){return(0,or.default)({thumb:!e,slide:e,selected:n,previous:r})},ARROW_PREV:function(e){return(0,or.default)({"control-arrow control-prev":!0,"control-disabled":e})},ARROW_NEXT:function(e){return(0,or.default)({"control-arrow control-next":!0,"control-disabled":e})},DOT:function(e){return(0,or.default)({dot:!0,selected:e})}};Xo.default=kI;var Jo={},ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.outerWidth=void 0;var II=function(e){var n=e.offsetWidth,r=getComputedStyle(e);return n+=parseInt(r.marginLeft)+parseInt(r.marginRight),n};ec.outerWidth=II;var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.default=void 0;var DI=function(e,n,r){var s=e===0?e:e+n,i=r==="horizontal"?[s,0,0]:[0,s,0],o="translate3d",a="("+i.join(",")+")";return o+a};xi.default=DI;var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.default=void 0;var PI=function(){return window};Zo.default=PI;Object.defineProperty(Jo,"__esModule",{value:!0});Jo.default=void 0;var sn=OI(A),Fr=tc(Xo),NI=ec,_0=tc(xi),_I=tc(Fm),ba=tc(Zo);function tc(t){return t&&t.__esModule?t:{default:t}}function pT(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return pT=function(){return t},t}function OI(t){if(t&&t.__esModule)return t;if(t===null||Ji(t)!=="object"&&typeof t!="function")return{default:t};var e=pT();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=r?Object.getOwnPropertyDescriptor(t,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}function Ji(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ji=function(n){return typeof n}:Ji=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ji(t)}function qf(){return qf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qf.apply(this,arguments)}function MI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jI(t,e,n){return e&&FI(t.prototype,e),t}function UI(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yf(t,e)}function Yf(t,e){return Yf=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Yf(t,e)}function BI(t){var e=VI();return function(){var r=su(t),s;if(e){var i=su(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return $I(this,s)}}function $I(t,e){return e&&(Ji(e)==="object"||typeof e=="function")?e:vt(t)}function vt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function su(t){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},su(t)}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var GI=function(e){return e.hasOwnProperty("key")},jm=function(t){UI(n,t);var e=BI(n);function n(r){var s;return MI(this,n),s=e.call(this,r),ct(vt(s),"itemsWrapperRef",void 0),ct(vt(s),"itemsListRef",void 0),ct(vt(s),"thumbsRef",void 0),ct(vt(s),"setItemsWrapperRef",function(i){s.itemsWrapperRef=i}),ct(vt(s),"setItemsListRef",function(i){s.itemsListRef=i}),ct(vt(s),"setThumbsRef",function(i,o){s.thumbsRef||(s.thumbsRef=[]),s.thumbsRef[o]=i}),ct(vt(s),"updateSizes",function(){if(!(!s.props.children||!s.itemsWrapperRef||!s.thumbsRef)){var i=sn.Children.count(s.props.children),o=s.itemsWrapperRef.clientWidth,a=s.props.thumbWidth?s.props.thumbWidth:(0,NI.outerWidth)(s.thumbsRef[0]),l=Math.floor(o/a),u=l<i,c=u?i-l:0;s.setState(function(d,f){return{itemSize:a,visibleItems:l,firstItem:u?s.getFirstItem(f.selectedItem):0,lastPosition:c,showArrows:u}})}}),ct(vt(s),"handleClickItem",function(i,o,a){if(!GI(a)||a.key==="Enter"){var l=s.props.onSelectItem;typeof l=="function"&&l(i,o)}}),ct(vt(s),"onSwipeStart",function(){s.setState({swiping:!0})}),ct(vt(s),"onSwipeEnd",function(){s.setState({swiping:!1})}),ct(vt(s),"onSwipeMove",function(i){var o=i.x;if(!s.state.itemSize||!s.itemsWrapperRef||!s.state.visibleItems)return!1;var a=0,l=sn.Children.count(s.props.children),u=-(s.state.firstItem*100)/s.state.visibleItems,c=Math.max(l-s.state.visibleItems,0),d=-c*100/s.state.visibleItems;u===a&&o>0&&(o=0),u===d&&o<0&&(o=0);var f=s.itemsWrapperRef.clientWidth,m=u+100/(f/o);return s.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(p){s.itemsListRef.style[p]=(0,_0.default)(m,"%",s.props.axis)}),!0}),ct(vt(s),"slideRight",function(i){s.moveTo(s.state.firstItem-(typeof i=="number"?i:1))}),ct(vt(s),"slideLeft",function(i){s.moveTo(s.state.firstItem+(typeof i=="number"?i:1))}),ct(vt(s),"moveTo",function(i){i=i<0?0:i,i=i>=s.state.lastPosition?s.state.lastPosition:i,s.setState({firstItem:i})}),s.state={selectedItem:r.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},s}return jI(n,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(s){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==s.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,ba.default)().addEventListener("resize",this.updateSizes),(0,ba.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,ba.default)().removeEventListener("resize",this.updateSizes),(0,ba.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(s){var i=s;return s>=this.state.lastPosition&&(i=this.state.lastPosition),s<this.state.firstItem+this.state.visibleItems&&(i=this.state.firstItem),s<this.state.firstItem&&(i=s),i}},{key:"renderItems",value:function(){var s=this;return this.props.children.map(function(i,o){var a=Fr.default.ITEM(!1,o===s.state.selectedItem),l={key:o,ref:function(c){return s.setThumbsRef(c,o)},className:a,onClick:s.handleClickItem.bind(s,o,s.props.children[o]),onKeyDown:s.handleClickItem.bind(s,o,s.props.children[o]),"aria-label":"".concat(s.props.labels.item," ").concat(o+1),style:{width:s.props.thumbWidth}};return sn.default.createElement("li",qf({},l,{role:"button",tabIndex:0}),i)})}},{key:"render",value:function(){var s=this;if(!this.props.children)return null;var i=sn.Children.count(this.props.children)>1,o=this.state.showArrows&&this.state.firstItem>0,a=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,l={},u=-this.state.firstItem*(this.state.itemSize||0),c=(0,_0.default)(u,"px",this.props.axis),d=this.props.transitionTime+"ms";return l={WebkitTransform:c,MozTransform:c,MsTransform:c,OTransform:c,transform:c,msTransform:c,WebkitTransitionDuration:d,MozTransitionDuration:d,MsTransitionDuration:d,OTransitionDuration:d,transitionDuration:d,msTransitionDuration:d},sn.default.createElement("div",{className:Fr.default.CAROUSEL(!1)},sn.default.createElement("div",{className:Fr.default.WRAPPER(!1),ref:this.setItemsWrapperRef},sn.default.createElement("button",{type:"button",className:Fr.default.ARROW_PREV(!o),onClick:function(){return s.slideRight()},"aria-label":this.props.labels.leftArrow}),i?sn.default.createElement(_I.default,{tagName:"ul",className:Fr.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:l,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):sn.default.createElement("ul",{className:Fr.default.SLIDER(!1,this.state.swiping),ref:function(m){return s.setItemsListRef(m)},style:l},this.renderItems()),sn.default.createElement("button",{type:"button",className:Fr.default.ARROW_NEXT(!a),onClick:function(){return s.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),n}(sn.Component);Jo.default=jm;ct(jm,"displayName","Thumbs");ct(jm,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350});var nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.default=void 0;var HI=function(){return document};nc.default=HI;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.setPosition=Ot.getPosition=Ot.isKeyboardEvent=Ot.defaultStatusFormatter=Ot.noop=void 0;var KI=A,WI=zI(xi);function zI(t){return t&&t.__esModule?t:{default:t}}var qI=function(){};Ot.noop=qI;var YI=function(e,n){return"".concat(e," of ").concat(n)};Ot.defaultStatusFormatter=YI;var QI=function(e){return e?e.hasOwnProperty("key"):!1};Ot.isKeyboardEvent=QI;var XI=function(e,n){if(n.infiniteLoop&&++e,e===0)return 0;var r=KI.Children.count(n.children);if(n.centerMode&&n.axis==="horizontal"){var s=-e*n.centerSlidePercentage,i=r-1;return e&&(e!==i||n.infiniteLoop)?s+=(100-n.centerSlidePercentage)/2:e===i&&(s+=100-n.centerSlidePercentage),s}return-e*100};Ot.getPosition=XI;var JI=function(e,n){var r={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(s){r[s]=(0,WI.default)(e,"%",n)}),r};Ot.setPosition=JI;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.fadeAnimationHandler=Ln.slideStopSwipingHandler=Ln.slideSwipeAnimationHandler=Ln.slideAnimationHandler=void 0;var gT=A,ZI=eD(xi),Cn=Ot;function eD(t){return t&&t.__esModule?t:{default:t}}function O0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O0(Object(n),!0).forEach(function(r){tD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nD=function(e,n){var r={},s=n.selectedItem,i=s,o=gT.Children.count(e.children)-1,a=e.infiniteLoop&&(s<0||s>o);if(a)return i<0?e.centerMode&&e.centerSlidePercentage&&e.axis==="horizontal"?r.itemListStyle=(0,Cn.setPosition)(-(o+2)*e.centerSlidePercentage-(100-e.centerSlidePercentage)/2,e.axis):r.itemListStyle=(0,Cn.setPosition)(-(o+2)*100,e.axis):i>o&&(r.itemListStyle=(0,Cn.setPosition)(0,e.axis)),r;var l=(0,Cn.getPosition)(s,e),u=(0,ZI.default)(l,"%",e.axis),c=e.transitionTime+"ms";return r.itemListStyle={WebkitTransform:u,msTransform:u,OTransform:u,transform:u},n.swiping||(r.itemListStyle=Kr(Kr({},r.itemListStyle),{},{WebkitTransitionDuration:c,MozTransitionDuration:c,OTransitionDuration:c,transitionDuration:c,msTransitionDuration:c})),r};Ln.slideAnimationHandler=nD;var rD=function(e,n,r,s){var i={},o=n.axis==="horizontal",a=gT.Children.count(n.children),l=0,u=(0,Cn.getPosition)(r.selectedItem,n),c=n.infiniteLoop?(0,Cn.getPosition)(a-1,n)-100:(0,Cn.getPosition)(a-1,n),d=o?e.x:e.y,f=d;u===l&&d>0&&(f=0),u===c&&d<0&&(f=0);var m=u+100/(r.itemSize/f),p=Math.abs(d)>n.swipeScrollTolerance;return n.infiniteLoop&&p&&(r.selectedItem===0&&m>-100?m-=a*100:r.selectedItem===a-1&&m<-a*100&&(m+=a*100)),(!n.preventMovementUntilSwipeScrollTolerance||p||r.swipeMovementStarted)&&(r.swipeMovementStarted||s({swipeMovementStarted:!0}),i.itemListStyle=(0,Cn.setPosition)(m,n.axis)),p&&!r.cancelClick&&s({cancelClick:!0}),i};Ln.slideSwipeAnimationHandler=rD;var sD=function(e,n){var r=(0,Cn.getPosition)(n.selectedItem,e),s=(0,Cn.setPosition)(r,e.axis);return{itemListStyle:s}};Ln.slideStopSwipingHandler=sD;var iD=function(e,n){var r=e.transitionTime+"ms",s="ease-in-out",i={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:s,msTransitionTimingFunction:s,MozTransitionTimingFunction:s,WebkitTransitionTimingFunction:s,OTransitionTimingFunction:s};return n.swiping||(i=Kr(Kr({},i),{},{WebkitTransitionDuration:r,MozTransitionDuration:r,OTransitionDuration:r,transitionDuration:r,msTransitionDuration:r})),{slideStyle:i,selectedStyle:Kr(Kr({},i),{},{opacity:1,position:"relative"}),prevStyle:Kr({},i)}};Ln.fadeAnimationHandler=iD;Object.defineProperty(Zu,"__esModule",{value:!0});Zu.default=void 0;var ge=lD(A),oD=ea(Fm),zn=ea(Xo),aD=ea(Jo),Aa=ea(nc),Ra=ea(Zo),Ui=Ot,iu=Ln;function ea(t){return t&&t.__esModule?t:{default:t}}function yT(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return yT=function(){return t},t}function lD(t){if(t&&t.__esModule)return t;if(t===null||Zi(t)!=="object"&&typeof t!="function")return{default:t};var e=yT();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=r?Object.getOwnPropertyDescriptor(t,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}function Zi(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zi=function(n){return typeof n}:Zi=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Zi(t)}function Qf(){return Qf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}function M0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function on(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M0(Object(n),!0).forEach(function(r){oe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dD(t,e,n){return e&&cD(t.prototype,e),t}function fD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xf(t,e)}function Xf(t,e){return Xf=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Xf(t,e)}function hD(t){var e=pD();return function(){var r=ou(t),s;if(e){var i=ou(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return mD(this,s)}}function mD(t,e){return e&&(Zi(e)==="object"||typeof e=="function")?e:ae(t)}function ae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ou(t){return ou=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ou(t)}function oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Um=function(t){fD(n,t);var e=hD(n);function n(r){var s;uD(this,n),s=e.call(this,r),oe(ae(s),"thumbsRef",void 0),oe(ae(s),"carouselWrapperRef",void 0),oe(ae(s),"listRef",void 0),oe(ae(s),"itemsRef",void 0),oe(ae(s),"timer",void 0),oe(ae(s),"animationHandler",void 0),oe(ae(s),"setThumbsRef",function(o){s.thumbsRef=o}),oe(ae(s),"setCarouselWrapperRef",function(o){s.carouselWrapperRef=o}),oe(ae(s),"setListRef",function(o){s.listRef=o}),oe(ae(s),"setItemsRef",function(o,a){s.itemsRef||(s.itemsRef=[]),s.itemsRef[a]=o}),oe(ae(s),"autoPlay",function(){ge.Children.count(s.props.children)<=1||(s.clearAutoPlay(),s.props.autoPlay&&(s.timer=setTimeout(function(){s.increment()},s.props.interval)))}),oe(ae(s),"clearAutoPlay",function(){s.timer&&clearTimeout(s.timer)}),oe(ae(s),"resetAutoPlay",function(){s.clearAutoPlay(),s.autoPlay()}),oe(ae(s),"stopOnHover",function(){s.setState({isMouseEntered:!0},s.clearAutoPlay)}),oe(ae(s),"startOnLeave",function(){s.setState({isMouseEntered:!1},s.autoPlay)}),oe(ae(s),"isFocusWithinTheCarousel",function(){return s.carouselWrapperRef?!!((0,Aa.default)().activeElement===s.carouselWrapperRef||s.carouselWrapperRef.contains((0,Aa.default)().activeElement)):!1}),oe(ae(s),"navigateWithKeyboard",function(o){if(s.isFocusWithinTheCarousel()){var a=s.props.axis,l=a==="horizontal",u={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},c=l?u.ArrowRight:u.ArrowDown,d=l?u.ArrowLeft:u.ArrowUp;c===o.keyCode?s.increment():d===o.keyCode&&s.decrement()}}),oe(ae(s),"updateSizes",function(){if(!(!s.state.initialized||!s.itemsRef||s.itemsRef.length===0)){var o=s.props.axis==="horizontal",a=s.itemsRef[0];if(a){var l=o?a.clientWidth:a.clientHeight;s.setState({itemSize:l}),s.thumbsRef&&s.thumbsRef.updateSizes()}}}),oe(ae(s),"setMountState",function(){s.setState({hasMount:!0}),s.updateSizes()}),oe(ae(s),"handleClickItem",function(o,a){if(ge.Children.count(s.props.children)!==0){if(s.state.cancelClick){s.setState({cancelClick:!1});return}s.props.onClickItem(o,a),o!==s.state.selectedItem&&s.setState({selectedItem:o})}}),oe(ae(s),"handleOnChange",function(o,a){ge.Children.count(s.props.children)<=1||s.props.onChange(o,a)}),oe(ae(s),"handleClickThumb",function(o,a){s.props.onClickThumb(o,a),s.moveTo(o)}),oe(ae(s),"onSwipeStart",function(o){s.setState({swiping:!0}),s.props.onSwipeStart(o)}),oe(ae(s),"onSwipeEnd",function(o){s.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),s.props.onSwipeEnd(o),s.clearAutoPlay(),s.state.autoPlay&&s.autoPlay()}),oe(ae(s),"onSwipeMove",function(o,a){s.props.onSwipeMove(a);var l=s.props.swipeAnimationHandler(o,s.props,s.state,s.setState.bind(ae(s)));return s.setState(on({},l)),!!Object.keys(l).length}),oe(ae(s),"decrement",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;s.moveTo(s.state.selectedItem-(typeof o=="number"?o:1))}),oe(ae(s),"increment",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;s.moveTo(s.state.selectedItem+(typeof o=="number"?o:1))}),oe(ae(s),"moveTo",function(o){if(typeof o=="number"){var a=ge.Children.count(s.props.children)-1;o<0&&(o=s.props.infiniteLoop?a:0),o>a&&(o=s.props.infiniteLoop?0:a),s.selectItem({selectedItem:o}),s.state.autoPlay&&s.state.isMouseEntered===!1&&s.resetAutoPlay()}}),oe(ae(s),"onClickNext",function(){s.increment(1)}),oe(ae(s),"onClickPrev",function(){s.decrement(1)}),oe(ae(s),"onSwipeForward",function(){s.increment(1),s.props.emulateTouch&&s.setState({cancelClick:!0})}),oe(ae(s),"onSwipeBackwards",function(){s.decrement(1),s.props.emulateTouch&&s.setState({cancelClick:!0})}),oe(ae(s),"changeItem",function(o){return function(a){(!(0,Ui.isKeyboardEvent)(a)||a.key==="Enter")&&s.moveTo(o)}}),oe(ae(s),"selectItem",function(o){s.setState(on({previousItem:s.state.selectedItem},o),function(){s.setState(s.animationHandler(s.props,s.state))}),s.handleOnChange(o.selectedItem,ge.Children.toArray(s.props.children)[o.selectedItem])}),oe(ae(s),"getInitialImage",function(){var o=s.props.selectedItem,a=s.itemsRef&&s.itemsRef[o],l=a&&a.getElementsByTagName("img")||[];return l[0]}),oe(ae(s),"getVariableItemHeight",function(o){var a=s.itemsRef&&s.itemsRef[o];if(s.state.hasMount&&a&&a.children.length){var l=a.children[0].getElementsByTagName("img")||[];if(l.length>0){var u=l[0];if(!u.complete){var c=function m(){s.forceUpdate(),u.removeEventListener("load",m)};u.addEventListener("load",c)}}var d=l[0]||a.children[0],f=d.clientHeight;return f>0?f:null}return null});var i={initialized:!1,previousItem:r.selectedItem,selectedItem:r.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:r.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return s.animationHandler=typeof r.animationHandler=="function"&&r.animationHandler||r.animationHandler==="fade"&&iu.fadeAnimationHandler||iu.slideAnimationHandler,s.state=on(on({},i),s.animationHandler(r,i)),s}return dD(n,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(s,i){!s.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!s.autoFocus&&this.props.autoFocus&&this.forceFocus(),i.swiping&&!this.state.swiping&&this.setState(on({},this.props.stopSwipingHandler(this.props,this.state))),(s.selectedItem!==this.props.selectedItem||s.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),s.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var s=this;this.bindEvents(),this.state.autoPlay&&ge.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var i=s.getInitialImage();i&&!i.complete?i.addEventListener("load",s.setMountState):s.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var s=this.carouselWrapperRef;this.props.stopOnHover&&s&&(s.addEventListener("mouseenter",this.stopOnHover),s.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var s=this.carouselWrapperRef;this.props.stopOnHover&&s&&(s.removeEventListener("mouseenter",this.stopOnHover),s.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,Ra.default)().addEventListener("resize",this.updateSizes),(0,Ra.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,Aa.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,Ra.default)().removeEventListener("resize",this.updateSizes),(0,Ra.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var s=this.getInitialImage();s&&s.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,Aa.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var s;(s=this.carouselWrapperRef)===null||s===void 0||s.focus()}},{key:"renderItems",value:function(s){var i=this;return this.props.children?ge.Children.map(this.props.children,function(o,a){var l=a===i.state.selectedItem,u=a===i.state.previousItem,c=l&&i.state.selectedStyle||u&&i.state.prevStyle||i.state.slideStyle||{};i.props.centerMode&&i.props.axis==="horizontal"&&(c=on(on({},c),{},{minWidth:i.props.centerSlidePercentage+"%"})),i.state.swiping&&i.state.swipeMovementStarted&&(c=on(on({},c),{},{pointerEvents:"none"}));var d={ref:function(m){return i.setItemsRef(m,a)},key:"itemKey"+a+(s?"clone":""),className:zn.default.ITEM(!0,a===i.state.selectedItem,a===i.state.previousItem),onClick:i.handleClickItem.bind(i,a,o),style:c};return ge.default.createElement("li",d,i.props.renderItem(o,{isSelected:a===i.state.selectedItem,isPrevious:a===i.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var s=this,i=this.props,o=i.showIndicators,a=i.labels,l=i.renderIndicator,u=i.children;return o?ge.default.createElement("ul",{className:"control-dots"},ge.Children.map(u,function(c,d){return l&&l(s.changeItem(d),d===s.state.selectedItem,d,a.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?ge.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,ge.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||ge.Children.count(this.props.children)===0?null:ge.default.createElement(aD.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var s=this;if(!this.props.children||ge.Children.count(this.props.children)===0)return null;var i=this.props.swipeable&&ge.Children.count(this.props.children)>1,o=this.props.axis==="horizontal",a=this.props.showArrows&&ge.Children.count(this.props.children)>1,l=a&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,u=a&&(this.state.selectedItem<ge.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,c=this.renderItems(!0),d=c.shift(),f=c.pop(),m={className:zn.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},p={};if(o){if(m.onSwipeLeft=this.onSwipeForward,m.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var g=this.getVariableItemHeight(this.state.selectedItem);p.height=g||"auto"}}else m.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,m.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,m.style=on(on({},m.style),{},{height:this.state.itemSize}),p.height=this.state.itemSize;return ge.default.createElement("div",{"aria-label":this.props.ariaLabel,className:zn.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},ge.default.createElement("div",{className:zn.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,l,this.props.labels.leftArrow),ge.default.createElement("div",{className:zn.default.WRAPPER(!0,this.props.axis),style:p},i?ge.default.createElement(oD.default,Qf({tagName:"ul",innerRef:this.setListRef},m,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&f,this.renderItems(),this.props.infiniteLoop&&d):ge.default.createElement("ul",{className:zn.default.SLIDER(!0,this.state.swiping),ref:function(y){return s.setListRef(y)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&f,this.renderItems(),this.props.infiniteLoop&&d)),this.props.renderArrowNext(this.onClickNext,u,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),n}(ge.default.Component);Zu.default=Um;oe(Um,"displayName","Carousel");oe(Um,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:Ui.noop,onClickThumb:Ui.noop,onChange:Ui.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(e,n,r){return ge.default.createElement("button",{type:"button","aria-label":r,className:zn.default.ARROW_PREV(!n),onClick:e})},renderArrowNext:function(e,n,r){return ge.default.createElement("button",{type:"button","aria-label":r,className:zn.default.ARROW_NEXT(!n),onClick:e})},renderIndicator:function(e,n,r,s){return ge.default.createElement("li",{className:zn.default.DOT(n),onClick:e,onKeyDown:e,value:r,key:r,role:"button",tabIndex:0,"aria-label":"".concat(s," ").concat(r+1)})},renderItem:function(e){return e},renderThumbs:function(e){var n=ge.Children.map(e,function(r){var s=r;if(r.type!=="img"&&(s=ge.Children.toArray(r.props.children).find(function(i){return i.type==="img"})),!!s)return s});return n.filter(function(r){return r}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):n},statusFormatter:Ui.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:iu.slideSwipeAnimationHandler,stopSwipingHandler:iu.slideStopSwipingHandler});var gD={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Carousel",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"CarouselProps",{enumerable:!0,get:function(){return n.CarouselProps}}),Object.defineProperty(t,"Thumbs",{enumerable:!0,get:function(){return r.default}});var e=s(Zu),n=gD,r=s(Jo);function s(i){return i&&i.__esModule?i:{default:i}}})(hT);const yD=({episodes:t})=>{const e=$e(),[n,r]=A.useState([]);return A.useEffect(()=>{(async()=>{try{const i=await Promise.all(t.map(async o=>{const a=await Ce.get(`/meta/anilist/${o.id}`),l=a.data.results.length>0?a.data.results[0]:{};return{...o,details:l}}));r(i),console.log(i)}catch(i){console.error("Error fetching episode data:",i)}})()},[t]),h.jsx(hT.Carousel,{showArrows:!0,showStatus:!1,showThumbs:!1,infiniteLoop:!0,autoPlay:!0,interval:5e3,transitionTime:500,swipeable:!0,emulateTouch:!0,className:"w-full",children:n.map(s=>h.jsxs("div",{className:"relative h-96 cursor-pointer",onClick:()=>e("/episodes",{state:{preplayer:s.episodeId,id:s.details.id,Anime:s.title}}),children:[h.jsx("img",{src:s.image,alt:s.title,className:"object-scale-down h-full"}),h.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex flex-col justify-end p-6 text-white",children:[h.jsx("h2",{className:"text-3xl font-bold mb-2",children:s.title}),h.jsxs("p",{className:"text-xl mb-4",children:["Episode: ",s.episodeNumber]})]})]},s.id))})},vD=()=>{const t=$e(),[e,n]=A.useState(!1),[r,s]=A.useState([]),[i,o]=A.useState(!0),[a,l]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const d=await Ce.get("/anime/gogoanime/genre/list");s(d.data),o(!1)}catch(d){console.error("Error fetching genres:",d),o(!1)}})()},[]);const u=e?r:r.slice(0,20);return i?h.jsx("div",{children:"Loading genres..."}):h.jsxs("aside",{className:"mt-8 md:mt-0 md:ml-8 w-full md:w-1/4",children:[h.jsx("div",{className:"md:hidden",children:h.jsx("button",{onClick:()=>l(!a),className:"px-4 py-2 bg-gray-300 text-black font-bold rounded hover:bg-gray-400",children:a?"Hide Genres":"Show Genres"})}),(a||window.innerWidth>=768)&&h.jsxs("div",{className:" border-violet-800  border-2",children:[h.jsx("h2",{className:"text-2xl  justify-center items-center w-full border-violet-800 border-b-2 flex font-bold mb-4",children:"Genres"}),h.jsx("div",{className:"flex h-60 flex-wrap overflow-x-hidden overflow-y-scroll",children:u.map(c=>h.jsx("span",{onClick:()=>t(`/anime/genres/${c.id}`),className:"cursor-pointer overflow-hidden  font-bold w-[100px] h-[20px] m-2 md:w-[80px] hover:underline",children:c.title},c.id))}),!e&&r.length>20&&h.jsx("button",{onClick:()=>n(!0),className:"mt-4 text-blue-500 hover:underline",children:"Show more"})]})]})};function xD(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[s,i]=A.useState(""),[o,a]=A.useState(1),[l,u]=A.useState(!1),c=$e();A.useEffect(()=>{u(!0),window.scrollTo(0,0);const f=async()=>{const p=await Ce.get(`/meta/anilist/popular?provider=zoro&perPage=28&page=${o}`);e(p.data.results)},m=async()=>{const p=await Ce.get("/anime/zoro/recent-episodes?&perPage=25");r(p.data.results)};Promise.all([f(),m()]).then(()=>u(!1)).catch(p=>console.log(p))},[o]);const d=f=>{i(f.target.value)};return h.jsx("div",{className:"container mx-auto px-4",children:l?h.jsx(Fn,{}):h.jsxs(h.Fragment,{children:[h.jsx("form",{onSubmit:f=>{f.preventDefault(),c(`/search/${s.replace(/ /g,"-").toLowerCase()}`)},className:"py-4 text-white",children:h.jsxs("div",{className:"flex items-center md:justify-end",children:[h.jsx("input",{type:"text",placeholder:"Search anime...",value:s,required:!0,onChange:d,className:"px-2 py-1 rounded border placeholder-white border-gray-300 w-full md:w-auto bg-gray-500 text-white"}),h.jsx("input",{type:"submit",value:"Search",className:"mt-2 md:mt-0 md:ml-2 px-2 py-1 rounded bg-amber-600 text-gray-900 cursor-pointer"})]})}),h.jsxs("div",{className:"mt-8 w-full flex-row",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recent Episodes"}),h.jsxs("div",{className:"flex flex-col md:flex-row w-full",children:[h.jsx(yD,{episodes:n}),h.jsx(vD,{})]})]}),h.jsx("div",{className:"flex flex-col md:flex-row mt-8",children:h.jsxs("section",{className:"w-full md:w-3/4",children:[h.jsx("h2",{className:"text-2xl font-bold inline  mb-4",children:"Top Popular Anime"}),"  ",h.jsx("div",{className:"ml-8 inline-block"}),h.jsx("div",{className:"grid  grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(f=>h.jsxs("div",{onClick:()=>c(`/anime/${f.id}?fetchFiller=true`),className:"flex flex-col items-center mb-4 border-2 border-gray-300 rounded p-4 hover:shadow-lg transition duration-300 cursor-pointer",children:[h.jsx("img",{src:f.image,alt:f.title.english,className:"w-40 h-52 rounded mb-2"}),h.jsxs("div",{className:"mt-2 text-center",children:[h.jsx("h3",{className:"font-bold",children:f.title.english}),h.jsxs("p",{className:"text-sm",children:["Released Year ",f.releaseDate]}),h.jsxs("p",{className:"text-sm",children:["Episodes ",f.totalEpisodes]}),h.jsxs("p",{className:"text-sm",children:["status ",f.rating]})]})]},f.id))}),h.jsxs("div",{className:"flex justify-center mt-8",children:[h.jsx("button",{onClick:()=>a(o>1?o-1:1),className:"px-4 py-2 bg-gray-300 text-black font-bold rounded mr-2 hover:bg-gray-400",children:"Previous"}),h.jsxs("span",{className:"px-4 py-2 bg-gray-300 text-black font-bold rounded mr-2",children:["Page ",o]}),h.jsx("button",{onClick:()=>a(o+1),className:"px-4 py-2 bg-gray-300 text-black font-bold rounded hover:bg-gray-400",children:"Next"})]})]})})]})})}function SD(){const{anime:t}=gs(),[e,n]=A.useState([]),[r,s]=A.useState(1),[i,o]=A.useState(!0),[a,l]=A.useState(!1),u=$e();A.useEffect(()=>{window.scrollTo(0,0),t&&(async()=>{l(!0);const m=await Ce.get(`/meta/anilist/${t}?fetchFiller=true&dub=true&page=${r}`);n(m.data.results),o(m.data.hasNextPage),l(!1)})()},[t,r]);const c=()=>{s(r+1)},d=()=>{r>1&&s(r-1)};return t?a?h.jsx(Fn,{}):h.jsxs("div",{className:"container mx-auto",children:[h.jsxs("h1",{className:"text-3xl font-bold mt-8 mb-4",children:["Search Reult for : ",t.replace(/-/g," ")]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(f=>f.status!=="NOT_YET_RELEASED"&&h.jsxs("div",{onClick:()=>u(`/anime/${f.id}`),className:"flex flex-col items-center mb-4 border-2 border-gray-300 rounded p-4 hover:shadow-lg transition duration-300 cursor-pointer",children:[h.jsx("img",{src:f.image,alt:f.title.userPreferred,className:"w-40 h-52 rounded mb-2"}),h.jsxs("div",{className:"mt-2 text-center",children:[h.jsx("h3",{className:"font-bold",children:f.title.userPreferred}),h.jsx("p",{children:h.jsxs("span",{className:"font-bold",children:["Type :",f.type]})}),h.jsx("p",{children:h.jsxs("span",{className:"font-bold",children:[" ",f.releaseDate," "]})}),h.jsxs("div",{className:"flex flex-wrap justify-center mt-2",children:[f.nsfw?h.jsx("span",{className:" font-bold p-1 text-white bg-orange-900",children:"18+"}):h.jsx(h.Fragment,{}),f.type==="OVA"?h.jsx("span",{className:" ml-2 font-bold p-1 text-white bg-emerald-900",children:"OVA"}):null]}),h.jsx("p",{className:"text-sm text-gray-700",children:f.score})]})]},f.id))}),h.jsxs("div",{className:"flex justify-center mt-8",children:[r>1&&h.jsx("button",{onClick:d,className:`px-4 py-2 text-black font-bold rounded mr-2 ${r===1?"bg-gray-200":"bg-gray-300 hover:bg-gray-400"}`,disabled:r===1,children:"Previous"}),h.jsxs("span",{className:"px-4 py-2  text-black font-bold bg-gray-300 rounded mr-2",children:["Page ",r," "]}),i&&h.jsx("button",{onClick:()=>{event.target.disabled=!0,c()},className:"px-4 py-2 text-black font-bold bg-gray-300 rounded hover:bg-gray-400",children:"Next"})]})]}):window.location.href="/"}function ED(){const{id:t}=gs(),[e]=km();e.get("fetchFiller");const n=e.get("dub"),[r,s]=A.useState(null),i=$e();if(A.useEffect(()=>{(async()=>{const l=await Ce.get(`/meta/anilist/info/${t}?fetchFiller=true&dub=${n}`);s(l.data),window.scrollTo(0,0)})()},[t]),!r)return h.jsx(Fn,{});const o=()=>({__html:r.description});return h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsx("h1",{className:"text-4xl font-bold mb-4",children:r.title.english}),h.jsxs("div",{className:"flex flex-col md:flex-row",children:[h.jsxs("div",{className:"md:w-1/2",children:[h.jsx("img",{src:r.image,alt:r.title,className:"w-1/2 h-auto mb-4"}),h.jsx("h2",{className:"text-xl mt-3 font-bold mb-2",children:"Characters"}),h.jsx("div",{className:"flex flex-row h-60 overflow-x-scroll gap-2",children:r.characters.map(a=>h.jsxs("div",{className:"flex flex-col items-center mb-4",children:[h.jsx("img",{src:a.image,alt:a.name.userPreferred,className:" mt-8 w-16 h-16 rounded-full mr-2"}),h.jsx("div",{children:h.jsx("h3",{className:"font-bold",children:a.name.userPreferred})})]},a.id))})]}),h.jsxs("div",{className:"md:w-2/3 md:pl-8",children:[h.jsx("p",{className:"text-lg mb-4",dangerouslySetInnerHTML:o()}),h.jsxs("div",{className:"mb-4",children:[h.jsx("span",{className:"font-bold",children:"Also Known as:"}),h.jsxs("span",{className:"ml-2",children:[r.title.native,", ",r.title.romaji]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("span",{className:"font-bold",children:"Type:"})," ",h.jsx("span",{className:"ml-2",children:r.type})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("span",{className:"font-bold",children:"Episodes:"})," ",h.jsx("span",{className:"ml-2",children:r.totalEpisodes})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("span",{className:"font-bold",children:"Status:"})," ",h.jsx("span",{className:"ml-2",children:r.status})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("span",{className:"font-bold",children:"Genres:"}),h.jsx("div",{className:"flex flex-wrap mt-2",children:r.genres.map(a=>h.jsx(Ze,{to:`/anime/genres/${a}`,className:"m-1 p-1 bg-blue-500 text-white text-xs rounded",children:a},a))})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("span",{className:"font-bold",children:"Released:"})," ",h.jsx("span",{className:"ml-2",children:r.releaseDate})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("span",{className:"font-bold",children:"Sub or Dub:"})," ",h.jsx("span",{className:"ml-2",children:r.subOrDub})]}),h.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded mt-4 hover:bg-blue-600",onClick:()=>i("/episodes",{state:{id:r.id,Anime:r.title.english}}),children:"View Now"})]})]}),h.jsxs("div",{className:"md:w-full md:pl-8 mt-8",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Recommended Anime"}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:r.recommendations.map(a=>h.jsxs("div",{onClick:()=>i(`/anime/${a.id}?fetchFiller=true`),className:"flex flex-col items-center mb-4",children:[h.jsx("img",{src:a.image,alt:a.title.english,className:"w-24 h-32 rounded"}),h.jsxs("div",{className:"mt-2 text-center",children:[h.jsx("h3",{className:"font-bold",children:a.title.english}),h.jsxs("p",{className:"text-sm",children:["Released Year ",a.releaseDate]}),h.jsxs("p",{className:"text-sm",children:["Episodes ",a.totalEpisodes]}),h.jsxs("p",{className:"text-sm",children:["Rating ",a.rating]})]})]},a.id))})]})]})}function TD(){var m;const e=(m=Nt().state)==null?void 0:m.data,[n,r]=A.useState(null),[s,i]=A.useState(1),o=50;if(!e||e.length===0)return h.jsx("div",{className:"text-center text-2xl mt-8",children:"No artwork available."});const a=p=>{r(p)},l=()=>{r(null)},u=()=>{i(p=>p+1)},c=(s-1)*o,d=c+o,f=e.slice(c,d);return h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Artwork"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map((p,g)=>h.jsx("div",{className:"flex flex-col items-center",children:h.jsx("img",{src:p.img,alt:`Artwork ${g+1}`,className:"w-full h-auto mb-2 cursor-pointer",onClick:()=>a(p.img)})},g))}),d<e.length&&h.jsx("div",{className:"text-center mt-8",children:h.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:u,children:"Load More"})}),n&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-75",children:h.jsxs("div",{className:"max-w-full max-h-full",children:[h.jsx("img",{src:n,alt:"Selected Artwork",className:"max-w-full max-h-full"}),h.jsx("button",{className:"absolute top-4 right-4 text-white text-2xl",onClick:l,children:"×"})]})})]})}function wD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vT={exports:{}};(function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var d=a.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=a.normalizePath(d.path),a.buildURLFromParts(d)}var f=a.parseURL(u);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):u;var m=a.parseURL(l);if(!m)throw new Error("Error trying to parse base URL.");if(!m.netLoc&&m.path&&m.path[0]!=="/"){var p=s.exec(m.path);m.netLoc=p[1],m.path=p[2]}m.netLoc&&!m.path&&(m.path="/");var g={scheme:m.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(g.netLoc=m.netLoc,f.path[0]!=="/"))if(!f.path)g.path=m.path,f.params||(g.params=m.params,f.query||(g.query=m.query));else{var v=m.path,y=v.substring(0,v.lastIndexOf("/")+1)+f.path;g.path=a.normalizePath(y)}return g.path===null&&(g.path=c.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(g)},parseURL:function(l){var u=r.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(i,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=a})()})(vT);var Bm=vT.exports;function F0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F0(Object(n),!0).forEach(function(r){RD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bD(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AD(t){var e=bD(t,"string");return typeof e=="symbol"?e:String(e)}function RD(t,e,n){return e=AD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ke(){return Ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ke.apply(this,arguments)}const Y=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},LD=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=CD},CD=Number.MAX_SAFE_INTEGER||9007199254740991;let T=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),te=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),N=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const Vr=function(){},Jf={trace:Vr,debug:Vr,log:Vr,warn:Vr,info:Vr,error:Vr};let eo=Jf;function kD(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):Vr}function ID(t,...e){e.forEach(function(n){eo[n]=t[n]?t[n].bind(t):kD(n)})}function DD(t,e){if(typeof console=="object"&&t===!0||typeof t=="object"){ID(t,"debug","log","info","warn","error");try{eo.log(`Debug logs enabled for "${e}" in hls.js version 1.5.20`)}catch{eo=Jf}}else eo=Jf}const D=eo,PD=/^(\d+)x(\d+)$/,j0=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Ie{constructor(e){typeof e=="string"&&(e=Ie.parseAttrList(e)),Ke(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let s=0;s<n.length/2;s++)r[s]=parseInt(n.slice(s*2,s*2+2),16);return r}else return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const n=PD.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e){let n;const r={},s='"';for(j0.lastIndex=0;(n=j0.exec(e))!==null;){let i=n[2];i.indexOf(s)===0&&i.lastIndexOf(s)===i.length-1&&(i=i.slice(1,-1));const o=n[1].trim();r[o]=i}return r}}function ND(t){return t!=="ID"&&t!=="CLASS"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function _D(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"}class xT{constructor(e,n){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,n){const r=n.attr;for(const s in r)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==r[s]){D.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=Ke(new Ie({}),r,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=new Date(this.attr["END-DATE"]);Y(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Y(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Y(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class rc{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ye={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class ST{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[ye.AUDIO]:null,[ye.VIDEO]:null,[ye.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,n){const r=e.split("@",2);let s;r.length===1?s=(n==null?void 0:n.byteRangeEndOffset)||0:s=parseInt(r[1]),this._byteRange=[s,parseInt(r[0])+s]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Bm.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class Xc extends ST{constructor(e,n){super(n),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new rc,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Y(this.programDateTime))return null;const e=Y(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,s,i,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:n,endPTS:r,startDTS:s,endDTS:i,partial:o};return}l.startPTS=Math.min(l.startPTS,n),l.endPTS=Math.max(l.endPTS,r),l.startDTS=Math.min(l.startDTS,s),l.endDTS=Math.max(l.endDTS,i)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[ye.AUDIO]=null,e[ye.VIDEO]=null,e[ye.AUDIOVIDEO]=null}}class OD extends ST{constructor(e,n,r,s,i){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new rc,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=s;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const MD=10;class FD{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Y(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||MD}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function $m(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function jD(t){const e=Zf(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function UD(t){const e=function(r,s,i){const o=r[s];r[s]=r[i],r[i]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function BD(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),s=r[r.length-1].split(",");if(s.length===2){const i=s[0]==="base64",o=s[1];i?(r.splice(-1,1),n=$m(o)):n=jD(o)}}return n}function Zf(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}const ai=typeof self<"u"?self:void 0;var pe={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Lt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Jc(t){switch(t){case Lt.FAIRPLAY:return pe.FAIRPLAY;case Lt.PLAYREADY:return pe.PLAYREADY;case Lt.WIDEVINE:return pe.WIDEVINE;case Lt.CLEARKEY:return pe.CLEARKEY}}var La={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function Zc(t){if(t===La.WIDEVINE)return pe.WIDEVINE;if(t===La.PLAYREADY)return pe.PLAYREADY;if(t===La.CENC||t===La.CLEARKEY)return pe.CLEARKEY}function ed(t){switch(t){case pe.FAIRPLAY:return Lt.FAIRPLAY;case pe.PLAYREADY:return Lt.PLAYREADY;case pe.WIDEVINE:return Lt.WIDEVINE;case pe.CLEARKEY:return Lt.CLEARKEY}}function Ca(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[pe.FAIRPLAY,pe.WIDEVINE,pe.PLAYREADY,pe.CLEARKEY].filter(s=>!!e[s]):[];return!r[pe.WIDEVINE]&&n&&r.push(pe.WIDEVINE),r}const ET=function(t){return ai!=null&&(t=ai.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function $D(t,e,n,r){let s;switch(t){case pe.FAIRPLAY:s=["cenc","sinf"];break;case pe.WIDEVINE:case pe.PLAYREADY:s=["cenc"];break;case pe.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return VD(s,e,n,r)}function VD(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(i=>({contentType:`audio/mp4; codecs="${i}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(i=>({contentType:`video/mp4; codecs="${i}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function TT(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),r=n.substring(n.indexOf("<"),n.length),o=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(o){const a=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(a){const l=$m(a).subarray(0,16);return UD(l),l}}return null}function ns(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}const Vm=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,wT=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,Ro=(t,e)=>{const n=e;let r=0;for(;Vm(t,e);){r+=10;const s=sc(t,e+6);r+=s,wT(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)},sc=(t,e)=>{let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n},GD=(t,e)=>Vm(t,e)&&sc(t,e+6)+10<=t.length-e,Gm=t=>{const e=AT(t);for(let n=0;n<e.length;n++){const r=e[n];if(bT(r))return YD(r)}},bT=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",HD=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=sc(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}},AT=t=>{let e=0;const n=[];for(;Vm(t,e);){const r=sc(t,e+6);e+=10;const s=e+r;for(;e+8<s;){const i=HD(t.subarray(e)),o=KD(i);o&&n.push(o),e+=i.size+10}wT(t,e)&&(e+=10)}return n},KD=t=>t.type==="PRIV"?WD(t):t.type[0]==="W"?qD(t):zD(t),WD=t=>{if(t.size<2)return;const e=Nn(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}},zD=t=>{if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=Nn(t.data.subarray(n),!0);n+=r.length+1;const s=Nn(t.data.subarray(n));return{key:t.type,info:r,data:s}}const e=Nn(t.data.subarray(1));return{key:t.type,data:e}},qD=t=>{if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=Nn(t.data.subarray(n),!0);n+=r.length+1;const s=Nn(t.data.subarray(n));return{key:t.type,info:r,data:s}}const e=Nn(t.data);return{key:t.type,data:e}},YD=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}},Nn=(t,e=!1)=>{const n=QD();if(n){const u=n.decode(t);if(e){const c=u.indexOf("\0");return c!==-1?u.substring(0,c):u}return u.replace(/\0/g,"")}const r=t.length;let s,i,o,a="",l=0;for(;l<r;){if(s=t[l++],s===0&&e)return a;if(s===0||s===3)continue;switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(s);break;case 12:case 13:i=t[l++],a+=String.fromCharCode((s&31)<<6|i&63);break;case 14:i=t[l++],o=t[l++],a+=String.fromCharCode((s&15)<<12|(i&63)<<6|(o&63)<<0);break}}return a};let td;function QD(){if(!navigator.userAgent.includes("PlayStation 4"))return!td&&typeof self.TextDecoder<"u"&&(td=new self.TextDecoder("utf-8")),td}const bn={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}},au=Math.pow(2,32)-1,XD=[].push,RT={video:1,audio:2,id3:3,text:4};function We(t){return String.fromCharCode.apply(null,t)}function LT(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function X(t,e){const n=CT(t,e);return n<0?4294967296+n:n}function U0(t,e){let n=X(t,e);return n*=Math.pow(2,32),n+=X(t,e+4),n}function CT(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function nd(t,e,n){t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255}function JD(t){const e=t.byteLength;for(let n=0;n<e;){const r=X(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function re(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let s=0;s<r;){const i=X(t,s),o=We(t.subarray(s+4,s+8)),a=i>1?s+i:r;if(o===e[0])if(e.length===1)n.push(t.subarray(s+8,a));else{const l=re(t.subarray(s+8,a),e.slice(1));l.length&&XD.apply(n,l)}s=a}return n}function ZD(t){const e=[],n=t[0];let r=8;const s=X(t,r);r+=4;let i=0,o=0;n===0?(i=X(t,r),o=X(t,r+4),r+=8):(i=U0(t,r),o=U0(t,r+8),r+=16),r+=2;let a=t.length+o;const l=LT(t,r);r+=2;for(let u=0;u<l;u++){let c=r;const d=X(t,c);c+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return D.warn("SIDX has hierarchical references (not supported)"),null;const p=X(t,c);c+=4,e.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/s,start:a,end:a+f-1}}),a+=f,c+=4,r=c}return{earliestPresentationTime:i,timescale:s,version:n,referencesCount:l,references:e}}function kT(t){const e=[],n=re(t,["moov","trak"]);for(let s=0;s<n.length;s++){const i=n[s],o=re(i,["tkhd"])[0];if(o){let a=o[0];const l=X(o,a===0?12:20),u=re(i,["mdia","mdhd"])[0];if(u){a=u[0];const c=X(u,a===0?12:20),d=re(i,["mdia","hdlr"])[0];if(d){const f=We(d.subarray(8,12)),m={soun:ye.AUDIO,vide:ye.VIDEO}[f];if(m){const p=re(i,["mdia","minf","stbl","stsd"])[0],g=eP(p);e[l]={timescale:c,type:m},e[m]=nt({timescale:c,id:l},g)}}}}}return re(t,["moov","mvex","trex"]).forEach(s=>{const i=X(s,4),o=e[i];o&&(o.default={duration:X(s,12),flags:X(s,20)})}),e}function eP(t){const e=t.subarray(8),n=e.subarray(86),r=We(e.subarray(4,8));let s=r;const i=r==="enca"||r==="encv";if(i){const a=re(e,[r])[0].subarray(r==="enca"?28:78);re(a,["sinf"]).forEach(u=>{const c=re(u,["schm"])[0];if(c){const d=We(c.subarray(4,8));if(d==="cbcs"||d==="cenc"){const f=re(u,["frma"])[0];f&&(s=We(f))}}})}switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const o=re(n,["avcC"])[0];s+="."+ka(o[1])+ka(o[2])+ka(o[3]);break}case"mp4a":{const o=re(e,[r])[0],a=re(o.subarray(28),["esds"])[0];if(a&&a.length>12){let l=4;if(a[l++]!==3)break;l=rd(a,l),l+=2;const u=a[l++];if(u&128&&(l+=2),u&64&&(l+=a[l++]),a[l++]!==4)break;l=rd(a,l);const c=a[l++];if(c===64)s+="."+ka(c);else break;if(l+=12,a[l++]!==5)break;l=rd(a,l);const d=a[l++];let f=(d&248)>>3;f===31&&(f+=1+((d&7)<<3)+((a[l]&224)>>5)),s+="."+f}break}case"hvc1":case"hev1":{const o=re(n,["hvcC"])[0],a=o[1],l=["","A","B","C"][a>>6],u=a&31,c=X(o,2),d=(a&32)>>5?"H":"L",f=o[12],m=o.subarray(6,12);s+="."+l+u,s+="."+c.toString(16).toUpperCase(),s+="."+d+f;let p="";for(let g=m.length;g--;){const v=m[g];(v||p)&&(p="."+v.toString(16).toUpperCase()+p)}s+=p;break}case"dvh1":case"dvhe":{const o=re(n,["dvcC"])[0],a=o[2]>>1&127,l=o[2]<<5&32|o[3]>>3&31;s+="."+Tn(a)+"."+Tn(l);break}case"vp09":{const o=re(n,["vpcC"])[0],a=o[4],l=o[5],u=o[6]>>4&15;s+="."+Tn(a)+"."+Tn(l)+"."+Tn(u);break}case"av01":{const o=re(n,["av1C"])[0],a=o[1]>>>5,l=o[1]&31,u=o[2]>>>7?"H":"M",c=(o[2]&64)>>6,d=(o[2]&32)>>5,f=a===2&&c?d?12:10:c?10:8,m=(o[2]&16)>>4,p=(o[2]&8)>>3,g=(o[2]&4)>>2,v=o[2]&3;s+="."+a+"."+Tn(l)+u+"."+Tn(f)+"."+m+"."+p+g+v+"."+Tn(1)+"."+Tn(1)+"."+Tn(1)+"."+0;break}}return{codec:s,encrypted:i}}function rd(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function ka(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Tn(t){return(t<10?"0":"")+t}function tP(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&re(t,["moov","trak"]).forEach(s=>{const o=re(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=re(o,["enca"]);const l=a.length>0;l||(a=re(o,["encv"])),a.forEach(u=>{const c=l?u.subarray(28):u.subarray(78);re(c,["sinf"]).forEach(f=>{const m=IT(f);if(m){const p=m.subarray(8,24);p.some(g=>g!==0)||(D.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${bn.hexDump(p)} -> ${bn.hexDump(n)}`),m.set(n,8))}})})}),t}function IT(t){const e=re(t,["schm"])[0];if(e){const n=We(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return re(t,["schi","tenc"])[0]}return null}function nP(t,e){return re(e,["moof","traf"]).reduce((n,r)=>{const s=re(r,["tfdt"])[0],i=s[0],o=re(r,["tfhd"]).reduce((a,l)=>{const u=X(l,4),c=t[u];if(c){let d=X(s,4);if(i===1){if(d===au)return D.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;d*=au+1,d+=X(s,8)}const f=c.timescale||9e4,m=d/f;if(Y(m)&&(a===null||m<a))return m}return a},null);return o!==null&&Y(o)&&(n===null||o<n)?o:n},null)}function rP(t,e){let n=0,r=0,s=0;const i=re(t,["moof","traf"]);for(let o=0;o<i.length;o++){const a=i[o],l=re(a,["tfhd"])[0],u=X(l,4),c=e[u];if(!c)continue;const d=c.default,f=X(l,0)|(d==null?void 0:d.flags);let m=d==null?void 0:d.duration;f&8&&(f&2?m=X(l,12):m=X(l,8));const p=c.timescale||9e4,g=re(a,["trun"]);for(let v=0;v<g.length;v++){if(n=sP(g[v]),!n&&m){const y=X(g[v],4);n=m*y}c.type===ye.VIDEO?r+=n/p:c.type===ye.AUDIO&&(s+=n/p)}}if(r===0&&s===0){let o=1/0,a=0,l=0;const u=re(t,["sidx"]);for(let c=0;c<u.length;c++){const d=ZD(u[c]);if(d!=null&&d.references){o=Math.min(o,d.earliestPresentationTime/d.timescale);const f=d.references.reduce((m,p)=>m+p.info.duration||0,0);a=Math.max(a,f+d.earliestPresentationTime/d.timescale),l=a-o}}if(l&&Y(l))return l}return r||s}function sP(t){const e=X(t,0);let n=8;e&1&&(n+=4),e&4&&(n+=4);let r=0;const s=X(t,4);for(let i=0;i<s;i++){if(e&256){const o=X(t,n);r+=o,n+=4}e&512&&(n+=4),e&1024&&(n+=4),e&2048&&(n+=4)}return r}function iP(t,e,n){re(e,["moof","traf"]).forEach(r=>{re(r,["tfhd"]).forEach(s=>{const i=X(s,4),o=t[i];if(!o)return;const a=o.timescale||9e4;re(r,["tfdt"]).forEach(l=>{const u=l[0],c=n*a;if(c){let d=X(l,4);if(u===0)d-=c,d=Math.max(d,0),nd(l,4,d);else{d*=Math.pow(2,32),d+=X(l,8),d-=c,d=Math.max(d,0);const f=Math.floor(d/(au+1)),m=Math.floor(d%(au+1));nd(l,4,f),nd(l,8,m)}}})})})}function oP(t){const e={valid:null,remainder:null},n=re(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=ns(t,0,r.byteOffset-8),e.remainder=ns(t,r.byteOffset-8),e}function nn(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function B0(t,e){const n=[],r=e.samples,s=e.timescale,i=e.id;let o=!1;return re(r,["moof"]).map(l=>{const u=l.byteOffset-8;re(l,["traf"]).map(d=>{const f=re(d,["tfdt"]).map(m=>{const p=m[0];let g=X(m,4);return p===1&&(g*=Math.pow(2,32),g+=X(m,8)),g/s})[0];return f!==void 0&&(t=f),re(d,["tfhd"]).map(m=>{const p=X(m,4),g=X(m,0)&16777215,v=(g&1)!==0,y=(g&2)!==0,x=(g&8)!==0;let S=0;const w=(g&16)!==0;let E=0;const b=(g&32)!==0;let L=8;p===i&&(v&&(L+=8),y&&(L+=4),x&&(S=X(m,L),L+=4),w&&(E=X(m,L),L+=4),b&&(L+=4),e.type==="video"&&(o=aP(e.codec)),re(d,["trun"]).map(R=>{const I=R[0],C=X(R,0)&16777215,k=(C&1)!==0;let U=0;const B=(C&4)!==0,H=(C&256)!==0;let W=0;const V=(C&512)!==0;let K=0;const F=(C&1024)!==0,M=(C&2048)!==0;let O=0;const z=X(R,4);let G=8;k&&(U=X(R,G),G+=4),B&&(G+=4);let ee=U+u;for(let ne=0;ne<z;ne++){if(H?(W=X(R,G),G+=4):W=S,V?(K=X(R,G),G+=4):K=E,F&&(G+=4),M&&(I===0?O=X(R,G):O=CT(R,G),G+=4),e.type===ye.VIDEO){let ue=0;for(;ue<K;){const ce=X(r,ee);if(ee+=4,lP(o,r[ee])){const be=r.subarray(ee,ee+ce);DT(be,o?2:1,t+O/s,n)}ee+=ce,ue+=ce+4}}t+=W/s}}))})})}),n}function aP(t){if(!t)return!1;const e=t.indexOf("."),n=e<0?t:t.substring(0,e);return n==="hvc1"||n==="hev1"||n==="dvh1"||n==="dvhe"}function lP(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function DT(t,e,n,r){const s=PT(t);let i=0;i+=e;let o=0,a=0,l=0;for(;i<s.length;){o=0;do{if(i>=s.length)break;l=s[i++],o+=l}while(l===255);a=0;do{if(i>=s.length)break;l=s[i++],a+=l}while(l===255);const u=s.length-i;let c=i;if(a<u)i+=a;else if(a>u){D.error(`Malformed SEI payload. ${a} is too small, only ${u} bytes left to parse.`);break}if(o===4){if(s[c++]===181){const f=LT(s,c);if(c+=2,f===49){const m=X(s,c);if(c+=4,m===1195456820){const p=s[c++];if(p===3){const g=s[c++],v=31&g,y=64&g,x=y?2+v*3:0,S=new Uint8Array(x);if(y){S[0]=g;for(let w=1;w<x;w++)S[w]=s[c++]}r.push({type:p,payloadType:o,pts:n,bytes:S})}}}}}else if(o===5&&a>16){const d=[];for(let p=0;p<16;p++){const g=s[c++].toString(16);d.push(g.length==1?"0"+g:g),(p===3||p===5||p===7||p===9)&&d.push("-")}const f=a-16,m=new Uint8Array(f);for(let p=0;p<f;p++)m[p]=s[c++];r.push({payloadType:o,pts:n,uuid:d.join(""),userData:Nn(m),userDataBytes:m})}}}function PT(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const s=e-n.length,i=new Uint8Array(s);let o=0;for(r=0;r<s;o++,r++)o===n[0]&&(o++,n.shift()),i[r]=t[o];return i}function uP(t){const e=t[0];let n="",r="",s=0,i=0,o=0,a=0,l=0,u=0;if(e===0){for(;We(t.subarray(u,u+1))!=="\0";)n+=We(t.subarray(u,u+1)),u+=1;for(n+=We(t.subarray(u,u+1)),u+=1;We(t.subarray(u,u+1))!=="\0";)r+=We(t.subarray(u,u+1)),u+=1;r+=We(t.subarray(u,u+1)),u+=1,s=X(t,12),i=X(t,16),a=X(t,20),l=X(t,24),u=28}else if(e===1){u+=4,s=X(t,u),u+=4;const d=X(t,u);u+=4;const f=X(t,u);for(u+=4,o=2**32*d+f,LD(o)||(o=Number.MAX_SAFE_INTEGER,D.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=X(t,u),u+=4,l=X(t,u),u+=4;We(t.subarray(u,u+1))!=="\0";)n+=We(t.subarray(u,u+1)),u+=1;for(n+=We(t.subarray(u,u+1)),u+=1;We(t.subarray(u,u+1))!=="\0";)r+=We(t.subarray(u,u+1)),u+=1;r+=We(t.subarray(u,u+1)),u+=1}const c=t.subarray(u,t.byteLength);return{schemeIdUri:n,value:r,timeScale:s,presentationTime:o,presentationTimeDelta:i,eventDuration:a,id:l,payload:c}}function cP(t,...e){const n=e.length;let r=8,s=n;for(;s--;)r+=e[s].byteLength;const i=new Uint8Array(r);for(i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=r&255,i.set(t,4),s=0,r=8;s<n;s++)i.set(e[s],r),r+=e[s].byteLength;return i}function dP(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,s;r=0,s=new Uint8Array;let i;r>0?(i=new Uint8Array(4),e.length>0&&new DataView(i.buffer).setUint32(0,e.length,!1)):i=new Uint8Array;const o=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),cP([112,115,115,104],new Uint8Array([r,0,0,0]),t,i,s,o,n||new Uint8Array)}function fP(t){const e=[];if(t instanceof ArrayBuffer){const n=t.byteLength;let r=0;for(;r+32<n;){const s=new DataView(t,r),i=hP(s);e.push(i),r+=i.size}}return e}function hP(t){const e=t.getUint32(0),n=t.byteOffset,r=t.byteLength;if(r<e)return{offset:n,size:r};if(t.getUint32(4)!==1886614376)return{offset:n,size:e};const i=t.getUint32(8)>>>24;if(i!==0&&i!==1)return{offset:n,size:e};const o=t.buffer,a=bn.hexDump(new Uint8Array(o,n+12,16)),l=t.getUint32(28);let u=null,c=null;if(i===0){if(e-32<l||l<22)return{offset:n,size:e};c=new Uint8Array(o,n+32,l)}else if(i===1){if(!l||r<n+32+l*16+16)return{offset:n,size:e};u=[];for(let d=0;d<l;d++)u.push(new Uint8Array(o,n+32+d*16,16))}return{version:i,systemId:a,kids:u,data:c,offset:n,size:e}}let Ia={};class Lo{static clearKeyUriToKeyIdMap(){Ia={}}constructor(e,n,r,s=[1],i=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=s,this.iv=i,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Lt.FAIRPLAY:case Lt.WIDEVINE:case Lt.PLAYREADY:case Lt.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&D.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=mP(e);return new Lo(this.method,this.uri,"identity",this.keyFormatVersions,r)}const n=BD(this.uri);if(n)switch(this.keyFormat){case Lt.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case Lt.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=dP(r,null,n),this.keyId=TT(n);break}default:{let r=n.subarray(0,16);if(r.length!==16){const s=new Uint8Array(16);s.set(r,16-r.length),r=s}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=Ia[this.uri];if(!r){const s=Object.keys(Ia).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,s),Ia[this.uri]=r}this.keyId=r}return this}}function mP(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const NT=/\{\$([a-zA-Z0-9-_]+)\}/g;function $0(t){return NT.test(t)}function At(t,e,n){if(t.variableList!==null||t.hasVariableRefs)for(let r=n.length;r--;){const s=n[r],i=e[s];i&&(e[s]=eh(t,i))}}function eh(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(NT,r=>{const s=r.substring(2,r.length-1),i=n==null?void 0:n[s];return i===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),r):i})}return e}function V0(t,e,n){let r=t.variableList;r||(t.variableList=r={});let s,i;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const o=new self.URL(n).searchParams;if(o.has(s))i=o.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${n}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else s=e.NAME,i=e.VALUE;s in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):r[s]=i||""}function pP(t,e,n){const r=e.IMPORT;if(n&&r in n){let s=t.variableList;s||(t.variableList=s={}),s[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function fs(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function gP(t){return typeof self<"u"&&t===self.ManagedMediaSource}const lu={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function yP(t,e){const n=lu[e];return!!n&&!!n[t.slice(0,4)]}function sd(t,e,n=!0){return!t.split(",").some(r=>!_T(r,e,n))}function _T(t,e,n=!0){var r;const s=fs(n);return(r=s==null?void 0:s.isTypeSupported(Co(t,e)))!=null?r:!1}function Co(t,e){return`${e}/mp4;codecs="${t}"`}function G0(t){if(t){const e=t.substring(0,4);return lu.video[e]}return 2}function uu(t){return t.split(",").reduce((e,n)=>{const r=lu.video[n];return r?(r*2+e)/(e?3:2):(lu.audio[n]+e)/(e?2:1)},0)}const id={};function vP(t,e=!0){if(id[t])return id[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let r=0;r<n.length;r++)if(_T(n[r],"audio",e))return id[t]=n[r],n[r];return t}const xP=/flac|opus/i;function cu(t,e=!0){return t.replace(xP,n=>vP(n.toLowerCase(),e))}function H0(t,e){return t&&t!=="mp4a"?t:e&&e.split(",")[0]}function SP(t){const e=t.split(",");for(let n=0;n<e.length;n++){const r=e[n].split(".");if(r.length>2){let s=r.shift()+".";s+=parseInt(r.shift()).toString(16),s+=("000"+parseInt(r.shift()).toString(16)).slice(-4),e[n]=s}}return e.join(",")}const K0=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,W0=/#EXT-X-MEDIA:(.*)/g,EP=/^#EXT(?:INF|-X-TARGETDURATION):/m,z0=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),TP=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class kn{static findGroup(e,n){for(let r=0;r<e.length;r++){const s=e[r];if(s.id===n)return s}}static resolve(e,n){return Bm.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return EP.test(e)}static parseMasterPlaylist(e,n){const r=$0(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},i=[];K0.lastIndex=0;let o;for(;(o=K0.exec(e))!=null;)if(o[1]){var a;const u=new Ie(o[1]);At(s,u,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const c=eh(s,o[2]),d={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:kn.resolve(c,n)},f=u.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),wP(u.CODECS,d),(a=d.unknownCodecs)!=null&&a.length||i.push(d),s.levels.push(d)}else if(o[3]){const u=o[3],c=o[4];switch(u){case"SESSION-DATA":{const d=new Ie(c);At(s,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const f=d["DATA-ID"];f&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[f]=d);break}case"SESSION-KEY":{const d=q0(c,n,s);d.encrypted&&d.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(d)):D.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const d=new Ie(c);At(s,d,["NAME","VALUE","QUERYPARAM"]),V0(s,d,n)}break}case"CONTENT-STEERING":{const d=new Ie(c);At(s,d,["SERVER-URI","PATHWAY-ID"]),s.contentSteering={uri:kn.resolve(d["SERVER-URI"],n),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=Y0(c);break}}}const l=i.length>0&&i.length<s.levels.length;return s.levels=l?i:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,n,r){let s;const i={},o=r.levels,a={AUDIO:o.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:o.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(W0.lastIndex=0;(s=W0.exec(e))!==null;){const u=new Ie(s[1]),c=u.TYPE;if(c){const d=a[c],f=i[c]||[];i[c]=f,At(r,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const m=u.LANGUAGE,p=u["ASSOC-LANGUAGE"],g=u.CHANNELS,v=u.CHARACTERISTICS,y=u["INSTREAM-ID"],x={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||m||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:m,url:u.URI?kn.resolve(u.URI,n):""};if(p&&(x.assocLang=p),g&&(x.channels=g),v&&(x.characteristics=v),y&&(x.instreamId=y),d!=null&&d.length){const S=kn.findGroup(d,x.groupId)||d[0];Q0(x,S,"audioCodec"),Q0(x,S,"textCodec")}f.push(x)}}return i}static parseLevelPlaylist(e,n,r,s,i,o){const a=new FD(n),l=a.fragments;let u=null,c=0,d=0,f=0,m=0,p=null,g=new Xc(s,n),v,y,x,S=-1,w=!1,E=null;for(z0.lastIndex=0,a.m3u8=e,a.hasVariableRefs=$0(e);(v=z0.exec(e))!==null;){w&&(w=!1,g=new Xc(s,n),g.start=f,g.sn=c,g.cc=m,g.level=r,u&&(g.initSegment=u,g.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null,E&&(g.setByteRange(E),E=null)));const I=v[1];if(I){g.duration=parseFloat(I);const C=(" "+v[2]).slice(1);g.title=C||null,g.tagList.push(C?["INF",I,C]:["INF",I])}else if(v[3]){if(Y(g.duration)){g.start=f,x&&Z0(g,x,a),g.sn=c,g.level=r,g.cc=m,l.push(g);const C=(" "+v[3]).slice(1);g.relurl=eh(a,C),X0(g,p),p=g,f+=g.duration,c++,d=0,w=!0}}else if(v[4]){const C=(" "+v[4]).slice(1);p?g.setByteRange(C,p):g.setByteRange(C)}else if(v[5])g.rawProgramDateTime=(" "+v[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),S===-1&&(S=l.length);else{if(v=v[0].match(TP),!v){D.warn("No matches on slow regex match for level playlist!");continue}for(y=1;y<v.length&&!(typeof v[y]<"u");y++);const C=(" "+v[y]).slice(1),k=(" "+v[y+1]).slice(1),U=v[y+2]?(" "+v[y+2]).slice(1):"";switch(C){case"PLAYLIST-TYPE":a.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":c=a.startSN=parseInt(k);break;case"SKIP":{const B=new Ie(k);At(a,B,["RECENTLY-REMOVED-DATERANGES"]);const H=B.decimalInteger("SKIPPED-SEGMENTS");if(Y(H)){a.skippedSegments=H;for(let V=H;V--;)l.unshift(null);c+=H}const W=B.enumeratedString("RECENTLY-REMOVED-DATERANGES");W&&(a.recentlyRemovedDateranges=W.split("	"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(k),1);break;case"VERSION":a.version=parseInt(k);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(k||U)&&g.tagList.push(U?[k,U]:[k]);break;case"DISCONTINUITY":m++,g.tagList.push(["DIS"]);break;case"GAP":g.gap=!0,g.tagList.push([C]);break;case"BITRATE":g.tagList.push([C,k]);break;case"DATERANGE":{const B=new Ie(k);At(a,B,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),At(a,B,B.clientAttrs);const H=new xT(B,a.dateRanges[B.ID]);H.isValid||a.skippedSegments?a.dateRanges[H.id]=H:D.warn(`Ignoring invalid DATERANGE tag: "${k}"`),g.tagList.push(["EXT-X-DATERANGE",k]);break}case"DEFINE":{{const B=new Ie(k);At(a,B,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in B?pP(a,B,o):V0(a,B,n)}break}case"DISCONTINUITY-SEQUENCE":m=parseInt(k);break;case"KEY":{const B=q0(k,n,a);if(B.isSupported()){if(B.method==="NONE"){x=void 0;break}x||(x={}),x[B.keyFormat]&&(x=Ke({},x)),x[B.keyFormat]=B}else D.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${k}"`);break}case"START":a.startTimeOffset=Y0(k);break;case"MAP":{const B=new Ie(k);if(At(a,B,["BYTERANGE","URI"]),g.duration){const H=new Xc(s,n);J0(H,B,r,x),u=H,g.initSegment=u,u.rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=u.rawProgramDateTime)}else{const H=g.byteRangeEndOffset;if(H){const W=g.byteRangeStartOffset;E=`${H-W}@${W}`}else E=null;J0(g,B,r,x),u=g,w=!0}break}case"SERVER-CONTROL":{const B=new Ie(k);a.canBlockReload=B.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=B.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&B.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=B.optionalFloat("PART-HOLD-BACK",0),a.holdBack=B.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const B=new Ie(k);a.partTarget=B.decimalFloatingPoint("PART-TARGET");break}case"PART":{let B=a.partList;B||(B=a.partList=[]);const H=d>0?B[B.length-1]:void 0,W=d++,V=new Ie(k);At(a,V,["BYTERANGE","URI"]);const K=new OD(V,g,n,W,H);B.push(K),g.duration+=K.duration;break}case"PRELOAD-HINT":{const B=new Ie(k);At(a,B,["URI"]),a.preloadHint=B;break}case"RENDITION-REPORT":{const B=new Ie(k);At(a,B,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(B);break}default:D.warn(`line parsed but not handled: ${v}`);break}}}p&&!p.relurl?(l.pop(),f-=p.duration,a.partList&&(a.fragmentHint=p)):a.partList&&(X0(g,p),g.cc=m,a.fragmentHint=g,x&&Z0(g,x,a));const b=l.length,L=l[0],R=l[b-1];if(f+=a.skippedSegments*a.targetduration,f>0&&b&&R){a.averagetargetduration=f/b;const I=R.sn;a.endSN=I!=="initSegment"?I:0,a.live||(R.endList=!0),L&&(a.startCC=L.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(f+=a.fragmentHint.duration),a.totalduration=f,a.endCC=m,S>0&&bP(l,S),a}}function q0(t,e,n){var r,s;const i=new Ie(t);At(n,i,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=(r=i.METHOD)!=null?r:"",a=i.URI,l=i.hexadecimalInteger("IV"),u=i.KEYFORMATVERSIONS,c=(s=i.KEYFORMAT)!=null?s:"identity";a&&i.IV&&!l&&D.error(`Invalid IV: ${i.IV}`);const d=a?kn.resolve(a,e):"",f=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Lo(o,d,c,f,l)}function Y0(t){const n=new Ie(t).decimalFloatingPoint("TIME-OFFSET");return Y(n)?n:null}function wP(t,e){let n=(t||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const s=n.filter(i=>yP(i,r));s.length&&(e[`${r}Codec`]=s.join(","),n=n.filter(i=>s.indexOf(i)===-1))}),e.unknownCodecs=n}function Q0(t,e,n){const r=e[n];r&&(t[n]=r)}function bP(t,e){let n=t[e];for(let r=e;r--;){const s=t[r];if(!s)return;s.programDateTime=n.programDateTime-s.duration*1e3,n=s}}function X0(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Y(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function J0(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function Z0(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&r.push(t)}var fe={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},J={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function ey(t){const{type:e}=t;switch(e){case fe.AUDIO_TRACK:return J.AUDIO;case fe.SUBTITLE_TRACK:return J.SUBTITLE;default:return J.MAIN}}function od(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class AP{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.LEVEL_LOADING,this.onLevelLoading,this),e.on(T.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(T.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.LEVEL_LOADING,this.onLevelLoading,this),e.off(T.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(T.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,s=n.loader,i=r||s,o=new i(n);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:fe.MANIFEST,url:r,deliveryDirectives:null})}onLevelLoading(e,n){const{id:r,level:s,pathwayId:i,url:o,deliveryDirectives:a}=n;this.load({id:r,level:s,pathwayId:i,responseType:"text",type:fe.LEVEL,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,n){const{id:r,groupId:s,url:i,deliveryDirectives:o}=n;this.load({id:r,groupId:s,level:null,responseType:"text",type:fe.AUDIO_TRACK,url:i,deliveryDirectives:o})}onSubtitleTrackLoading(e,n){const{id:r,groupId:s,url:i,deliveryDirectives:o}=n;this.load({id:r,groupId:s,level:null,responseType:"text",type:fe.SUBTITLE_TRACK,url:i,deliveryDirectives:o})}load(e){var n;const r=this.hls.config;let s=this.getInternalLoader(e);if(s){const u=s.context;if(u&&u.url===e.url&&u.level===e.level){D.trace("[playlist-loader]: playlist request ongoing");return}D.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let i;if(e.type===fe.MANIFEST?i=r.manifestLoadPolicy.default:i=Ke({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),Y((n=e.deliveryDirectives)==null?void 0:n.part)){let u;if(e.type===fe.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===fe.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===fe.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const c=u.partTarget,d=u.targetduration;if(c&&d){const f=Math.max(c*3,d*.8)*1e3;i=Ke({},i,{maxTimeToFirstByteMs:Math.min(f,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,i.maxTimeToFirstByteMs)})}}}const o=i.errorRetry||i.timeoutRetry||{},a={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(u,c,d,f)=>{const m=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=u.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(u,d,new Error("no EXTM3U delimiter"),f||null,c);return}c.parsing.start=performance.now(),kn.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(u,c,d,f||null,m):this.handleMasterPlaylist(u,c,d,f)},onError:(u,c,d,f)=>{this.handleNetworkError(c,d,!1,u,f)},onTimeout:(u,c,d)=>{this.handleNetworkError(c,d,!0,void 0,u)}};s.load(e,a,l)}handleMasterPlaylist(e,n,r,s){const i=this.hls,o=e.data,a=od(e,r),l=kn.parseMasterPlaylist(o,a);if(l.playlistParsingError){this.handleManifestParsingError(e,r,l.playlistParsingError,s,n);return}const{contentSteering:u,levels:c,sessionData:d,sessionKeys:f,startTimeOffset:m,variableList:p}=l;this.variableList=p;const{AUDIO:g=[],SUBTITLES:v,"CLOSED-CAPTIONS":y}=kn.parseMasterPlaylistMedia(o,a,l);g.length&&!g.some(S=>!S.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(D.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Ie({}),bitrate:0,url:""})),i.trigger(T.MANIFEST_LOADED,{levels:c,audioTracks:g,subtitles:v,captions:y,contentSteering:u,url:a,stats:n,networkDetails:s,sessionData:d,sessionKeys:f,startTimeOffset:m,variableList:p})}handleTrackOrLevelPlaylist(e,n,r,s,i){const o=this.hls,{id:a,level:l,type:u}=r,c=od(e,r),d=0,f=Y(l)?l:Y(a)?a:0,m=ey(r),p=kn.parseLevelPlaylist(e.data,c,f,m,d,this.variableList);if(u===fe.MANIFEST){const g={attrs:new Ie({}),bitrate:0,details:p,name:"",url:c};o.trigger(T.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:c,stats:n,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=p,this.handlePlaylistLoaded(p,e,n,r,s,i)}handleManifestParsingError(e,n,r,s,i){this.hls.trigger(T.ERROR,{type:te.NETWORK_ERROR,details:N.MANIFEST_PARSING_ERROR,fatal:n.type===fe.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:s,stats:i})}handleNetworkError(e,n,r=!1,s,i){let o=`A network ${r?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===fe.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===fe.AUDIO_TRACK||e.type===fe.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);D.warn(`[playlist-loader]: ${o}`);let l=N.UNKNOWN,u=!1;const c=this.getInternalLoader(e);switch(e.type){case fe.MANIFEST:l=r?N.MANIFEST_LOAD_TIMEOUT:N.MANIFEST_LOAD_ERROR,u=!0;break;case fe.LEVEL:l=r?N.LEVEL_LOAD_TIMEOUT:N.LEVEL_LOAD_ERROR,u=!1;break;case fe.AUDIO_TRACK:l=r?N.AUDIO_TRACK_LOAD_TIMEOUT:N.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case fe.SUBTITLE_TRACK:l=r?N.SUBTITLE_TRACK_LOAD_TIMEOUT:N.SUBTITLE_LOAD_ERROR,u=!1;break}c&&this.resetInternalLoader(e.type);const d={type:te.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:c,context:e,error:a,networkDetails:n,stats:i};if(s){const f=(n==null?void 0:n.url)||e.url;d.response=nt({url:f,data:void 0},s)}this.hls.trigger(T.ERROR,d)}handlePlaylistLoaded(e,n,r,s,i,o){const a=this.hls,{type:l,level:u,id:c,groupId:d,deliveryDirectives:f}=s,m=od(n,s),p=ey(s),g=typeof s.level=="number"&&p===J.MAIN?u:void 0;if(!e.fragments.length){const y=new Error("No Segments found in Playlist");a.trigger(T.ERROR,{type:te.NETWORK_ERROR,details:N.LEVEL_EMPTY_ERROR,fatal:!1,url:m,error:y,reason:y.message,response:n,context:s,level:g,parent:p,networkDetails:i,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const v=e.playlistParsingError;if(v){a.trigger(T.ERROR,{type:te.NETWORK_ERROR,details:N.LEVEL_PARSING_ERROR,fatal:!1,url:m,error:v,reason:v.message,response:n,context:s,level:g,parent:p,networkDetails:i,stats:r});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case fe.MANIFEST:case fe.LEVEL:a.trigger(T.LEVEL_LOADED,{details:e,level:g||0,id:c||0,stats:r,networkDetails:i,deliveryDirectives:f});break;case fe.AUDIO_TRACK:a.trigger(T.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:f});break;case fe.SUBTITLE_TRACK:a.trigger(T.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:f});break}}}function OT(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function MT(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){D.debug(`[texttrack-utils]: ${r}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,t.addCue(s)}catch(s){D.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}n==="disabled"&&(t.mode=n)}function Fs(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)t.removeCue(t.cues[n]);e==="disabled"&&(t.mode=e)}function th(t,e,n,r){const s=t.mode;if(s==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const i=LP(t.cues,e,n);for(let o=0;o<i.length;o++)(!r||r(i[o]))&&t.removeCue(i[o])}s==="disabled"&&(t.mode=s)}function RP(t,e){if(e<t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,s=n;for(;r<=s;){const i=Math.floor((s+r)/2);if(e<t[i].startTime)s=i-1;else if(e>t[i].startTime&&r<n)r=i+1;else return i}return t[r].startTime-e<e-t[s].startTime?r:s}function LP(t,e,n){const r=[],s=RP(t,e);if(s>-1)for(let i=s,o=t.length;i<o;i++){const a=t[i];if(a.startTime>=e&&a.endTime<=n)r.push(a);else if(a.startTime>n)return r}return r}function fl(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}var hn={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const CP=.25;function nh(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function ty(t,e,n,r,s){let i=new t(e,n,"");try{i.value=r,s&&(i.type=s)}catch{i=new t(e,n,JSON.stringify(s?nt({type:s},r):r))}return i}const Da=(()=>{const t=nh();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function ad(t,e){return t.getTime()/1e3-e}function kP(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class IP{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(T.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(T.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,n){this.media=n.media}onMediaDetaching(){this.id3Track&&(Fs(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return OT(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:s}}}=this;if(!r&&!s)return;const{samples:i}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=nh();if(o)for(let a=0;a<i.length;a++){const l=i[a].type;if(l===hn.emsg&&!r||!s)continue;const u=AT(i[a].data);if(u){const c=i[a].pts;let d=c+i[a].duration;d>Da&&(d=Da),d-c<=0&&(d=c+CP);for(let m=0;m<u.length;m++){const p=u[m];if(!bT(p)){this.updateId3CueEnds(c,l);const g=ty(o,c,d,p,l);g&&this.id3Track.addCue(g)}}}}}updateId3CueEnds(e,n){var r;const s=(r=this.id3Track)==null?void 0:r.cues;if(s)for(let i=s.length;i--;){const o=s[i];o.type===n&&o.startTime<e&&o.endTime===Da&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:s}){const{id3Track:i,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(i&&(a||l)){let u;s==="audio"?u=c=>c.type===hn.audioId3&&l:s==="video"?u=c=>c.type===hn.emsg&&a:u=c=>c.type===hn.audioId3&&l||c.type===hn.emsg&&a,th(i,n,r,u)}}onLevelUpdated(e,{details:n}){if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:s}=this,{dateRanges:i}=n,o=Object.keys(i);if(s){const c=Object.keys(r).filter(d=>!o.includes(d));for(let d=c.length;d--;){const f=c[d];Object.keys(r[f].cues).forEach(m=>{s.removeCue(r[f].cues[m])}),delete r[f]}}const a=n.fragments[n.fragments.length-1];if(o.length===0||!Y(a==null?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=a.programDateTime/1e3-a.start,u=nh();for(let c=0;c<o.length;c++){const d=o[c],f=i[d],m=ad(f.startDate,l),p=r[d],g=(p==null?void 0:p.cues)||{};let v=(p==null?void 0:p.durationKnown)||!1,y=Da;const x=f.endDate;if(x)y=ad(x,l),v=!0;else if(f.endOnNext&&!v){const w=o.reduce((E,b)=>{if(b!==f.id){const L=i[b];if(L.class===f.class&&L.startDate>f.startDate&&(!E||f.startDate<E.startDate))return L}return E},null);w&&(y=ad(w.startDate,l),v=!0)}const S=Object.keys(f.attr);for(let w=0;w<S.length;w++){const E=S[w];if(!ND(E))continue;const b=g[E];if(b)v&&!p.durationKnown&&(b.endTime=y);else if(u){let L=f.attr[E];_D(E)&&(L=kP(L));const R=ty(u,m,y,{key:E,data:L},hn.dateRange);R&&(R.id=d,this.id3Track.addCue(R),g[E]=R)}}r[d]={cues:g,dateRange:f,durationKnown:v}}}}class DP{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:n}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:n,partHoldBack:r,targetduration:s}=e,{liveSyncDuration:i,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let u=a&&r||n;(l.liveSyncDuration||l.liveSyncDurationCount||u===0)&&(u=i!==void 0?i:o*s);const c=s;return u+Math.min(this.stallCount*1,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency,r=this.levelDetails;if(e===null||n===null||r===null)return null;const s=r.edge,i=e-n-this.edgeStalled,o=s-r.totalduration,a=s-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(o,i),a)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e,levelDetails:n}=this;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(T.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(T.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(T.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(T.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(T.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(T.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,n){var r;n.details===N.BUFFER_STALLED_ERROR&&(this.stallCount++,(r=this.levelDetails)!=null&&r.live&&D.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:n}=this;if(!e||!n)return;this.currentTime=e.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:i}=this.config;if(!s||i===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const a=r-o,l=Math.min(this.maxLatency,o+n.targetduration);if(a<l&&a>.05&&this.forwardBufferLength>1){const c=Math.min(2,Math.max(1,i)),d=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(c,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const rh=["NONE","TYPE-0","TYPE-1",null];function PP(t){return rh.indexOf(t)>-1}const du=["SDR","PQ","HLG"];function NP(t){return!!t&&du.indexOf(t)>-1}var hl={No:"",Yes:"YES",v2:"v2"};function ny(t){const{canSkipUntil:e,canSkipDateRanges:n,age:r}=t,s=r<e/2;return e&&s?n?hl.v2:hl.Yes:hl.No}class ry{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class li{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return sy(this._audioGroups,e)}hasSubtitleGroup(e){return sy(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function sy(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function ld(t,e){const n=e.startPTS;if(Y(n)){let r=0,s;e.sn>t.sn?(r=n-t.start,s=t):(r=t.start-n,s=e),s.duration!==r&&(s.duration=r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function FT(t,e,n,r,s,i){r-n<=0&&(D.warn("Fragment should have a positive duration",e),r=n+e.duration,i=s+e.duration);let a=n,l=r;const u=e.startPTS,c=e.endPTS;if(Y(u)){const v=Math.abs(u-n);Y(e.deltaPTS)?e.deltaPTS=Math.max(v,e.deltaPTS):e.deltaPTS=v,a=Math.max(n,u),n=Math.min(n,u),s=Math.min(s,e.startDTS),l=Math.min(r,c),r=Math.max(r,c),i=Math.max(i,e.endDTS)}const d=n-e.start;e.start!==0&&(e.start=n),e.duration=r-e.start,e.startPTS=n,e.maxStartPTS=a,e.startDTS=s,e.endPTS=r,e.minEndPTS=l,e.endDTS=i;const f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;let m;const p=f-t.startSN,g=t.fragments;for(g[p]=e,m=p;m>0;m--)ld(g[m],g[m-1]);for(m=p;m<g.length-1;m++)ld(g[m],g[m+1]);return t.fragmentHint&&ld(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,d}function _P(t,e){let n=null;const r=t.fragments;for(let a=r.length-1;a>=0;a--){const l=r[a].initSegment;if(l){n=l;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s;FP(t,e,(a,l,u,c)=>{if(e.skippedSegments&&l.cc!==a.cc){const d=a.cc-l.cc;for(let f=u;f<c.length;f++)c[f].cc+=d}Y(a.startPTS)&&Y(a.endPTS)&&(l.start=l.startPTS=a.startPTS,l.startDTS=a.startDTS,l.maxStartPTS=a.maxStartPTS,l.endPTS=a.endPTS,l.endDTS=a.endDTS,l.minEndPTS=a.minEndPTS,l.duration=a.endPTS-a.startPTS,l.duration&&(s=l),e.PTSKnown=e.alignedSliding=!0),l.elementaryStreams=a.elementaryStreams,l.loader=a.loader,l.stats=a.stats,a.initSegment&&(l.initSegment=a.initSegment,n=a.initSegment)});const i=e.fragments;if(n&&(e.fragmentHint?i.concat(e.fragmentHint):i).forEach(l=>{var u;l&&(!l.initSegment||l.initSegment.relurl===((u=n)==null?void 0:u.relurl))&&(l.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=i.some(a=>!a),e.deltaUpdateFailed){D.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let a=e.skippedSegments;a--;)i.shift();e.startSN=i[0].sn}else e.canSkipDateRanges&&(e.dateRanges=OP(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));e.startCC=e.fragments[0].cc,e.endCC=i[i.length-1].cc}MP(t.partList,e.partList,(a,l)=>{l.elementaryStreams=a.elementaryStreams,l.stats=a.stats}),s?FT(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):jT(t,e),i.length&&(e.totalduration=e.edge-i[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const a=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=a),e.driftEndTime=o,e.driftEnd=a}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function OP(t,e,n){const r=Ke({},t);return n&&n.forEach(s=>{delete r[s]}),Object.keys(e).forEach(s=>{const i=new xT(e[s].attr,r[s]);i.isValid?r[s]=i:D.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[s].attr)}"`)}),r}function MP(t,e,n){if(t&&e){let r=0;for(let s=0,i=t.length;s<=i;s++){const o=t[s],a=e[s+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}function FP(t,e,n){const r=e.skippedSegments,s=Math.max(t.startSN,e.startSN)-e.startSN,i=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=s;u<=i;u++){const c=l[o+u];let d=a[u];r&&!d&&u<r&&(d=e.fragments[u]=c),c&&d&&n(c,d,u,a)}}function jT(t,e){const n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments;n<0||n>=r.length||sh(e,r[n].start)}function sh(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function jP(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments;if(r.length&&n*4>e){const i=r[r.length-1].duration*1e3;i<n&&(n=i)}}else n/=2;return Math.round(n)}function UP(t,e,n){if(!(t!=null&&t.details))return null;const r=t.details;let s=r.fragments[e-r.startSN];return s||(s=r.fragmentHint,s&&s.sn===e)?s:e<r.startSN&&n&&n.sn===e?n:null}function iy(t,e,n){var r;return t!=null&&t.details?UT((r=t.details)==null?void 0:r.partList,e,n):null}function UT(t,e,n){if(t)for(let r=t.length;r--;){const s=t[r];if(s.index===n&&s.fragment.sn===e)return s}return null}function BT(t){t.forEach((e,n)=>{const{details:r}=e;r!=null&&r.fragments&&r.fragments.forEach(s=>{s.level=n})})}function fu(t){switch(t.details){case N.FRAG_LOAD_TIMEOUT:case N.KEY_LOAD_TIMEOUT:case N.LEVEL_LOAD_TIMEOUT:case N.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function oy(t,e){const n=fu(e);return t.default[`${n?"timeout":"error"}Retry`]}function Hm(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function ay(t){return nt(nt({},t),{errorRetry:null,timeoutRetry:null})}function hu(t,e,n,r){if(!t)return!1;const s=r==null?void 0:r.code,i=e<t.maxNumRetry&&(BP(s)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,i):i}function BP(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const $T={search:function(t,e){let n=0,r=t.length-1,s=null,i=null;for(;n<=r;){s=(n+r)/2|0,i=t[s];const o=e(i);if(o>0)n=s+1;else if(o<0)r=s-1;else return i}return null}};function $P(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!Y(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const s=t[t.length-1].endProgramDateTime;if(e>=(s||0))return null;n=n||0;for(let i=0;i<t.length;++i){const o=t[i];if(GP(e,n,o))return o}return null}function mu(t,e,n=0,r=0,s=.005){let i=null;if(t){i=e[t.sn-e[0].sn+1]||null;const a=t.endDTS-n;a>0&&a<15e-7&&(n+=15e-7)}else n===0&&e[0].start===0&&(i=e[0]);if(i&&((!t||t.level===i.level)&&ih(n,r,i)===0||VP(i,t,Math.min(s,r))))return i;const o=$T.search(e,ih.bind(null,n,r));return o&&(o!==t||!i)?o:i}function VP(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((s,i)=>(i[0]==="INF"&&(s+=parseFloat(i[1])),s),n);return t.start<=r}return!1}function ih(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function GP(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function HP(t,e){return $T.search(t,n=>n.cc<e?1:n.cc>e?-1:0)}var st={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},an={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class KP{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=D.log.bind(D,"[info]:"),this.warn=D.warn.bind(D,"[warning]:"),this.error=D.error.bind(D,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(T.ERROR,this.onError,this),e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(T.ERROR,this.onError,this),e.off(T.ERROR,this.onErrorOut,this),e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===J.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r,s;if(n.fatal)return;const i=this.hls,o=n.context;switch(n.details){case N.FRAG_LOAD_ERROR:case N.FRAG_LOAD_TIMEOUT:case N.KEY_LOAD_ERROR:case N.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case N.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction={action:st.DoNothing,flags:an.None};return}case N.FRAG_GAP:case N.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=st.SendAlternateToPenaltyBox;return}case N.LEVEL_EMPTY_ERROR:case N.LEVEL_PARSING_ERROR:{var a,l;const u=n.parent===J.MAIN?n.level:i.loadLevel;n.details===N.LEVEL_EMPTY_ERROR&&((a=n.context)!=null&&(l=a.levelDetails)!=null&&l.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,u):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,u))}return;case N.LEVEL_LOAD_ERROR:case N.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,o.level));return;case N.AUDIO_TRACK_LOAD_ERROR:case N.AUDIO_TRACK_LOAD_TIMEOUT:case N.SUBTITLE_LOAD_ERROR:case N.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const u=i.levels[i.loadLevel];if(u&&(o.type===fe.AUDIO_TRACK&&u.hasAudioGroup(o.groupId)||o.type===fe.SUBTITLE_TRACK&&u.hasSubtitleGroup(o.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,i.loadLevel),n.errorAction.action=st.SendAlternateToPenaltyBox,n.errorAction.flags=an.MoveAllAlternatesMatchingHost;return}}return;case N.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=i.levels[i.loadLevel],c=u==null?void 0:u.attrs["HDCP-LEVEL"];c?n.errorAction={action:st.SendAlternateToPenaltyBox,flags:an.MoveAllAlternatesMatchingHDCP,hdcpLevel:c}:this.keySystemError(n)}return;case N.BUFFER_ADD_CODEC_ERROR:case N.REMUX_ALLOC_ERROR:case N.BUFFER_APPEND_ERROR:n.errorAction=this.getLevelSwitchAction(n,(s=n.level)!=null?s:i.loadLevel);return;case N.INTERNAL_EXCEPTION:case N.BUFFER_APPENDING_ERROR:case N.BUFFER_FULL_ERROR:case N.LEVEL_SWITCH_ERROR:case N.BUFFER_STALLED_ERROR:case N.BUFFER_SEEK_OVER_HOLE:case N.BUFFER_NUDGE_ON_STALL:n.errorAction={action:st.DoNothing,flags:an.None};return}n.type===te.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,s=oy(r.config.playlistLoadPolicy,e),i=this.playlistError++;if(hu(s,i,fu(e),e.response))return{action:st.RetryRequest,flags:an.None,retryConfig:s,retryCount:i};const a=this.getLevelSwitchAction(e,n);return s&&(a.retryConfig=s,a.retryCount=i),a}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),s=n.levels[r],{fragLoadPolicy:i,keyLoadPolicy:o}=n.config,a=oy(e.details.startsWith("key")?o:i,e),l=n.levels.reduce((c,d)=>c+d.fragmentError,0);if(s&&(e.details!==N.FRAG_GAP&&s.fragmentError++,hu(a,l,fu(e),e.response)))return{action:st.RetryRequest,flags:an.None,retryConfig:a,retryCount:l};const u=this.getLevelSwitchAction(e,r);return a&&(u.retryConfig=a,u.retryCount=l),u}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const s=this.hls.levels[n];if(s){var i,o;const u=e.details;s.loadError++,u===N.BUFFER_APPEND_ERROR&&s.fragmentError++;let c=-1;const{levels:d,loadLevel:f,minAutoLevel:m,maxAutoLevel:p}=r;r.autoLevelEnabled||(r.loadLevel=-1);const g=(i=e.frag)==null?void 0:i.type,y=(g===J.AUDIO&&u===N.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===N.BUFFER_ADD_CODEC_ERROR||u===N.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:b})=>s.audioCodec!==b),S=e.sourceBufferName==="video"&&(u===N.BUFFER_ADD_CODEC_ERROR||u===N.BUFFER_APPEND_ERROR)&&d.some(({codecSet:b,audioCodec:L})=>s.codecSet!==b&&s.audioCodec===L),{type:w,groupId:E}=(o=e.context)!=null?o:{};for(let b=d.length;b--;){const L=(b+f)%d.length;if(L!==f&&L>=m&&L<=p&&d[L].loadError===0){var a,l;const R=d[L];if(u===N.FRAG_GAP&&g===J.MAIN&&e.frag){const I=d[L].details;if(I){const C=mu(e.frag,I.fragments,e.frag.start);if(C!=null&&C.gap)continue}}else{if(w===fe.AUDIO_TRACK&&R.hasAudioGroup(E)||w===fe.SUBTITLE_TRACK&&R.hasSubtitleGroup(E))continue;if(g===J.AUDIO&&(a=s.audioGroups)!=null&&a.some(I=>R.hasAudioGroup(I))||g===J.SUBTITLE&&(l=s.subtitleGroups)!=null&&l.some(I=>R.hasSubtitleGroup(I))||y&&s.audioCodec===R.audioCodec||!y&&s.audioCodec!==R.audioCodec||S&&s.codecSet===R.codecSet)continue}c=L;break}}if(c>-1&&r.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:st.SendAlternateToPenaltyBox,flags:an.None,nextAutoLevel:c}}return{action:st.SendAlternateToPenaltyBox,flags:an.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case st.DoNothing:break;case st.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==N.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:s,hdcpLevel:i,nextAutoLevel:o}=r;switch(s){case an.None:this.switchLevel(e,o);break;case an.MoveAllAlternatesMatchingHDCP:i&&(n.maxHdcpLevel=rh[rh.indexOf(i)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,o)}switchLevel(e,n){n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class Km{constructor(e,n){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=D.log.bind(D,`${n}:`),this.warn=D.warn.bind(D,`${n}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,r){const s=n==null?void 0:n.renditionReports;if(s){let i=-1;for(let o=0;o<s.length;o++){const a=s[o];let l;try{l=new self.URL(a.URI,n.url).href}catch(u){D.warn(`Could not construct new URL for Rendition Report: ${u}`),l=a.URI||""}if(l===e){i=o;break}else l===e.substring(0,l.length)&&(i=o)}if(i!==-1){const o=s[i],a=parseInt(o["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let l=parseInt(o["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const c=Math.min(n.age-n.partTarget,n.targetduration);l>=0&&c>n.partTarget&&(l+=1)}const u=r&&ny(r);return new ry(a,l>=0?l:void 0,u)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,n,r){const{details:s,stats:i}=n,o=self.performance.now(),a=i.loading.first?Math.max(0,o-i.loading.first):0;if(s.advancedDateTime=Date.now()-a,s.live||r!=null&&r.live){if(s.reloaded(r),r&&this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),r&&s.fragments.length>0&&_P(r,s),!this.canLoad||!s.live)return;let l,u,c;if(s.canBlockReload&&s.endSN&&s.advanced){const v=this.hls.config.lowLatencyMode,y=s.lastPartSn,x=s.endSN,S=s.lastPartIndex,w=S!==-1,E=y===x,b=v?0:S;w?(u=E?x+1:y,c=E?b:S+1):u=x+1;const L=s.age,R=L+s.ageHeader;let I=Math.min(R-s.partTarget,s.targetduration*1.5);if(I>0){if(r&&I>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${I} with playlist age: ${s.age}`),I=0;else{const C=Math.floor(I/s.targetduration);if(u+=C,c!==void 0){const k=Math.round(I%s.targetduration/s.partTarget);c+=k}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${L.toFixed(2)}s goal: ${I} skip sn ${C} to part ${c}`)}s.tuneInGoal=I}if(l=this.getDeliveryDirectives(s,n.deliveryDirectives,u,c),v||!E){this.loadPlaylist(l);return}}else(s.canBlockReload||s.canSkipUntil)&&(l=this.getDeliveryDirectives(s,n.deliveryDirectives,u,c));const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,m=(s.edge-f)*1e3,p=jP(s,m);s.updated&&o>this.requestScheduled+p&&(this.requestScheduled=i.loading.start),u!==void 0&&s.canBlockReload?this.requestScheduled=i.loading.first+p-(s.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=p);let g=this.requestScheduled-o;g=Math.max(0,g),this.log(`reload live playlist ${e} in ${Math.round(g)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),g)}else this.clearTimer()}getDeliveryDirectives(e,n,r,s){let i=ny(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,s=n.part,i=hl.No),new ry(r,s,i)}checkRetry(e){const n=e.details,r=fu(e),s=e.errorAction,{action:i,retryCount:o=0,retryConfig:a}=s||{},l=!!s&&!!a&&(i===st.RetryRequest||!s.resolved&&i===st.SendAlternateToPenaltyBox);if(l){var u;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(r&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const c=Hm(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" in ${c}ms`)}e.levelRetry=!0,s.resolved=!0}return l}}class Es{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class WP{constructor(e,n,r,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Es(e),this.fast_=new Es(n),this.defaultTTFB_=s,this.ttfb_=new Es(e)}update(e,n){const{slow_:r,fast_:s,ttfb_:i}=this;r.halfLife!==e&&(this.slow_=new Es(e,r.getEstimate(),r.getTotalWeight())),s.halfLife!==n&&(this.fast_=new Es(n,s.getEstimate(),s.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Es(e,i.getEstimate(),i.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,s=e/1e3,i=r/s;this.fast_.sample(s,i),this.slow_.sample(s,i)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const VT={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},ly={};function zP(t,e,n,r,s,i){const o=t.audioCodec?t.audioGroups:null,a=i==null?void 0:i.audioCodec,l=i==null?void 0:i.channels,u=l?parseInt(l):a?1/0:2;let c=null;if(o!=null&&o.length)try{o.length===1&&o[0]?c=e.groups[o[0]].channels:c=o.reduce((d,f)=>{if(f){const m=e.groups[f];if(!m)throw new Error(`Audio track group ${f} not found`);Object.keys(m.channels).forEach(p=>{d[p]=(d[p]||0)+m.channels[p]})}return d},{2:0})}catch{return!0}return t.videoCodec!==void 0&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(s,8e6))||!!c&&Y(u)&&Object.keys(c).some(d=>parseInt(d)>u)}function qP(t,e,n){const r=t.videoCodec,s=t.audioCodec;if(!r||!s||!n)return Promise.resolve(VT);const i={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)),framerate:t.frameRate||30},o=t.videoRange;o!=="SDR"&&(i.transferFunction=o.toLowerCase());const a=r.split(",").map(l=>({type:"media-source",video:nt(nt({},i),{},{contentType:Co(l,"video")})}));return s&&t.audioGroups&&t.audioGroups.forEach(l=>{var u;l&&((u=e.groups[l])==null||u.tracks.forEach(c=>{if(c.groupId===l){const d=c.channels||"",f=parseFloat(d);Y(f)&&f>2&&a.push.apply(a,s.split(",").map(m=>({type:"media-source",audio:{contentType:Co(m,"audio"),channels:""+f}})))}}))}),Promise.all(a.map(l=>{const u=YP(l);return ly[u]||(ly[u]=n.decodingInfo(l))})).then(l=>({supported:!l.some(u=>!u.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function YP(t){const{audio:e,video:n}=t,r=n||e;if(r){const s=r.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${s}_${Math.ceil(n.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${s}`}return""}function QP(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function XP(t,e){let n=!1,r=[];return t&&(n=t!=="SDR",r=[t]),e&&(r=e.allowedVideoRanges||du.slice(0),n=e.preferHDR!==void 0?e.preferHDR:QP(),n?r=r.filter(s=>s!=="SDR"):r=["SDR"]),{preferHDR:n,allowedVideoRanges:r}}function JP(t,e,n,r,s){const i=Object.keys(t),o=r==null?void 0:r.channels,a=r==null?void 0:r.audioCodec,l=o&&parseInt(o)===2;let u=!0,c=!1,d=1/0,f=1/0,m=1/0,p=0,g=[];const{preferHDR:v,allowedVideoRanges:y}=XP(e,s);for(let E=i.length;E--;){const b=t[i[E]];u=b.channels[2]>0,d=Math.min(d,b.minHeight),f=Math.min(f,b.minFramerate),m=Math.min(m,b.minBitrate);const L=y.filter(R=>b.videoRanges[R]>0);L.length>0&&(c=!0,g=L)}d=Y(d)?d:0,f=Y(f)?f:0;const x=Math.max(1080,d),S=Math.max(30,f);return m=Y(m)?m:n,n=Math.max(m,n),c||(e=void 0,g=[]),{codecSet:i.reduce((E,b)=>{const L=t[b];if(b===E)return E;if(L.minBitrate>n)return $n(b,`min bitrate of ${L.minBitrate} > current estimate of ${n}`),E;if(!L.hasDefaultAudio)return $n(b,"no renditions with default or auto-select sound found"),E;if(a&&b.indexOf(a.substring(0,4))%5!==0)return $n(b,`audio codec preference "${a}" not found`),E;if(o&&!l){if(!L.channels[o])return $n(b,`no renditions with ${o} channel sound found (channels options: ${Object.keys(L.channels)})`),E}else if((!a||l)&&u&&L.channels[2]===0)return $n(b,"no renditions with stereo sound found"),E;return L.minHeight>x?($n(b,`min resolution of ${L.minHeight} > maximum of ${x}`),E):L.minFramerate>S?($n(b,`min framerate of ${L.minFramerate} > maximum of ${S}`),E):g.some(R=>L.videoRanges[R]>0)?L.maxScore<p?($n(b,`max score of ${L.maxScore} < selected max of ${p}`),E):E&&(uu(b)>=uu(E)||L.fragmentError>t[E].fragmentError)?E:(p=L.maxScore,b):($n(b,`no variants with VIDEO-RANGE of ${JSON.stringify(g)} found`),E)},void 0),videoRanges:g,preferHDR:v,minFramerate:f,minBitrate:m}}function $n(t,e){D.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function ZP(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const s=n.channels||"2";return r.channels[s]=(r.channels[s]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function e2(t,e,n,r){return t.slice(n,r+1).reduce((s,i)=>{if(!i.codecSet)return s;const o=i.audioGroups;let a=s[i.codecSet];a||(s[i.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,i.bitrate);const l=Math.min(i.height,i.width);return a.minHeight=Math.min(a.minHeight,l),a.minFramerate=Math.min(a.minFramerate,i.frameRate),a.maxScore=Math.max(a.maxScore,i.score),a.fragmentError+=i.fragmentError,a.videoRanges[i.videoRange]=(a.videoRanges[i.videoRange]||0)+1,o&&o.forEach(u=>{if(!u)return;const c=e.groups[u];c&&(a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?c.hasDefault:c.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(c.channels).forEach(d=>{a.channels[d]=(a.channels[d]||0)+c.channels[d]}))}),s},{})}function In(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const s=e[r];if(rs(t,s,n))return r}return-1}function rs(t,e,n){const{groupId:r,name:s,lang:i,assocLang:o,default:a}=t,l=t.forced;return(r===void 0||e.groupId===r)&&(s===void 0||e.name===s)&&(i===void 0||e.lang===i)&&(i===void 0||e.assocLang===o)&&(a===void 0||e.default===a)&&(l===void 0||e.forced===l)&&(!("characteristics"in t)||t2(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function t2(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(s=>r.indexOf(s)===-1)}function Gr(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function n2(t,e,n,r,s){const i=e[r],a=e.reduce((f,m,p)=>{const g=m.uri;return(f[g]||(f[g]=[])).push(p),f},{})[i.uri];a.length>1&&(r=Math.max.apply(Math,a));const l=i.videoRange,u=i.frameRate,c=i.codecSet.substring(0,4),d=uy(e,r,f=>{if(f.videoRange!==l||f.frameRate!==u||f.codecSet.substring(0,4)!==c)return!1;const m=f.audioGroups,p=n.filter(g=>!m||m.indexOf(g.groupId)!==-1);return In(t,p,s)>-1});return d>-1?d:uy(e,r,f=>{const m=f.audioGroups,p=n.filter(g=>!m||m.indexOf(g.groupId)!==-1);return In(t,p,s)>-1})}function uy(t,e,n){for(let r=e;r>-1;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}class r2{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:n,partCurrent:r,hls:s}=this,{autoLevelEnabled:i,media:o}=s;if(!n||!o)return;const a=performance.now(),l=r?r.stats:n.stats,u=r?r.duration:n.duration,c=a-l.loading.start,d=s.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||n.level<=d){this.clearTimer(),this._nextAutoLevel=-1;return}if(!i||o.paused||!o.playbackRate||!o.readyState)return;const f=s.mainForwardBufferInfo;if(f===null)return;const m=this.bwEstimator.getEstimateTTFB(),p=Math.abs(o.playbackRate);if(c<=Math.max(m,1e3*(u/(p*2))))return;const g=f.len/p,v=l.loading.first?l.loading.first-l.loading.start:-1,y=l.loaded&&v>-1,x=this.getBwEstimate(),S=s.levels,w=S[n.level],E=l.total||Math.max(l.loaded,Math.round(u*w.averageBitrate/8));let b=y?c-v:c;b<1&&y&&(b=Math.min(c,l.loaded*8/x));const L=y?l.loaded*1e3/b:0,R=L?(E-l.loaded)/L:E*8/x+m/1e3;if(R<=g)return;const I=L?L*8:x;let C=Number.POSITIVE_INFINITY,k;for(k=n.level-1;k>d;k--){const B=S[k].maxBitrate;if(C=this.getTimeToLoadFrag(m/1e3,I,u*B,!S[k].details),C<g)break}if(C>=R||C>u*10)return;s.nextLoadLevel=s.nextAutoLevel=k,y?this.bwEstimator.sample(c-Math.min(m,v),l.loaded):this.bwEstimator.sampleTTFB(c);const U=S[k].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>U&&this.resetEstimator(U),this.clearTimer(),D.warn(`[abr] Fragment ${n.sn}${r?" part "+r.index:""} of level ${n.level} is loading too slowly;
      Time to underbuffer: ${g.toFixed(3)} s
      Estimated load time for current fragment: ${R.toFixed(3)} s
      Estimated load time for down switch fragment: ${C.toFixed(3)} s
      TTFB estimate: ${v|0} ms
      Current BW estimate: ${Y(x)?x|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${k} @ ${U|0} bps`),s.trigger(T.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(D.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new WP(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.FRAG_LOADING,this.onFragLoading,this),e.on(T.FRAG_LOADED,this.onFragLoaded,this),e.on(T.FRAG_BUFFERED,this.onFragBuffered,this),e.on(T.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(T.LEVEL_LOADED,this.onLevelLoaded,this),e.on(T.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(T.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(T.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.FRAG_LOADING,this.onFragLoading,this),e.off(T.FRAG_LOADED,this.onFragLoaded,this),e.off(T.FRAG_BUFFERED,this.onFragBuffered,this),e.off(T.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(T.LEVEL_LOADED,this.onLevelLoaded,this),e.off(T.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(T.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(T.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var s;this.fragCurrent=r,this.partCurrent=(s=n.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case N.BUFFER_ADD_CODEC_ERROR:case N.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case N.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:s,partCurrent:i}=this;if(r&&s&&r.sn===s.sn&&r.level===s.level){const o=performance.now(),a=i?i.stats:r.stats,l=o-a.loading.start,u=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&u>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,u),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,n,r,s){const i=e+r/n,o=s?this.lastLevelLoadSec:0;return i+o}onLevelLoaded(e,n){const r=this.hls.config,{loading:s}=n.stats,i=s.end-s.start;Y(i)&&(this.lastLevelLoadSec=i/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}onFragLoaded(e,{frag:n,part:r}){const s=r?r.stats:n.stats;if(n.type===J.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const i=r?r.duration:n.duration,o=this.hls.levels[n.level],a=(o.loaded?o.loaded.bytes:0)+s.loaded,l=(o.loaded?o.loaded.duration:0)+i;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(n.bitrateTest){const i={stats:s,frag:n,part:r,id:n.type};this.onFragBuffered(T.FRAG_BUFFERED,i),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:s}=n,i=s!=null&&s.stats.loaded?s.stats:r.stats;if(i.aborted||this.ignoreFragment(r))return;const o=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,i.loaded),i.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==J.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,i=this.findBestLevel(r,n,e,0,s,1,1);if(i>-1)return i;const o=this.hls.firstLevel,a=Math.min(Math.max(o,n),e);return D.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const i=r&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,i)&&o[e].loadError<=o[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this,{maxAutoLevel:s,config:i,minAutoLevel:o}=r,a=n?n.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay();let c=i.abrBandWidthFactor,d=i.abrBandWidthUpFactor;if(u){const v=this.findBestLevel(l,o,s,u,0,c,d);if(v>=0)return v}let f=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!u){const v=this.bitrateTestDelay;v&&(f=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-v,D.info(`[abr] bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),c=d=1)}const m=this.findBestLevel(l,o,s,u,f,c,d);if(D.info(`[abr] ${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${m}`),m>-1)return m;const p=r.levels[o],g=r.levels[r.loadLevel];return(p==null?void 0:p.bitrate)<(g==null?void 0:g.bitrate)?o:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,s,i,o,a){var l;const u=s+i,c=this.lastLoadedFragLevel,d=c===-1?this.hls.firstLevel:c,{fragCurrent:f,partCurrent:m}=this,{levels:p,allAudioTracks:g,loadLevel:v,config:y}=this.hls;if(p.length===1)return 0;const x=p[d],S=!!(x!=null&&(l=x.details)!=null&&l.live),w=v===-1||c===-1;let E,b="SDR",L=(x==null?void 0:x.frameRate)||0;const{audioPreference:R,videoPreference:I}=y,C=this.audioTracksByGroup||(this.audioTracksByGroup=ZP(g));if(w){if(this.firstSelection!==-1)return this.firstSelection;const W=this.codecTiers||(this.codecTiers=e2(p,C,n,r)),V=JP(W,b,e,R,I),{codecSet:K,videoRanges:F,minFramerate:M,minBitrate:O,preferHDR:z}=V;E=K,b=z?F[F.length-1]:F[0],L=M,e=Math.max(e,O),D.log(`[abr] picked start tier ${JSON.stringify(V)}`)}else E=x==null?void 0:x.codecSet,b=x==null?void 0:x.videoRange;const k=m?m.duration:f?f.duration:0,U=this.bwEstimator.getEstimateTTFB()/1e3,B=[];for(let W=r;W>=n;W--){var H;const V=p[W],K=W>d;if(!V)continue;if(y.useMediaCapabilities&&!V.supportedResult&&!V.supportedPromise){const ne=navigator.mediaCapabilities;typeof(ne==null?void 0:ne.decodingInfo)=="function"&&zP(V,C,b,L,e,R)?(V.supportedPromise=qP(V,C,ne),V.supportedPromise.then(ue=>{if(!this.hls)return;V.supportedResult=ue;const ce=this.hls.levels,be=ce.indexOf(V);ue.error?D.warn(`[abr] MediaCapabilities decodingInfo error: "${ue.error}" for level ${be} ${JSON.stringify(ue)}`):ue.supported||(D.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${be} ${JSON.stringify(ue)}`),be>-1&&ce.length>1&&(D.log(`[abr] Removing unsupported level ${be}`),this.hls.removeLevel(be)))})):V.supportedResult=VT}if(E&&V.codecSet!==E||b&&V.videoRange!==b||K&&L>V.frameRate||!K&&L>0&&L<V.frameRate||V.supportedResult&&!((H=V.supportedResult.decodingInfoResults)!=null&&H[0].smooth)){B.push(W);continue}const F=V.details,M=(m?F==null?void 0:F.partTarget:F==null?void 0:F.averagetargetduration)||k;let O;K?O=a*e:O=o*e;const z=k&&s>=k*2&&i===0?p[W].averageBitrate:p[W].maxBitrate,G=this.getTimeToLoadFrag(U,O,z*M,F===void 0);if(O>=z&&(W===c||V.loadError===0&&V.fragmentError===0)&&(G<=U||!Y(G)||S&&!this.bitrateTestDelay||G<u)){const ne=this.forcedAutoLevel;return W!==v&&(ne===-1||ne!==v)&&(B.length&&D.trace(`[abr] Skipped level(s) ${B.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${p[B[0]].codecs}" ${p[B[0]].videoRange}; not compatible with "${x.codecs}" ${b}`),D.info(`[abr] switch candidate:${d}->${W} adjustedbw(${Math.round(O)})-bitrate=${Math.round(O-z)} ttfb:${U.toFixed(1)} avgDuration:${M.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${G.toFixed(1)} firstSelection:${w} codecSet:${E} videoRange:${b} hls.loadLevel:${v}`)),w&&(this.firstSelection=W),W}}return-1}set nextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls,s=Math.min(Math.max(e,r),n);this._nextAutoLevel!==s&&(this.nextAutoLevelKey="",this._nextAutoLevel=s)}}class s2{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var et={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class i2{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(T.BUFFER_APPENDED,this.onBufferAppended,this),e.on(T.FRAG_BUFFERED,this.onFragBuffered,this),e.on(T.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(T.BUFFER_APPENDED,this.onBufferAppended,this),e.off(T.FRAG_BUFFERED,this.onFragBuffered,this),e.off(T.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let s=r.length;s--;){const i=r[s];if(!i)break;const o=i.end;if(i.start<=e&&o!==null&&e<=o)return i}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){const{fragments:r}=this,s=Object.keys(r);for(let i=s.length;i--;){const o=r[s[i]];if((o==null?void 0:o.body.type)===n&&o.buffered){const a=o.body;if(a.start<=e&&e<=a.end)return a}}return null}detectEvictedFragments(e,n,r,s){this.timeRanges&&(this.timeRanges[e]=n);const i=(s==null?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a||i>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===r&&this.removeFragment(a.body);return}const l=a.range[e];l&&l.time.some(u=>{const c=!this.isTimeBuffered(u.startPTS,u.endPTS,n);return c&&this.removeFragment(a.body),c})})}detectPartialFragments(e){const n=this.timeRanges,{frag:r,part:s}=e;if(!n||r.sn==="initSegment")return;const i=Ts(r),o=this.fragments[i];if(!o||o.buffered&&r.gap)return;const a=!r.relurl;Object.keys(n).forEach(l=>{const u=r.elementaryStreams[l];if(!u)return;const c=n[l],d=a||u.partial===!0;o.range[l]=this.getBufferedTimes(r,s,d,c)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=r.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),Pa(o)||this.removeParts(r.sn-1,r.type)):this.removeFragment(o.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=r.filter(s=>s.fragment.sn>=e))}fragBuffered(e,n){const r=Ts(e);let s=this.fragments[r];!s&&n&&(s=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,n,r,s){const i={time:[],partial:r},o=e.start,a=e.end,l=e.minEndPTS||a,u=e.maxStartPTS||o;for(let c=0;c<s.length;c++){const d=s.start(c)-this.bufferPadding,f=s.end(c)+this.bufferPadding;if(u>=d&&l<=f){i.time.push({startPTS:Math.max(o,s.start(c)),endPTS:Math.min(a,s.end(c))});break}else if(o<f&&a>d){const m=Math.max(o,s.start(c)),p=Math.min(a,s.end(c));p>m&&(i.partial=!0,i.time.push({startPTS:m,endPTS:p}))}else if(a<=d)break}return i}getPartialFragment(e){let n=null,r,s,i,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(u=>{const c=l[u];c&&Pa(c)&&(s=c.body.start-a,i=c.body.end+a,e>=s&&e<=i&&(r=Math.min(e-s,i-e),o<=r&&(n=c.body,o=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||Pa(n))}getState(e){const n=Ts(e),r=this.fragments[n];return r?r.buffered?Pa(r)?et.PARTIAL:et.OK:et.APPENDING:et.NOT_LOADED}isTimeBuffered(e,n,r){let s,i;for(let o=0;o<r.length;o++){if(s=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=s&&n<=i)return!0;if(n<=s)return!1}return!1}onFragLoaded(e,n){const{frag:r,part:s}=n;if(r.sn==="initSegment"||r.bitrateTest)return;const i=s?null:n,o=Ts(r);this.fragments[o]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:s,timeRanges:i}=n;if(r.sn==="initSegment")return;const o=r.type;if(s){let a=this.activePartLists[o];a||(this.activePartLists[o]=a=[]),a.push(s)}this.timeRanges=i,Object.keys(i).forEach(a=>{const l=i[a];this.detectEvictedFragments(a,l,o,s)})}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Ts(e);return!!this.fragments[n]}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,s,i){s&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==r||s&&!l.gap||l.start<n&&l.end>e&&(a.buffered||i)&&this.removeFragment(l)})}removeFragment(e){const n=Ts(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const s=e.sn;this.activePartLists[e.type]=r.filter(i=>i.fragment.sn!==s)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Pa(t){var e,n,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((r=t.range.audiovideo)==null?void 0:r.partial))}function Ts(t){return`${t.type}_${t.level}_${t.sn}`}const o2={length:0,start:()=>0,end:()=>0};class Ee{static isBuffered(e,n){try{if(e){const r=Ee.getBuffered(e);for(let s=0;s<r.length;s++)if(n>=r.start(s)&&n<=r.end(s))return!0}}catch{}return!1}static bufferInfo(e,n,r){try{if(e){const s=Ee.getBuffered(e),i=[];let o;for(o=0;o<s.length;o++)i.push({start:s.start(o),end:s.end(o)});return this.bufferedInfo(i,n,r)}}catch{}return{len:0,start:n,end:n,nextStart:void 0}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.sort(function(u,c){const d=u.start-c.start;return d||c.end-u.end});let s=[];if(r)for(let u=0;u<e.length;u++){const c=s.length;if(c){const d=s[c-1].end;e[u].start-d<r?e[u].end>d&&(s[c-1].end=e[u].end):s.push(e[u])}else s.push(e[u])}else s=e;let i=0,o,a=n,l=n;for(let u=0;u<s.length;u++){const c=s[u].start,d=s[u].end;if(n+r>=c&&n<d)a=c,l=d,i=l-n;else if(n+r<c){o=c;break}}return{len:i,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(n){return D.log("failed to get media.buffered",n),o2}}}class Wm{constructor(e,n,r,s=0,i=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Na(),this.buffering={audio:Na(),video:Na(),audiovideo:Na()},this.level=e,this.sn=n,this.id=r,this.size=s,this.part=i,this.partial=o}}function Na(){return{start:0,executeStart:0,executeEnd:0,end:0}}function ml(t,e){for(let r=0,s=t.length;r<s;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function a2(t,e,n){return!!(e&&(n.endCC>n.startCC||t&&t.cc<n.startCC))}function l2(t,e){const n=t.fragments,r=e.fragments;if(!r.length||!n.length){D.log("No fragments to align");return}const s=ml(n,r[0].cc);if(!s||s&&!s.startPTS){D.log("No frag in previous level to align on");return}return s}function cy(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function GT(t,e){const n=e.fragments;for(let r=0,s=n.length;r<s;r++)cy(n[r],t);e.fragmentHint&&cy(e.fragmentHint,t),e.alignedSliding=!0}function u2(t,e,n){e&&(c2(t,n,e),!n.alignedSliding&&e&&pu(n,e),!n.alignedSliding&&e&&!n.skippedSegments&&jT(e,n))}function c2(t,e,n){if(a2(t,n,e)){const r=l2(n,e);r&&Y(r.start)&&(D.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),GT(r.start,e))}}function pu(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let s,i;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(s=ml(r,o),i=ml(n,o)),(!s||!i)&&(s=r[Math.floor(r.length/2)],i=ml(n,s.cc)||n[Math.floor(n.length/2)]);const a=s.programDateTime,l=i.programDateTime;if(!a||!l)return;const u=(l-a)/1e3-(i.start-s.start);GT(u,t)}const dy=Math.pow(2,17);class d2{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new Hn({type:te.NETWORK_ERROR,details:N.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,i=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(m=>m[0]==="GAP")){l(hy(e));return}else e.gap=!1;const u=this.loader=e.loader=i?new i(s):new o(s),c=fy(e),d=ay(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:dy};e.stats=u.stats,u.load(c,f,{onSuccess:(m,p,g,v)=>{this.resetLoader(e,u);let y=m.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(y.slice(0,16)),y=y.slice(16)),a({frag:e,part:null,payload:y,networkDetails:v})},onError:(m,p,g,v)=>{this.resetLoader(e,u),l(new Hn({type:te.NETWORK_ERROR,details:N.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:nt({url:r,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:g,stats:v}))},onAbort:(m,p,g)=>{this.resetLoader(e,u),l(new Hn({type:te.NETWORK_ERROR,details:N.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:m}))},onTimeout:(m,p,g)=>{this.resetLoader(e,u),l(new Hn({type:te.NETWORK_ERROR,details:N.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:m}))},onProgress:(m,p,g,v)=>{n&&n({frag:e,part:null,payload:g,networkDetails:v})}})})}loadPart(e,n,r){this.abort();const s=this.config,i=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){l(hy(e,n));return}const u=this.loader=e.loader=i?new i(s):new o(s),c=fy(e,n),d=ay(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:dy};n.stats=u.stats,u.load(c,f,{onSuccess:(m,p,g,v)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,n);const y={frag:e,part:n,payload:m.data,networkDetails:v};r(y),a(y)},onError:(m,p,g,v)=>{this.resetLoader(e,u),l(new Hn({type:te.NETWORK_ERROR,details:N.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:nt({url:c.url,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:g,stats:v}))},onAbort:(m,p,g)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,u),l(new Hn({type:te.NETWORK_ERROR,details:N.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:g,stats:m}))},onTimeout:(m,p,g)=>{this.resetLoader(e,u),l(new Hn({type:te.NETWORK_ERROR,details:N.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:m}))}})})}updateStatsFromPart(e,n){const r=e.stats,s=n.stats,i=s.total;if(r.loaded+=s.loaded,i){const l=Math.round(e.duration/n.duration),u=Math.min(Math.round(r.loaded/i),l),d=(l-u)*Math.round(r.loaded/u);r.total=r.loaded+d}else r.total=Math.max(r.loaded,r.total);const o=r.loading,a=s.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function fy(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},s=n.byteRangeStartOffset,i=n.byteRangeEndOffset;if(Y(s)&&Y(i)){var o;let a=s,l=i;if(t.sn==="initSegment"&&((o=t.decryptdata)==null?void 0:o.method)==="AES-128"){const u=i-s;u%16&&(l=i+(16-u%16)),s!==0&&(r.resetIV=!0,a=s-16)}r.rangeStart=a,r.rangeEnd=l}return r}function hy(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:te.MEDIA_ERROR,details:N.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new Hn(r)}class Hn extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class f2{constructor(e,n){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=n}decrypt(e,n){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e)}}class h2{constructor(e,n){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=n}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function m2(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?ns(t,0,e-n):t}class p2{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let s=0;s<4;s++)r[s]=n.getUint32(s*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,s=r[0],i=r[1],o=r[2],a=r[3],l=this.invSubMix,u=l[0],c=l[1],d=l[2],f=l[3],m=new Uint32Array(256);let p=0,g=0,v=0;for(v=0;v<256;v++)v<128?m[v]=v<<1:m[v]=v<<1^283;for(v=0;v<256;v++){let y=g^g<<1^g<<2^g<<3^g<<4;y=y>>>8^y&255^99,e[p]=y,n[y]=p;const x=m[p],S=m[x],w=m[S];let E=m[y]*257^y*16843008;s[p]=E<<24|E>>>8,i[p]=E<<16|E>>>16,o[p]=E<<8|E>>>24,a[p]=E,E=w*16843009^S*65537^x*257^p*16843008,u[y]=E<<24|E>>>8,c[y]=E<<16|E>>>16,d[y]=E<<8|E>>>24,f[y]=E,p?(p=x^m[m[m[w^x]]],g^=m[m[g]]):p=g=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,s=0;for(;s<n.length&&r;)r=n[s]===this.key[s],s++;if(r)return;this.key=n;const i=this.keySize=n.length;if(i!==4&&i!==6&&i!==8)throw new Error("Invalid aes key size="+i);const o=this.ksRows=(i+6+1)*4;let a,l;const u=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),d=this.sBox,f=this.rcon,m=this.invSubMix,p=m[0],g=m[1],v=m[2],y=m[3];let x,S;for(a=0;a<o;a++){if(a<i){x=u[a]=n[a];continue}S=x,a%i===0?(S=S<<8|S>>>24,S=d[S>>>24]<<24|d[S>>>16&255]<<16|d[S>>>8&255]<<8|d[S&255],S^=f[a/i|0]<<24):i>6&&a%i===4&&(S=d[S>>>24]<<24|d[S>>>16&255]<<16|d[S>>>8&255]<<8|d[S&255]),u[a]=x=(u[a-i]^S)>>>0}for(l=0;l<o;l++)a=o-l,l&3?S=u[a]:S=u[a-4],l<4||a<=4?c[l]=S:c[l]=p[d[S>>>24]]^g[d[S>>>16&255]]^v[d[S>>>8&255]]^y[d[S&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const s=this.keySize+6,i=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],u=a[1],c=a[2],d=a[3],f=this.uint8ArrayToUint32Array_(r);let m=f[0],p=f[1],g=f[2],v=f[3];const y=new Int32Array(e),x=new Int32Array(y.length);let S,w,E,b,L,R,I,C,k,U,B,H,W,V;const K=this.networkToHostOrderSwap;for(;n<y.length;){for(k=K(y[n]),U=K(y[n+1]),B=K(y[n+2]),H=K(y[n+3]),L=k^i[0],R=H^i[1],I=B^i[2],C=U^i[3],W=4,V=1;V<s;V++)S=l[L>>>24]^u[R>>16&255]^c[I>>8&255]^d[C&255]^i[W],w=l[R>>>24]^u[I>>16&255]^c[C>>8&255]^d[L&255]^i[W+1],E=l[I>>>24]^u[C>>16&255]^c[L>>8&255]^d[R&255]^i[W+2],b=l[C>>>24]^u[L>>16&255]^c[R>>8&255]^d[I&255]^i[W+3],L=S,R=w,I=E,C=b,W=W+4;S=o[L>>>24]<<24^o[R>>16&255]<<16^o[I>>8&255]<<8^o[C&255]^i[W],w=o[R>>>24]<<24^o[I>>16&255]<<16^o[C>>8&255]<<8^o[L&255]^i[W+1],E=o[I>>>24]<<24^o[C>>16&255]<<16^o[L>>8&255]<<8^o[R&255]^i[W+2],b=o[C>>>24]<<24^o[L>>16&255]<<16^o[R>>8&255]<<8^o[I&255]^i[W+3],x[n]=K(S^m),x[n+1]=K(b^p),x[n+2]=K(E^g),x[n+3]=K(w^v),m=k,p=U,g=B,v=H,n=n+4}return x.buffer}}const g2=16;class zm{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?m2(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r){return this.useSoftware?new Promise((s,i)=>{this.softwareDecrypt(new Uint8Array(e),n,r);const o=this.flush();o?s(o.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r)}softwareDecrypt(e,n,r){const{currentIV:s,currentResult:i,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=nn(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;s&&(r=s);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new p2),l.expandKey(n);const u=i;return this.currentResult=l.decrypt(a.buffer,0,r),this.currentIV=ns(a,-16).buffer,u||null}webCryptoDecrypt(e,n,r){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,r));this.key=n,this.fastAesKey=new h2(this.subtle,n)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new f2(this.subtle,new Uint8Array(r)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(D.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,n,r)))}onWebCryptoError(e,n,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r);const s=this.flush();if(s)return s.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%g2;return r!==e.length&&(n=ns(e,0,r),this.remainderData=ns(e,r)),n}logOnce(e){this.logEnabled&&(D.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const y2={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},j={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class qm extends s2{constructor(e,n,r,s,i){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=j.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=i,this.logPrefix=s,this.log=D.log.bind(D,`${s}:`),this.warn=D.warn.bind(D,`${s}:`),this.hls=e,this.fragmentLoader=new d2(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new zm(e.config),e.on(T.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=j.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,n){if(n.live||e.nextStart||!e.end||!this.media)return!1;const r=n.partList;if(r!=null&&r.length){const i=r[r.length-1];return Ee.isBuffered(this.media,i.start+i.duration/2)}const s=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const s=this.config;this.levels&&s.autoStartLoad&&this.state===j.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:n,media:r,mediaBuffer:s,state:i}=this,o=r?r.currentTime:0,a=Ee.bufferInfo(s||r,o,e.maxBufferHole);if(this.log(`media seeking to ${Y(o)?o.toFixed(3):o}, state: ${i}`),this.state===j.ENDED)this.resetLoadingState();else if(n){const l=e.maxFragLookUpTolerance,u=n.start-l,c=n.start+n.duration+l;if(!a.len||c<a.start||u>a.end){const d=o>c;(o<u||d)&&(d&&n.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(T.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=j.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const s=i=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${i.part?" p: "+i.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(i)};this._doFragLoad(e,n,r,s).then(i=>{if(!i)return;const o=this.state;if(this.fragContextChanged(e)){(o===j.FRAG_LOADING||!this.fragCurrent&&o===j.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=j.IDLE);return}"payload"in i&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(T.FRAG_LOADED,i)),this._handleFragmentLoadComplete(i)}).catch(i=>{this.state===j.STOPPED||this.state===j.ERROR||(this.warn(`Frag error: ${(i==null?void 0:i.message)||i}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===et.APPENDING){const i=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,i),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===et.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const s={startOffset:e,endOffset:n,type:r};this.hls.trigger(T.BUFFER_FLUSHING,s)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{if(!r||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:s}=this,{payload:i}=r,o=e.decryptdata;if(i&&i.byteLength>0&&o!=null&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),o.key.buffer,o.iv.buffer).catch(l=>{throw s.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const u=self.performance.now();return s.trigger(T.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:u}}),r.payload=l,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===j.STOPPED||this.state===j.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state=j.IDLE,e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){var r,s,i,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.playlistType===J.MAIN?"level":"track"} ${e.level} (frag:[${((r=e.startPTS)!=null?r:NaN).toFixed(3)}-${((s=e.endPTS)!=null?s:NaN).toFixed(3)}] > buffer:${a?y2.toString(Ee.getBuffered(a)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==J.SUBTITLE){const c=e.elementaryStreams;if(!Object.keys(c).some(d=>!!c[d])){this.state=j.IDLE;return}}const u=(l=this.levels)==null?void 0:l[e.level];u!=null&&u.fragmentError&&(this.log(`Resetting level fragment error count of ${u.fragmentError} on frag buffered`),u.fragmentError=0)}this.state=j.IDLE,a&&(!this.loadedmetadata&&e.type==J.MAIN&&a.buffered.length&&((i=this.fragCurrent)==null?void 0:i.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:s,partsLoaded:i}=e,o=!i||i.length===0||i.some(l=>!l),a=new Wm(r.level,r.sn,r.stats.chunkCount+1,0,s?s.index:-1,!o);n.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,s){var i;const o=n==null?void 0:n.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((i=e.decryptdata)!=null&&i.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=j.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(c=>{if(!this.fragContextChanged(c.frag))return this.hls.trigger(T.KEY_LOADED,c),this.state===j.KEY_LOADING&&(this.state=j.IDLE),c}),this.hls.trigger(T.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const c=o.partList;if(c&&s){r>e.end&&o.fragmentHint&&(e=o.fragmentHint);const d=this.getNextPart(c,e,r);if(d>-1){const f=c[d];this.log(`Loading part sn: ${e.sn} p: ${f.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${d}-${c.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=j.FRAG_LOADING;let m;return a?m=a.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,f,n,s)).catch(p=>this.handleFragLoadError(p)):m=this.doFragPartsLoad(e,f,n,s).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(T.FRAG_LOADING,{frag:e,part:f,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}else if(!e.url||this.loadedEndOfParts(c,r))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),Y(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=j.FRAG_LOADING;const l=this.config.progressive;let u;return l&&a?u=a.then(c=>!c||this.fragContextChanged(c==null?void 0:c.frag)?null:this.fragmentLoader.load(e,s)).catch(c=>this.handleFragLoadError(c)):u=Promise.all([this.fragmentLoader.load(e,l?s:void 0),a]).then(([c])=>(!l&&c&&s&&s(c),c)).catch(c=>this.handleFragLoadError(c)),this.hls.trigger(T.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,n,r,s){return new Promise((i,o)=>{var a;const l=[],u=(a=r.details)==null?void 0:a.partList,c=d=>{this.fragmentLoader.loadPart(e,d,s).then(f=>{l[d.index]=f;const m=f.part;this.hls.trigger(T.FRAG_LOADED,f);const p=iy(r,e.sn,d.index+1)||UT(u,e.sn,d.index+1);if(p)c(p);else return i({frag:e,part:m,partsLoaded:l})}).catch(o)};c(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===N.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(T.ERROR,n)}else this.hls.trigger(T.ERROR,{type:te.OTHER_ERROR,details:N.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==j.PARSING){!this.fragCurrent&&this.state!==j.STOPPED&&this.state!==j.ERROR&&(this.state=j.IDLE);return}const{frag:r,part:s,level:i}=n,o=self.performance.now();r.stats.parsing.end=o,s&&(s.stats.parsing.end=o),this.updateLevelTiming(r,s,i,e.partial)}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:s,sn:i,part:o}=e;if(!(n!=null&&n[s]))return this.warn(`Levels object was unset while buffering fragment ${i} of level ${s}. The current chunk will not be buffered.`),null;const a=n[s],l=o>-1?iy(a,i,o):null,u=l?l.fragment:UP(a,i,r);return u?(r&&r!==u&&(u.stats=r.stats),{frag:u,part:l,level:a}):null}bufferFragmentData(e,n,r,s,i){var o;if(!e||this.state!==j.PARSING)return;const{data1:a,data2:l}=e;let u=a;if(a&&l&&(u=nn(a,l)),!((o=u)!=null&&o.length))return;const c={type:e.type,frag:n,part:r,chunkMeta:s,parent:n.type,data:u};if(this.hls.trigger(T.BUFFER_APPENDING,c),e.dropped&&e.independent&&!r){if(i)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!Ee.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,s=Ee.bufferInfo(n,r,0),i=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,i*.25),a=Math.max(Math.min(e.start-o,s.end-o),r+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,n){const r=this.getLoadPosition();return Y(r)?this.getFwdBufferInfoAtPos(e,r,n):null}getFwdBufferInfoAtPos(e,n,r){const{config:{maxBufferHole:s}}=this,i=Ee.bufferInfo(e,n,s);if(i.len===0&&i.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(n,r);if(o&&i.nextStart<o.end)return Ee.bufferInfo(e,n,Math.max(i.nextStart,s))}return i}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const r=this.config,s=Math.max(Math.min(e-n,r.maxBufferLength),n),i=Math.max(e-n*3,r.maxMaxBufferLength/2,s);return i>=s?(r.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0):!1}getAppendedFrag(e,n=J.MAIN){const r=this.fragmentTracker.getAppendedFrag(e,J.MAIN);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,n){const r=n.fragments,s=r.length;if(!s)return null;const{config:i}=this,o=r[0].start;let a;if(n.live){const l=i.initialLiveManifestSize;if(s<l)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${l})`),null;(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o)&&(a=this.getInitialLiveFragment(n,r),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=r[0]);if(!a){const l=i.lowLatencyMode?n.partEnd:n.fragmentEnd;a=this.getFragmentAtPosition(e,l,n)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===et.OK||r===et.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,s,i){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,n);if(a===null)return a;if(e=a,o&&e&&!e.gap&&r.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,s);if(l!==null&&r.len+l.len>=i)return this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let s=-1,i=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const u=e[a];if(o=o&&!u.independent,s>-1&&r<u.start)break;const c=u.loaded;c?s=-1:(i||u.independent||o)&&u.fragment===n&&(s=a),i=c}return s}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e,n){const r=this.fragPrevious;let s=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),s=$P(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const i=r.sn+1;if(i>=e.startSN&&i<=e.endSN){const o=n[i-e.startSN];r.cc===o.cc&&(s=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=HP(n,r.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const i=this.hls.liveSyncPosition;i!==null&&(s=this.getFragmentAtPosition(i,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,n,r){const{config:s}=this;let{fragPrevious:i}=this,{fragments:o,endSN:a}=r;const{fragmentHint:l}=r,{maxFragLookUpTolerance:u}=s,c=r.partList,d=!!(s.lowLatencyMode&&c!=null&&c.length&&l);d&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let f;if(e<n){const m=e>n-u?0:u;f=mu(i,o,e,m)}else f=o[o.length-1];if(f){const m=f.sn-r.startSN,p=this.fragmentTracker.getState(f);if((p===et.OK||p===et.PARTIAL&&f.gap)&&(i=f),i&&f.sn===i.sn&&(!d||c[0].fragment.sn>f.sn)&&i&&f.level===i.level){const v=o[m+1];f.sn<a&&this.fragmentTracker.getState(v)!==et.OK?f=v:f=null}}return f}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const s=this.hls.liveSyncPosition,i=r.currentTime,o=e.fragments[0].start,a=e.edge,l=i>=o-n.maxFragLookUpTolerance&&i<=a;if(s!==null&&r.duration>s&&(i<s||!l)){const u=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;(!l&&r.readyState<4||i<a-u)&&(this.loadedmetadata||(this.nextLoadPosition=s),r.readyState&&(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${s.toFixed(3)}`),r.currentTime=s))}}alignPlaylists(e,n,r){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const i=e.fragments[0].start,o=!n,a=e.alignedSliding&&Y(i);if(o||!a&&!i){const{fragPrevious:l}=this;u2(l,r,e);const u=e.fragments[0].start;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${s}`),u}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;if(r<n&&(r=-1),r===-1||this.lastCurrentTime===-1){const s=this.startTimeOffset!==null,i=s?this.startTimeOffset:e.startTimeOffset;i!==null&&Y(i)?(r=n+i,i<0&&(r+=e.totalduration),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Start time offset ${i} found in ${s?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||n:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:e}=this;let n=0;return this.loadedmetadata&&e?n=e.currentTime:this.nextLoadPosition&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,n){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${n?" part "+n.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==j.FRAG_LOADING_WAITING_RETRY)&&(this.state=j.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const c=this.getCurrentContext(n.chunkMeta);c&&(n.frag=c.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var s;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const i=n.details===N.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(r,!0);const o=n.errorAction,{action:a,retryCount:l=0,retryConfig:u}=o||{};if(o&&a===st.RetryRequest&&u){this.resetStartWhenNotLoaded(this.levelLastLoaded);const c=Hm(u,l);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${l+1}/${u.maxNumRetry} in ${c}ms`),o.resolved=!0,this.retryDate=self.performance.now()+c,this.state=j.FRAG_LOADING_WAITING_RETRY}else if(u&&o)if(this.resetFragmentErrors(e),l<u.maxNumRetry)!i&&a!==st.RemoveAlternatePermanently&&(o.resolved=!0);else{D.warn(`${n.details} reached or exceeded max retry (${l})`);return}else(o==null?void 0:o.action)===st.SendAlternateToPenaltyBox?this.state=j.WAITING_LEVEL:this.state=j.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===j.PARSING||this.state===j.PARSED){const n=e.frag,r=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,r),i=s&&s.len>.5;i&&this.reduceMaxBufferLength(s.len,(n==null?void 0:n.duration)||10);const o=!i;return o&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===J.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==j.STOPPED&&(this.state=j.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const s=Ee.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,s,r),this.state===j.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=j.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.startPosition=-1,this.setStartPosition(n,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,s){var i;const o=r.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{const c=e.elementaryStreams[u];if(c){const d=c.endPTS-c.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${d})`),l||!1;const f=s?0:FT(o,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(T.LEVEL_PTS_UPDATED,{details:o,level:r,drift:f,type:u,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)&&((i=this.transmuxer)==null?void 0:i.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(r.fragmentError===0&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=j.PARSED,this.hls.trigger(T.FRAG_PARSED,{frag:e,part:n})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}class HT{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=v2(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function v2(t,e){const n=new Uint8Array(e);let r=0;for(let s=0;s<t.length;s++){const i=t[s];n.set(i,r),r+=i.length}return n}function x2(){return typeof __HLS_WORKER_BUNDLE__=="function"}function S2(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function E2(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function An(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Ym{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=nn(this.cachedData,e),this.cachedData=null);let r=Ro(e,0),s=r?r.length:0,i;const o=this._audioTrack,a=this._id3Track,l=r?Gm(r):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&Y(l))&&(this.basePTS=T2(l,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:hn.audioId3,duration:Number.POSITIVE_INFINITY});s<u;){if(this.canParse(e,s)){const c=this.appendFrame(o,e,s);c?(this.frameIndex++,this.lastPTS=c.sample.pts,s+=c.length,i=s):s=u}else GD(e,s)?(r=Ro(e,s),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:hn.audioId3,duration:Number.POSITIVE_INFINITY}),s+=r.length,i=s):s++;if(s===u&&i!==u){const c=ns(e,i);this.cachedData?this.cachedData=nn(this.cachedData,c):this.cachedData=c}}return{audioTrack:o,videoTrack:An(),id3Track:a,textTrack:An()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:An(),id3Track:this._id3Track,textTrack:An()}}destroy(){}}const T2=(t,e,n)=>{if(Y(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};function w2(t,e,n,r){let s,i,o,a;const l=navigator.userAgent.toLowerCase(),u=r,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=((e[n+2]&192)>>>6)+1;const d=(e[n+2]&60)>>>2;if(d>c.length-1){const f=new Error(`invalid ADTS sampling index:${d}`);t.emit(T.ERROR,T.ERROR,{type:te.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}return o=(e[n+2]&1)<<2,o|=(e[n+3]&192)>>>6,D.log(`manifest codec:${r}, ADTS type:${s}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(s=5,a=new Array(4),i=d-3):(s=2,a=new Array(2),i=d):l.indexOf("android")!==-1?(s=2,a=new Array(2),i=d):(s=5,a=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&d>=6?i=d-3:((r&&r.indexOf("mp4a.40.2")!==-1&&(d>=6&&o===1||/vivaldi/i.test(l))||!r&&o===1)&&(s=2,a=new Array(2)),i=d)),a[0]=s<<3,a[0]|=(d&14)>>1,a[1]|=(d&1)<<7,a[1]|=o<<3,s===5&&(a[1]|=(i&14)>>1,a[2]=(i&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:c[d],channelCount:o,codec:"mp4a.40."+s,manifestCodec:u}}function KT(t,e){return t[e]===255&&(t[e+1]&246)===240}function WT(t,e){return t[e+1]&1?7:9}function Qm(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function b2(t,e){return e+5<t.length}function gu(t,e){return e+1<t.length&&KT(t,e)}function A2(t,e){return b2(t,e)&&KT(t,e)&&Qm(t,e)<=t.length-e}function R2(t,e){if(gu(t,e)){const n=WT(t,e);if(e+n>=t.length)return!1;const r=Qm(t,e);if(r<=n)return!1;const s=e+r;return s===t.length||gu(t,s)}return!1}function zT(t,e,n,r,s){if(!t.samplerate){const i=w2(e,n,r,s);if(!i)return;t.config=i.config,t.samplerate=i.samplerate,t.channelCount=i.channelCount,t.codec=i.codec,t.manifestCodec=i.manifestCodec,D.log(`parsed codec:${t.codec}, rate:${i.samplerate}, channels:${i.channelCount}`)}}function qT(t){return 1024*9e4/t}function L2(t,e){const n=WT(t,e);if(e+n<=t.length){const r=Qm(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function YT(t,e,n,r,s){const i=qT(t.samplerate),o=r+s*i,a=L2(e,n);let l;if(a){const{frameLength:d,headerLength:f}=a,m=f+d,p=Math.max(0,n+m-e.length);p?(l=new Uint8Array(m-f),l.set(e.subarray(n+f,e.length),0)):l=e.subarray(n+f,n+m);const g={unit:l,pts:o};return p||t.samples.push(g),{sample:g,length:m,missing:p}}const u=e.length-n;return l=new Uint8Array(u),l.set(e.subarray(n,e.length),0),{sample:{unit:l,pts:o},length:u,missing:-1}}let _a=null;const C2=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],k2=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],I2=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],D2=[0,1,1,4];function QT(t,e,n,r,s){if(n+24>e.length)return;const i=XT(e,n);if(i&&n+i.frameLength<=e.length){const o=i.samplesPerFrame*9e4/i.sampleRate,a=r+s*o,l={unit:e.subarray(n,n+i.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(l),{sample:l,length:i.frameLength,missing:0}}}function XT(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,s=t[e+2]>>4&15,i=t[e+2]>>2&3;if(n!==1&&s!==0&&s!==15&&i!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,l=n===3?3-r:r===3?3:4,u=C2[l*14+s-1]*1e3,d=k2[(n===3?0:n===2?1:2)*3+i],f=a===3?1:2,m=I2[n][r],p=D2[r],g=m*8*p,v=Math.floor(m*u/d+o)*p;if(_a===null){const S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_a=S?parseInt(S[1]):0}return!!_a&&_a<=87&&r===2&&u>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:f,frameLength:v,samplesPerFrame:g}}}function Xm(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function JT(t,e){return e+1<t.length&&Xm(t,e)}function P2(t,e){return Xm(t,e)&&4<=t.length-e}function ZT(t,e){if(e+1<t.length&&Xm(t,e)){const r=XT(t,e);let s=4;r!=null&&r.frameLength&&(s=r.frameLength);const i=e+s;return i===t.length||JT(t,i)}return!1}class N2 extends Ym{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Ro(e,0);let r=(n==null?void 0:n.length)||0;if(ZT(e,r))return!1;for(let s=e.length;r<s;r++)if(R2(e,r))return D.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return A2(e,n)}appendFrame(e,n,r){zT(e,this.observer,n,r,e.manifestCodec);const s=YT(e,n,r,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const _2=/\/emsg[-/]ID3/i;class O2{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,s){const i=this.videoTrack=An("video",1),o=this.audioTrack=An("audio",1),a=this.txtTrack=An("text",1);if(this.id3Track=An("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=kT(e);if(l.video){const{id:u,timescale:c,codec:d}=l.video;i.id=u,i.timescale=a.timescale=c,i.codec=d}if(l.audio){const{id:u,timescale:c,codec:d}=l.audio;o.id=u,o.timescale=c,o.codec=d}a.id=RT.text,i.sampleDuration=0,i.duration=o.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return JD(e)}demux(e,n){this.timeOffset=n;let r=e;const s=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=nn(this.remainderData,e));const a=oP(r);this.remainderData=a.remainder,s.samples=a.valid||new Uint8Array}else s.samples=r;const o=this.extractID3Track(s,n);return i.samples=B0(n,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(n,this.timeOffset);return r.samples=B0(e,n),{videoTrack:n,audioTrack:An(),id3Track:s,textTrack:An()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const s=re(e.samples,["emsg"]);s&&s.forEach(i=>{const o=uP(i);if(_2.test(o.schemeIdUri)){const a=Y(o.presentationTime)?o.presentationTime/o.timeScale:n+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const u=o.payload;r.samples.push({data:u,len:u.byteLength,dts:a,pts:a,type:hn.emsg,duration:l})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const e1=(t,e)=>{let n=0,r=5;e+=r;const s=new Uint32Array(1),i=new Uint32Array(1),o=new Uint8Array(1);for(;r>0;){o[0]=t[e];const a=Math.min(r,8),l=8-a;i[0]=4278190080>>>24+l<<l,s[0]=(o[0]&i[0])>>l,n=n?n<<a|s[0]:s[0],e+=1,r-=a}return n};class M2 extends Ym{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const s=t1(e,n,r,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const n=Ro(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&Gm(n)!==void 0&&e1(e,r)<16}}function t1(t,e,n,r,s){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const i=e[n+4]>>6;if(i>=3)return-1;const a=[48e3,44100,32e3][i],l=e[n+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+i]*2;if(n+c>e.length)return-1;const d=e[n+6]>>5;let f=0;d===2?f+=2:(d&1&&d!==1&&(f+=2),d&4&&(f+=2));const m=(e[n+6]<<8|e[n+7])>>12-f&1,g=[2,1,2,3,3,4,4,5][d]+m,v=e[n+5]>>3,y=e[n+5]&7,x=new Uint8Array([i<<6|v<<1|y>>2,(y&3)<<6|d<<3|m<<2|l>>4,l<<4&224]),S=1536/a*9e4,w=r+s*S,E=e.subarray(n,n+c);return t.config=x,t.channelCount=g,t.samplerate=a,t.samples.push({unit:E,pts:w}),c}class F2{constructor(){this.VideoSample=null}createVideoSample(e,n,r,s){return{key:e,frame:!1,pts:n,dts:r,units:[],debug:s,length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,s;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const i=r.units;s=i[i.length-1]}return s}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,s=r.length;if(s){const i=r[s-1];e.pts=i.pts,e.dts=i.dts}else{n.dropped++;return}}n.samples.push(e)}e.debug.length&&D.log(e.pts+"/"+e.dts+":"+e.debug)}}class my{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,s=new Uint8Array(4),i=Math.min(4,n);if(i===0)throw new Error("no bytes available");s.set(e.subarray(r,r+i)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=i*8,this.bytesAvailable-=i}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&D.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let n=8,r=8,s;for(let i=0;i<e;i++)r!==0&&(s=this.readEG(),r=(n+s+256)%256),n=r===0?n:r}readSPS(){let e=0,n=0,r=0,s=0,i,o,a;const l=this.readUByte.bind(this),u=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),f=this.skipBits.bind(this),m=this.skipEG.bind(this),p=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);l();const v=l();if(u(5),f(3),l(),p(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){const b=c();if(b===3&&f(1),p(),p(),f(1),d())for(o=b!==3?8:12,a=0;a<o;a++)d()&&(a<6?g(16):g(64))}p();const y=c();if(y===0)c();else if(y===1)for(f(1),m(),m(),i=c(),a=0;a<i;a++)m();p(),f(1);const x=c(),S=c(),w=u(1);w===0&&f(1),f(1),d()&&(e=c(),n=c(),r=c(),s=c());let E=[1,1];if(d()&&d())switch(l()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:{E=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((x+1)*16-e*2-n*2),height:(2-w)*(S+1)*16-(w?2:4)*(r+s),pixelRatio:E}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class j2 extends F2{parseAVCPES(e,n,r,s,i){const o=this.parseAVCNALu(e,r.data);let a=this.VideoSample,l,u=!1;r.data=null,a&&o.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),o.forEach(c=>{var d;switch(c.type){case 1:{let g=!1;l=!0;const v=c.data;if(u&&v.length>4){const y=new my(v).readSliceType();(y===2||y===4||y===7||y===9)&&(g=!0)}if(g){var f;(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),a.frame=!0,a.key=g;break}case 5:l=!0,(d=a)!=null&&d.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),a.key=!0,a.frame=!0;break;case 6:{l=!0,DT(c.data,1,r.pts,n.samples);break}case 7:{var m,p;l=!0,u=!0;const g=c.data,y=new my(g).readSPS();if(!e.sps||e.width!==y.width||e.height!==y.height||((m=e.pixelRatio)==null?void 0:m[0])!==y.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==y.pixelRatio[1]){e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.sps=[g],e.duration=i;const x=g.subarray(1,4);let S="avc1.";for(let w=0;w<3;w++){let E=x[w].toString(16);E.length<2&&(E="0"+E),S+=E}e.codec=S}break}case 8:l=!0,e.pps=[c.data];break;case 9:l=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"");break;case 12:l=!0;break;default:l=!1,a&&(a.debug+="unknown NAL "+c.type+" ");break}a&&l&&a.units.push(c)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,n){const r=n.byteLength;let s=e.naluState||0;const i=s,o=[];let a=0,l,u,c,d=-1,f=0;for(s===-1&&(d=0,f=n[0]&31,s=0,a=1);a<r;){if(l=n[a++],!s){s=l?0:1;continue}if(s===1){s=l?0:2;continue}if(!l)s=3;else if(l===1){if(u=a-s-1,d>=0){const m={data:n.subarray(d,u),type:f};o.push(m)}else{const m=this.getLastNalUnit(e.samples);m&&(i&&a<=4-i&&m.state&&(m.data=m.data.subarray(0,m.data.byteLength-i)),u>0&&(m.data=nn(m.data,n.subarray(0,u)),m.state=0))}a<r?(c=n[a]&31,d=a,f=c,s=0):s=-1}else s=0}if(d>=0&&s>=0){const m={data:n.subarray(d,r),type:f,state:s};o.push(m)}if(o.length===0){const m=this.getLastNalUnit(e.samples);m&&(m.data=nn(m.data,n))}return e.naluState=s,o}}class U2{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new zm(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,n,r){const s=e[n].unit;if(s.length<=16)return;const i=s.subarray(16,s.length-s.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);s.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)r.set(e.subarray(i,i+16),s);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)e.set(r.subarray(s,s+16),i);return e}decryptAvcSample(e,n,r,s,i){const o=PT(i.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{i.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,s)})}decryptAvcSamples(e,n,r,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){s();return}const i=e[n].units;for(;!(r>=i.length);r++){const o=i[r];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,n,r,s,o),!this.decrypter.isSync()))return}}}}const Xe=188;class fr{constructor(e,n,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.videoParser=new j2}static probe(e){const n=fr.syncOffset(e);return n>0&&D.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const n=e.length;let r=Math.min(Xe*5,n-Xe)+1,s=0;for(;s<r;){let i=!1,o=-1,a=0;for(let l=s;l<n;l+=Xe)if(e[l]===71&&(n-l===Xe||e[l+Xe]===71)){if(a++,o===-1&&(o=l,o!==0&&(r=Math.min(o+Xe*99,e.length-Xe)+1)),i||(i=oh(e,l)===0),i&&a>1&&(o===0&&a>2||l+Xe>r))return o}else{if(a)return-1;break}s++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:RT[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=fr.createTrack("video"),this._audioTrack=fr.createTrack("audio",s),this._id3Track=fr.createTrack("id3"),this._txtTrack=fr.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r,this._duration=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,s=!1){r||(this.sampleAes=null);let i;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,u=this._txtTrack;let c=o.pid,d=o.pesData,f=a.pid,m=l.pid,p=a.pesData,g=l.pesData,v=null,y=this.pmtParsed,x=this._pmtId,S=e.length;if(this.remainderData&&(e=nn(this.remainderData,e),S=e.length,this.remainderData=null),S<Xe&&!s)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:u};const w=Math.max(0,fr.syncOffset(e));S-=(S-w)%Xe,S<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,S,e.buffer.byteLength-S));let E=0;for(let L=w;L<S;L+=Xe)if(e[L]===71){const R=!!(e[L+1]&64),I=oh(e,L),C=(e[L+3]&48)>>4;let k;if(C>1){if(k=L+5+e[L+4],k===L+Xe)continue}else k=L+4;switch(I){case c:R&&(d&&(i=ws(d))&&this.videoParser.parseAVCPES(o,u,i,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(e.subarray(k,L+Xe)),d.size+=L+Xe-k);break;case f:if(R){if(p&&(i=ws(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,i);break;case"mp3":this.parseMPEGPES(a,i);break;case"ac3":this.parseAC3PES(a,i);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(k,L+Xe)),p.size+=L+Xe-k);break;case m:R&&(g&&(i=ws(g))&&this.parseID3PES(l,i),g={data:[],size:0}),g&&(g.data.push(e.subarray(k,L+Xe)),g.size+=L+Xe-k);break;case 0:R&&(k+=e[k]+1),x=this._pmtId=B2(e,k);break;case x:{R&&(k+=e[k]+1);const U=$2(e,k,this.typeSupported,r,this.observer);c=U.videoPid,c>0&&(o.pid=c,o.segmentCodec=U.segmentVideoCodec),f=U.audioPid,f>0&&(a.pid=f,a.segmentCodec=U.segmentAudioCodec),m=U.id3Pid,m>0&&(l.pid=m),v!==null&&!y&&(D.warn(`MPEG-TS PMT found at ${L} after unknown PID '${v}'. Backtracking to sync byte @${w} to parse all TS packets.`),v=null,L=w-188),y=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=I;break}}else E++;E>0&&yu(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`)),o.pesData=d,a.pesData=p,l.pesData=g;const b={audioTrack:a,videoTrack:o,id3Track:l,textTrack:u};return s&&this.extractRemainingSamples(b),b}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:s,textTrack:i}=e,o=r.pesData,a=n.pesData,l=s.pesData;let u;if(o&&(u=ws(o))?(this.videoParser.parseAVCPES(r,i,u,!0,this._duration),r.pesData=null):r.pesData=o,a&&(u=ws(a))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,u);break;case"mp3":this.parseMPEGPES(n,u);break;case"ac3":this.parseAC3PES(n,u);break}n.pesData=null}else a!=null&&a.size&&D.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=a;l&&(u=ws(l))?(this.parseID3PES(s,u),s.pesData=null):s.pesData=l}demuxSampleAes(e,n,r){const s=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new U2(this.observer,this.config,n);return this.decrypt(s,i)}decrypt(e,n){return new Promise(r=>{const{audioTrack:s,videoTrack:i}=e;s.samples&&s.segmentCodec==="aac"?n.decryptAacSamples(s.samples,0,()=>{i.samples?n.decryptAvcSamples(i.samples,0,0,()=>{r(e)}):r(e)}):i.samples&&n.decryptAvcSamples(i.samples,0,0,()=>{r(e)})})}destroy(){this._duration=0}parseAACPES(e,n){let r=0;const s=this.aacOverFlow;let i=n.data;if(s){this.aacOverFlow=null;const d=s.missing,f=s.sample.unit.byteLength;if(d===-1)i=nn(s.sample.unit,i);else{const m=f-d;s.sample.unit.set(i.subarray(0,d),m),e.samples.push(s.sample),r=s.missing}}let o,a;for(o=r,a=i.length;o<a-1&&!gu(i,o);o++);if(o!==r){let d;const f=o<a-1;if(f?d=`AAC PES did not start with ADTS header,offset:${o}`:d="No ADTS header found in AAC PES",yu(this.observer,new Error(d),f),!f)return}zT(e,this.observer,i,o,this.audioCodec);let l;if(n.pts!==void 0)l=n.pts;else if(s){const d=qT(e.samplerate);l=s.sample.pts+d}else{D.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,c;for(;o<a;)if(c=YT(e,i,o,l,u),o+=c.length,c.missing){this.aacOverFlow=c;break}else for(u++;o<a-1&&!gu(i,o);o++);}parseMPEGPES(e,n){const r=n.data,s=r.length;let i=0,o=0;const a=n.pts;if(a===void 0){D.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<s;)if(JT(r,o)){const l=QT(e,r,o,a,i);if(l)o+=l.length,i++;else break}else o++}parseAC3PES(e,n){{const r=n.data,s=n.pts;if(s===void 0){D.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const i=r.length;let o=0,a=0,l;for(;a<i&&(l=t1(e,r,a,s,o++))>0;)a+=l}}parseID3PES(e,n){if(n.pts===void 0){D.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=Ke({},n,{type:this._videoTrack?hn.emsg:hn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function oh(t,e){return((t[e+1]&31)<<8)+t[e+2]}function B2(t,e){return(t[e+10]&31)<<8|t[e+11]}function $2(t,e,n,r,s){const i={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(t[e+1]&15)<<8|t[e+2],a=e+3+o-4,l=(t[e+10]&15)<<8|t[e+11];for(e+=12+l;e<a;){const u=oh(t,e),c=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){ud("ADTS AAC");break}case 15:i.audioPid===-1&&(i.audioPid=u);break;case 21:i.id3Pid===-1&&(i.id3Pid=u);break;case 219:if(!r){ud("H.264");break}case 27:i.videoPid===-1&&(i.videoPid=u,i.segmentVideoCodec="avc");break;case 3:case 4:!n.mpeg&&!n.mp3?D.log("MPEG audio found, not supported in this browser"):i.audioPid===-1&&(i.audioPid=u,i.segmentAudioCodec="mp3");break;case 193:if(!r){ud("AC-3");break}case 129:n.ac3?i.audioPid===-1&&(i.audioPid=u,i.segmentAudioCodec="ac3"):D.log("AC-3 audio found, not supported in this browser");break;case 6:if(i.audioPid===-1&&c>0){let d=e+5,f=c;for(;f>2;){switch(t[d]){case 106:n.ac3!==!0?D.log("AC-3 audio found, not supported in this browser for now"):(i.audioPid=u,i.segmentAudioCodec="ac3");break}const p=t[d+1]+2;d+=p,f-=p}}break;case 194:case 135:return yu(s,new Error("Unsupported EC-3 in M2TS found")),i;case 36:return yu(s,new Error("Unsupported HEVC in M2TS found")),i}e+=c+5}return i}function yu(t,e,n){D.warn(`parsing error: ${e.message}`),t.emit(T.ERROR,T.ERROR,{type:te.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function ud(t){D.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function ws(t){let e=0,n,r,s,i,o;const a=t.data;if(!t||t.size===0)return null;for(;a[0].length<19&&a.length>1;)a[0]=nn(a[0],a[1]),a.splice(1,1);if(n=a[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(r=(n[4]<<8)+n[5],r&&r>t.size-6)return null;const u=n[7];u&192&&(i=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,u&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,i-o>60*9e4&&(D.warn(`${Math.round((i-o)/9e4)}s delta between PTS and DTS, align them`),i=o)):o=i),s=n[8];let c=s+9;if(t.size<=c)return null;t.size-=c;const d=new Uint8Array(t.size);for(let f=0,m=a.length;f<m;f++){n=a[f];let p=n.byteLength;if(c)if(c>p){c-=p;continue}else n=n.subarray(c),p-=c,c=0;d.set(n,e),e+=p}return r&&(r-=s+3),{data:d,pts:i,dts:o,len:r}}return null}class V2 extends Ym{resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Ro(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&Gm(n)!==void 0&&e1(e,r)<=16)return!1;for(let s=e.length;r<s;r++)if(ZT(e,r))return D.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return P2(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return QT(e,n,r,this.basePTS,this.frameIndex)}}class py{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ar=Math.pow(2,32)-1;class P{static init(){P.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in P.types)P.types.hasOwnProperty(e)&&(P.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);P.HDLR_TYPES={video:n,audio:r};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);P.STTS=P.STSC=P.STCO=i,P.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),P.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),P.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),P.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);P.FTYP=P.box(P.types.ftyp,o,l,o,a),P.DINF=P.box(P.types.dinf,P.box(P.types.dref,s))}static box(e,...n){let r=8,s=n.length;const i=s;for(;s--;)r+=n[s].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(e,4),s=0,r=8;s<i;s++)o.set(n[s],r),r+=n[s].byteLength;return o}static hdlr(e){return P.box(P.types.hdlr,P.HDLR_TYPES[e])}static mdat(e){return P.box(P.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(ar+1)),s=Math.floor(n%(ar+1));return P.box(P.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return P.box(P.types.mdia,P.mdhd(e.timescale,e.duration),P.hdlr(e.type),P.minf(e))}static mfhd(e){return P.box(P.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?P.box(P.types.minf,P.box(P.types.smhd,P.SMHD),P.DINF,P.stbl(e)):P.box(P.types.minf,P.box(P.types.vmhd,P.VMHD),P.DINF,P.stbl(e))}static moof(e,n,r){return P.box(P.types.moof,P.mfhd(e),P.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=P.trak(e[n]);return P.box.apply(null,[P.types.moov,P.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(P.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=P.trex(e[n]);return P.box.apply(null,[P.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(ar+1)),s=Math.floor(n%(ar+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return P.box(P.types.mvhd,i)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let s,i;for(s=0;s<n.length;s++)i=n[s].flags,r[s+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return P.box(P.types.sdtp,r)}static stbl(e){return P.box(P.types.stbl,P.stsd(e),P.box(P.types.stts,P.STTS),P.box(P.types.stsc,P.STSC),P.box(P.types.stsz,P.STSZ),P.box(P.types.stco,P.STCO))}static avc1(e){let n=[],r=[],s,i,o;for(s=0;s<e.sps.length;s++)i=e.sps[s],o=i.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(i));for(s=0;s<e.pps.length;s++)i=e.pps[s],o=i.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(i));const a=P.box(P.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return P.box(P.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,P.box(P.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),P.box(P.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const n=e.config.length;return new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const n=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return P.box(P.types.mp4a,P.audioStsd(e),P.box(P.types.esds,P.esds(e)))}static mp3(e){return P.box(P.types[".mp3"],P.audioStsd(e))}static ac3(e){return P.box(P.types["ac-3"],P.audioStsd(e),P.box(P.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?P.box(P.types.stsd,P.STSD,P.mp3(e)):e.segmentCodec==="ac3"?P.box(P.types.stsd,P.STSD,P.ac3(e)):P.box(P.types.stsd,P.STSD,P.mp4a(e)):P.box(P.types.stsd,P.STSD,P.avc1(e))}static tkhd(e){const n=e.id,r=e.duration*e.timescale,s=e.width,i=e.height,o=Math.floor(r/(ar+1)),a=Math.floor(r%(ar+1));return P.box(P.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,i>>8&255,i&255,0,0]))}static traf(e,n){const r=P.sdtp(e),s=e.id,i=Math.floor(n/(ar+1)),o=Math.floor(n%(ar+1));return P.box(P.types.traf,P.box(P.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),P.box(P.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,o>>24,o>>16&255,o>>8&255,o&255])),P.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,P.box(P.types.trak,P.tkhd(e),P.mdia(e))}static trex(e){const n=e.id;return P.box(P.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],s=r.length,i=12+16*s,o=new Uint8Array(i);let a,l,u,c,d,f;for(n+=8+i,o.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),a=0;a<s;a++)l=r[a],u=l.duration,c=l.size,d=l.flags,f=l.cts,o.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return P.box(P.types.trun,o)}static initSegment(e){P.types||P.init();const n=P.moov(e);return nn(P.FTYP,n)}}P.types=void 0;P.HDLR_TYPES=void 0;P.STTS=void 0;P.STSC=void 0;P.STCO=void 0;P.STSZ=void 0;P.VMHD=void 0;P.SMHD=void 0;P.STSD=void 0;P.FTYP=void 0;P.DINF=void 0;const n1=9e4;function Jm(t,e,n=1,r=!1){const s=t*e*n;return r?Math.round(s):s}function G2(t,e,n=1,r=!1){return Jm(t,e,1/n,r)}function Ni(t,e=!1){return Jm(t,1e3,1/n1,e)}function H2(t,e=1){return Jm(t,n1,1/e)}const K2=10*1e3,gy=1024,W2=1152,z2=1536;let bs=null,cd=null;class pl{constructor(e,n,r,s=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,bs===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);bs=o?parseInt(o[1]):0}if(cd===null){const i=navigator.userAgent.match(/Safari\/(\d+)/i);cd=i?parseInt(i[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){D.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){D.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){D.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e[0].pts,s=e.reduce((i,o)=>{let a=o.pts,l=a-i;return l<-4294967296&&(n=!0,a=Yt(a,r),l=a-i),l>0?i:a},r);return n&&D.debug("PTS rollover detected"),s}remux(e,n,r,s,i,o,a,l){let u,c,d,f,m,p,g=i,v=i;const y=e.pid>-1,x=n.pid>-1,S=n.samples.length,w=e.samples.length>0,E=a&&S>0||S>1;if((!y||w)&&(!x||E)||this.ISGenerated||a){if(this.ISGenerated){var L,R,I,C;const H=this.videoTrackConfig;H&&(n.width!==H.width||n.height!==H.height||((L=n.pixelRatio)==null?void 0:L[0])!==((R=H.pixelRatio)==null?void 0:R[0])||((I=n.pixelRatio)==null?void 0:I[1])!==((C=H.pixelRatio)==null?void 0:C[1]))&&this.resetInitSegment()}else d=this.generateIS(e,n,i,o);const k=this.isVideoContiguous;let U=-1,B;if(E&&(U=q2(n.samples),!k&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,U>0){D.warn(`[mp4-remuxer]: Dropped ${U} out of ${S} video samples due to a missing keyframe`);const H=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(U),n.dropped+=U,v+=(n.samples[0].pts-H)/n.inputTimeScale,B=v}else U===-1&&(D.warn(`[mp4-remuxer]: No keyframe found out of ${S} video samples`),p=!1);if(this.ISGenerated){if(w&&E){const H=this.getVideoStartPts(n.samples),V=(Yt(e.samples[0].pts,H)-H)/n.inputTimeScale;g+=Math.max(0,V),v+=Math.max(0,-V)}if(w){if(e.samplerate||(D.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,n,i,o)),c=this.remuxAudio(e,g,this.isAudioContiguous,o,x||E||l===J.AUDIO?v:void 0),E){const H=c?c.endPTS-c.startPTS:0;n.inputTimeScale||(D.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,n,i,o)),u=this.remuxVideo(n,v,k,H)}}else E&&(u=this.remuxVideo(n,v,k,0));u&&(u.firstKeyFrame=U,u.independent=U!==-1,u.firstKeyFramePTS=B)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(m=r1(r,i,this._initPTS,this._initDTS)),s.samples.length&&(f=s1(s,i,this._initPTS))),{audio:c,video:u,initSegment:d,independent:p,text:f,id3:m}}generateIS(e,n,r,s){const i=e.samples,o=n.samples,a=this.typeSupported,l={},u=this._initPTS;let c=!u||s,d="audio/mp4",f,m,p;if(c&&(f=m=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(d="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):P.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(p=e.inputTimeScale,!u||p!==u.timescale?f=m=i[0].pts-Math.round(p*r):c=!1)}if(n.sps&&n.pps&&o.length){if(n.timescale=n.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:P.initSegment([n]),metadata:{width:n.width,height:n.height}},c)if(p=n.inputTimeScale,!u||p!==u.timescale){const g=this.getVideoStartPts(o),v=Math.round(p*r);m=Math.min(m,Yt(o[0].dts,g)-v),f=Math.min(f,g-v)}else c=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:f,timescale:p},this._initDTS={baseTime:m,timescale:p}):f=p=void 0,{tracks:l,initPTS:f,timescale:p}}remuxVideo(e,n,r,s){const i=e.inputTimeScale,o=e.samples,a=[],l=o.length,u=this._initPTS;let c=this.nextAvcDts,d=8,f=this.videoSampleDuration,m,p,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=!1;if(!r||c===null){const M=n*i,O=o[0].pts-Yt(o[0].dts,o[0].pts);bs&&c!==null&&Math.abs(M-O-c)<15e3?r=!0:c=M-O}const x=u.baseTime*i/u.timescale;for(let M=0;M<l;M++){const O=o[M];O.pts=Yt(O.pts-x,c),O.dts=Yt(O.dts-x,c),O.dts<o[M>0?M-1:M].dts&&(y=!0)}y&&o.sort(function(M,O){const z=M.dts-O.dts,G=M.pts-O.pts;return z||G}),m=o[0].dts,p=o[o.length-1].dts;const S=p-m,w=S?Math.round(S/(l-1)):f||e.inputTimeScale/30;if(r){const M=m-c,O=M>w,z=M<-1;if((O||z)&&(O?D.warn(`AVC: ${Ni(M,!0)} ms (${M}dts) hole between fragments detected at ${n.toFixed(3)}`):D.warn(`AVC: ${Ni(-M,!0)} ms (${M}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!z||c>=o[0].pts||bs)){m=c;const G=o[0].pts-M;if(O)o[0].dts=m,o[0].pts=G;else for(let ee=0;ee<o.length&&!(o[ee].dts>G);ee++)o[ee].dts-=M,o[ee].pts-=M;D.log(`Video: Initial PTS/DTS adjusted: ${Ni(G,!0)}/${Ni(m,!0)}, delta: ${Ni(M,!0)} ms`)}}m=Math.max(0,m);let E=0,b=0,L=m;for(let M=0;M<l;M++){const O=o[M],z=O.units,G=z.length;let ee=0;for(let ne=0;ne<G;ne++)ee+=z[ne].data.length;b+=ee,E+=G,O.length=ee,O.dts<L?(O.dts=L,L+=w/4|0||1):L=O.dts,g=Math.min(O.pts,g),v=Math.max(O.pts,v)}p=o[l-1].dts;const R=b+4*E+8;let I;try{I=new Uint8Array(R)}catch(M){this.observer.emit(T.ERROR,T.ERROR,{type:te.MUX_ERROR,details:N.REMUX_ALLOC_ERROR,fatal:!1,error:M,bytes:R,reason:`fail allocating video mdat ${R}`});return}const C=new DataView(I.buffer);C.setUint32(0,R),I.set(P.types.mdat,4);let k=!1,U=Number.POSITIVE_INFINITY,B=Number.POSITIVE_INFINITY,H=Number.NEGATIVE_INFINITY,W=Number.NEGATIVE_INFINITY;for(let M=0;M<l;M++){const O=o[M],z=O.units;let G=0;for(let ue=0,ce=z.length;ue<ce;ue++){const be=z[ue],jn=be.data,vs=be.data.byteLength;C.setUint32(d,vs),d+=4,I.set(jn,d),d+=vs,G+=4+vs}let ee;if(M<l-1)f=o[M+1].dts-O.dts,ee=o[M+1].pts-O.pts;else{const ue=this.config,ce=M>0?O.dts-o[M-1].dts:w;if(ee=M>0?O.pts-o[M-1].pts:w,ue.stretchShortVideoTrack&&this.nextAudioPts!==null){const be=Math.floor(ue.maxBufferHole*i),jn=(s?g+s*i:this.nextAudioPts)-O.pts;jn>be?(f=jn-ce,f<0?f=ce:k=!0,D.log(`[mp4-remuxer]: It is approximately ${jn/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=ce}else f=ce}const ne=Math.round(O.pts-O.dts);U=Math.min(U,f),H=Math.max(H,f),B=Math.min(B,ee),W=Math.max(W,ee),a.push(new yy(O.key,f,G,ne))}if(a.length){if(bs){if(bs<70){const M=a[0].flags;M.dependsOn=2,M.isNonSync=0}}else if(cd&&W-B<H-U&&w/H<.025&&a[0].cts===0){D.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let M=m;for(let O=0,z=a.length;O<z;O++){const G=M+a[O].duration,ee=M+a[O].cts;if(O<z-1){const ne=G+a[O+1].cts;a[O].duration=ne-ee}else a[O].duration=O?a[O-1].duration:w;a[O].cts=0,M=G}}}f=k||!f?w:f,this.nextAvcDts=c=p+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const F={data1:P.moof(e.sequenceNumber++,m,Ke({},e,{samples:a})),data2:I,startPTS:g/i,endPTS:(v+f)/i,startDTS:m/i,endDTS:c/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,F}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return W2;case"ac3":return z2;default:return gy}}remuxAudio(e,n,r,s,i){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,u=this.getSamplesPerFrame(e),c=u*l,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,m=[],p=i!==void 0;let g=e.samples,v=f?0:8,y=this.nextAudioPts||-1;const x=n*o,S=d.baseTime*o/d.timescale;if(this.isAudioContiguous=r=r||g.length&&y>0&&(s&&Math.abs(x-y)<9e3||Math.abs(Yt(g[0].pts-S,x)-y)<20*c),g.forEach(function(V){V.pts=Yt(V.pts-S,x)}),!r||y<0){if(g=g.filter(V=>V.pts>=0),!g.length)return;i===0?y=0:s&&!p?y=Math.max(0,x):y=g[0].pts}if(e.segmentCodec==="aac"){const V=this.config.maxAudioFramesDrift;for(let K=0,F=y;K<g.length;K++){const M=g[K],O=M.pts,z=O-F,G=Math.abs(1e3*z/o);if(z<=-V*c&&p)K===0&&(D.warn(`Audio frame @ ${(O/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*z/o)} ms.`),this.nextAudioPts=y=F=O);else if(z>=V*c&&G<K2&&p){let ee=Math.round(z/c);F=O-ee*c,F<0&&(ee--,F+=c),K===0&&(this.nextAudioPts=y=F),D.warn(`[mp4-remuxer]: Injecting ${ee} audio frame @ ${(F/o).toFixed(3)}s due to ${Math.round(1e3*z/o)} ms gap.`);for(let ne=0;ne<ee;ne++){const ue=Math.max(F,0);let ce=py.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);ce||(D.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ce=M.unit.subarray()),g.splice(K,0,{unit:ce,pts:ue}),F+=c,K++}}M.pts=F,F+=c}}let w=null,E=null,b,L=0,R=g.length;for(;R--;)L+=g[R].unit.byteLength;for(let V=0,K=g.length;V<K;V++){const F=g[V],M=F.unit;let O=F.pts;if(E!==null){const G=m[V-1];G.duration=Math.round((O-E)/l)}else if(r&&e.segmentCodec==="aac"&&(O=y),w=O,L>0){L+=v;try{b=new Uint8Array(L)}catch(G){this.observer.emit(T.ERROR,T.ERROR,{type:te.MUX_ERROR,details:N.REMUX_ALLOC_ERROR,fatal:!1,error:G,bytes:L,reason:`fail allocating audio mdat ${L}`});return}f||(new DataView(b.buffer).setUint32(0,L),b.set(P.types.mdat,4))}else return;b.set(M,v);const z=M.byteLength;v+=z,m.push(new yy(!0,u,z,0)),E=O}const I=m.length;if(!I)return;const C=m[m.length-1];this.nextAudioPts=y=E+l*C.duration;const k=f?new Uint8Array(0):P.moof(e.sequenceNumber++,w/l,Ke({},e,{samples:m}));e.samples=[];const U=w/o,B=y/o,W={data1:k,data2:b,startPTS:U,endPTS:B,startDTS:U,endDTS:B,type:"audio",hasAudio:!0,hasVideo:!1,nb:I};return this.isAudioContiguous=!0,W}remuxEmptyAudio(e,n,r,s){const i=e.inputTimeScale,o=e.samplerate?e.samplerate:i,a=i/o,l=this.nextAudioPts,u=this._initDTS,c=u.baseTime*9e4/u.timescale,d=(l!==null?l:s.startDTS*i)+c,f=s.endDTS*i+c,m=a*gy,p=Math.ceil((f-d)/m),g=py.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(D.warn("[mp4-remuxer]: remux empty Audio"),!g){D.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const v=[];for(let y=0;y<p;y++){const x=d+y*m;v.push({unit:g,pts:x,dts:x})}return e.samples=v,this.remuxAudio(e,n,r,!1)}}function Yt(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function q2(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function r1(t,e,n,r){const s=t.samples.length;if(!s)return;const i=t.inputTimeScale;for(let a=0;a<s;a++){const l=t.samples[a];l.pts=Yt(l.pts-n.baseTime*i/n.timescale,e*i)/i,l.dts=Yt(l.dts-r.baseTime*i/r.timescale,e*i)/i}const o=t.samples;return t.samples=[],{samples:o}}function s1(t,e,n){const r=t.samples.length;if(!r)return;const s=t.inputTimeScale;for(let o=0;o<r;o++){const a=t.samples[o];a.pts=Yt(a.pts-n.baseTime*s/n.timescale,e*s)/s}t.samples.sort((o,a)=>o.pts-a.pts);const i=t.samples;return t.samples=[],{samples:i}}class yy{constructor(e,n,r,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=n,this.size=r,this.cts=s,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class Y2{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,n,r,s){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(tP(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=kT(e);s.audio&&(n=vy(s.audio,ye.AUDIO)),s.video&&(r=vy(s.video,ye.VIDEO));const i={};s.audio&&s.video?i.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:e,id:"main"}:s.audio?i.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:s.video?i.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:D.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,n,r,s,i,o){var a,l;let{initPTS:u,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:s,id3:r,initSegment:void 0};Y(c)||(c=this.lastEndTime=i||0);const f=n.samples;if(!(f!=null&&f.length))return d;const m={initPTS:void 0,timescale:1};let p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(f),p=this.initData),!((l=p)!=null&&l.length))return D.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(m.tracks=this.initTracks,this.emitInitSegment=!1);const g=rP(f,p),v=nP(p,f),y=v===null?i:v;(Q2(u,y,i,g)||m.timescale!==u.timescale&&o)&&(m.initPTS=y-i,u&&u.timescale===1&&D.warn(`Adjusting initPTS by ${m.initPTS-u.baseTime}`),this.initPTS=u={baseTime:m.initPTS,timescale:1});const x=e?y-u.baseTime/u.timescale:c,S=x+g;iP(p,f,u.baseTime/u.timescale),g>0?this.lastEndTime=S:(D.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const w=!!p.audio,E=!!p.video;let b="";w&&(b+="audio"),E&&(b+="video");const L={data1:f,startPTS:x,startDTS:x,endPTS:S,endDTS:S,type:b,hasAudio:w,hasVideo:E,nb:1,dropped:0};return d.audio=L.type==="audio"?L:void 0,d.video=L.type!=="audio"?L:void 0,d.initSegment=m,d.id3=r1(r,i,u,u),s.samples.length&&(d.text=s1(s,i,u)),d}}function Q2(t,e,n,r){if(t===null)return!0;const s=Math.max(r,1),i=e-t.baseTime/t.timescale;return Math.abs(i-n)>s}function vy(t,e){const n=t==null?void 0:t.codec;if(n&&n.length>4)return n;if(e===ye.AUDIO){if(n==="ec-3"||n==="ac-3"||n==="alac")return n;if(n==="fLaC"||n==="Opus")return cu(n,!1);const r="mp4a.40.5";return D.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${r}"`),r}return D.warn(`Unhandled video codec "${n}"`),n==="hvc1"||n==="hev1"?"hvc1.1.6.L120.90":n==="av01"?"av01.0.04M.08":"avc1.42e01e"}let Kn;try{Kn=self.performance.now.bind(self.performance)}catch{D.debug("Unable to use Performance API on this environment"),Kn=ai==null?void 0:ai.Date.now}const gl=[{demux:O2,remux:Y2},{demux:fr,remux:pl},{demux:N2,remux:pl},{demux:V2,remux:pl}];gl.splice(2,0,{demux:M2,remux:pl});class xy{constructor(e,n,r,s,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.vendor=s,this.id=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,s){const i=r.transmuxing;i.executeStart=Kn();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;s&&(this.currentTransmuxState=s);const{contiguous:u,discontinuity:c,trackSwitch:d,accurateTimeOffset:f,timeOffset:m,initSegmentChange:p}=s||a,{audioCodec:g,videoCodec:v,defaultInitPts:y,duration:x,initSegmentData:S}=l,w=X2(o,n);if(w&&w.method==="AES-128"){const R=this.getDecrypter();if(R.isSync()){let I=R.softwareDecrypt(o,w.key.buffer,w.iv.buffer);if(r.part>-1&&(I=R.flush()),!I)return i.executeEnd=Kn(),dd(r);o=new Uint8Array(I)}else return this.decryptionPromise=R.webCryptoDecrypt(o,w.key.buffer,w.iv.buffer).then(I=>{const C=this.push(I,null,r);return this.decryptionPromise=null,C}),this.decryptionPromise}const E=this.needsProbing(c,d);if(E){const R=this.configureTransmuxer(o);if(R)return D.warn(`[transmuxer] ${R.message}`),this.observer.emit(T.ERROR,T.ERROR,{type:te.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,fatal:!1,error:R,reason:R.message}),i.executeEnd=Kn(),dd(r)}(c||d||p||E)&&this.resetInitSegment(S,g,v,x,n),(c||p||E)&&this.resetInitialTimestamp(y),u||this.resetContiguity();const b=this.transmux(o,w,m,f,r),L=this.currentTransmuxState;return L.contiguous=!0,L.discontinuity=!1,L.trackSwitch=!1,i.executeEnd=Kn(),b}flush(e){const n=e.transmuxing;n.executeStart=Kn();const{decrypter:r,currentTransmuxState:s,decryptionPromise:i}=this;if(i)return i.then(()=>this.flush(e));const o=[],{timeOffset:a}=s;if(r){const d=r.flush();d&&o.push(this.push(d,null,e))}const{demuxer:l,remuxer:u}=this;if(!l||!u)return n.executeEnd=Kn(),[dd(e)];const c=l.flush(a);return yl(c)?c.then(d=>(this.flushRemux(o,d,e),o)):(this.flushRemux(o,c,e),o)}flushRemux(e,n,r){const{audioTrack:s,videoTrack:i,id3Track:o,textTrack:a}=n,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;D.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);const c=this.remuxer.remux(s,i,o,a,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=Kn()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,s,i){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,n,r,s),a.resetInitSegment(e,n,r,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,s,i){let o;return n&&n.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,n,r,s,i):o=this.transmuxUnencrypted(e,r,s,i),o}transmuxUnencrypted(e,n,r,s){const{audioTrack:i,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,o,a,l,n,r,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,n,r,s,i){return this.demuxer.demuxSampleAes(e,n,r).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,r,s,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:s,vendor:i}=this;let o;for(let f=0,m=gl.length;f<m;f++){var a;if((a=gl[f].demux)!=null&&a.probe(e)){o=gl[f];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,u=this.remuxer,c=o.remux,d=o.demux;(!u||!(u instanceof c))&&(this.remuxer=new c(r,n,s,i)),(!l||!(l instanceof d))&&(this.demuxer=new d(r,n,s),this.probe=d.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new zm(this.config)),e}}function X2(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const dd=t=>({remuxResult:{},chunkMeta:t});function yl(t){return"then"in t&&t.then instanceof Function}class J2{constructor(e,n,r,s,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=s,this.defaultInitPts=i||null}}class Z2{constructor(e,n,r,s,i,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=s,this.timeOffset=i,this.initSegmentChange=o}}var i1={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new s(c,d||l,f),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],m]:l._events[p].push(m):(l._events[p]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,m=d.length,p=new Array(m);f<m;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,f,m,p){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,x,S;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,f),!0;case 5:return v.fn.call(v.context,c,d,f,m),!0;case 6:return v.fn.call(v.context,c,d,f,m,p),!0}for(S=1,x=new Array(y-1);S<y;S++)x[S-1]=arguments[S];v.fn.apply(v.context,x)}else{var w=v.length,E;for(S=0;S<w;S++)switch(v[S].once&&this.removeListener(u,v[S].fn,void 0,!0),y){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,c);break;case 3:v[S].fn.call(v[S].context,c,d);break;case 4:v[S].fn.call(v[S].context,c,d,f);break;default:if(!x)for(E=1,x=new Array(y-1);E<y;E++)x[E-1]=arguments[E];v[S].fn.apply(v[S].context,x)}}return!0},a.prototype.on=function(u,c,d){return i(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return i(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,f){var m=n?n+u:u;if(!this._events[m])return this;if(!c)return o(this,m),this;var p=this._events[m];if(p.fn)p.fn===c&&(!f||p.once)&&(!d||p.context===d)&&o(this,m);else{for(var g=0,v=[],y=p.length;g<y;g++)(p[g].fn!==c||f&&!p[g].once||d&&p[g].context!==d)&&v.push(p[g]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(i1);var eN=i1.exports,Zm=wD(eN);class o1{constructor(e,n,r,s){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const i=e.config;this.hls=e,this.id=n,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=r,this.onFlush=s;const o=(u,c)=>{c=c||{},c.frag=this.frag,c.id=this.id,u===T.ERROR&&(this.error=c.error),this.hls.trigger(u,c)};this.observer=new Zm,this.observer.on(T.FRAG_DECRYPTED,o),this.observer.on(T.ERROR,o);const a=fs(i.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(i.workerPath||x2())){try{i.workerPath?(D.log(`loading Web Worker ${i.workerPath} for "${n}"`),this.workerContext=E2(i.workerPath)):(D.log(`injecting Web Worker for "${n}"`),this.workerContext=S2()),this.onwmsg=d=>this.onWorkerMessage(d);const{worker:c}=this.workerContext;c.addEventListener("message",this.onwmsg),c.onerror=d=>{const f=new Error(`${d.message}  (${d.filename}:${d.lineno})`);i.enableWorker=!1,D.warn(`Error in "${n}" Web Worker, fallback to inline`),this.hls.trigger(T.ERROR,{type:te.OTHER_ERROR,details:N.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})},c.postMessage({cmd:"init",typeSupported:l,vendor:"",id:n,config:JSON.stringify(i)})}catch(c){D.warn(`Error setting up "${n}" Web Worker, fallback to inline`,c),this.resetWorker(),this.error=null,this.transmuxer=new xy(this.observer,l,i,"",n)}return}this.transmuxer=new xy(this.observer,l,i,"",n)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:n}=this.workerContext;n&&self.URL.revokeObjectURL(n),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,n,r,s,i,o,a,l,u,c){var d,f;u.transmuxing.start=self.performance.now();const{transmuxer:m}=this,p=o?o.start:i.start,g=i.decryptdata,v=this.frag,y=!(v&&i.cc===v.cc),x=!(v&&u.level===v.level),S=v?u.sn-v.sn:-1,w=this.part?u.part-this.part.index:-1,E=S===0&&u.id>1&&u.id===(v==null?void 0:v.stats.chunkCount),b=!x&&(S===1||S===0&&(w===1||E&&w<=0)),L=self.performance.now();(x||S||i.stats.parsing.start===0)&&(i.stats.parsing.start=L),o&&(w||!b)&&(o.stats.parsing.start=L);const R=!(v&&((d=i.initSegment)==null?void 0:d.url)===((f=v.initSegment)==null?void 0:f.url)),I=new Z2(y,b,l,x,p,R);if(!b||y||R){D.log(`[transmuxer-interface, ${i.type}]: Starting new transmux session for sn: ${u.sn} p: ${u.part} level: ${u.level} id: ${u.id}
        discontinuity: ${y}
        trackSwitch: ${x}
        contiguous: ${b}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${R}`);const C=new J2(r,s,n,a,c);this.configureTransmuxer(C)}if(this.frag=i,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:u,state:I},e instanceof ArrayBuffer?[e]:[]);else if(m){const C=m.push(e,g,u,I);yl(C)?(m.async=!0,C.then(k=>{this.handleTransmuxComplete(k)}).catch(k=>{this.transmuxerError(k,u,"transmuxer-interface push error")})):(m.async=!1,this.handleTransmuxComplete(C))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(n){let r=n.flush(e);yl(r)||n.async?(yl(r)||(r=Promise.resolve(r)),r.then(i=>{this.handleFlushResult(i,e)}).catch(i=>{this.transmuxerError(i,e,"transmuxer-interface flush error")})):this.handleFlushResult(r,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}onWorkerMessage(e){const n=e.data;if(!(n!=null&&n.event)){D.warn(`worker message received with no ${n?"event name":"data"}`);return}const r=this.hls;if(this.hls)switch(n.event){case"init":{var s;const i=(s=this.workerContext)==null?void 0:s.objectURL;i&&self.URL.revokeObjectURL(i);break}case"transmuxComplete":{this.handleTransmuxComplete(n.data);break}case"flush":{this.onFlush(n.data);break}case"workerLog":D[n.data.logType]&&D[n.data.logType](n.data.message);break;default:{n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,r.trigger(n.event,n.data);break}}}configureTransmuxer(e){const{transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Sy=100;class tN extends qm{constructor(e,n,r){super(e,n,r,"[audio-stream-controller]",J.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.LEVEL_LOADED,this.onLevelLoaded,this),e.on(T.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(T.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(T.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(T.ERROR,this.onError,this),e.on(T.BUFFER_RESET,this.onBufferReset,this),e.on(T.BUFFER_CREATED,this.onBufferCreated,this),e.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(T.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(T.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(T.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.LEVEL_LOADED,this.onLevelLoaded,this),e.off(T.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(T.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(T.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(T.ERROR,this.onError,this),e.off(T.BUFFER_RESET,this.onBufferReset,this),e.off(T.BUFFER_CREATED,this.onBufferCreated,this),e.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(T.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(T.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(T.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:n,id:r,initPTS:s,timescale:i}){if(r==="main"){const o=n.cc;this.initPTS[n.cc]={baseTime:s,timescale:i},this.log(`InitPTS for cc: ${o} found from main: ${s}`),this.videoTrackCC=o,this.state===j.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=j.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Sy),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=j.IDLE):(this.loadedmetadata=!1,this.state=j.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case j.IDLE:this.doTickIdle();break;case j.WAITING_TRACK:{var e;const{levels:r,trackId:s}=this,i=r==null||(e=r[s])==null?void 0:e.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=j.WAITING_INIT_PTS}break}case j.FRAG_LOADING_WAITING_RETRY:{var n;const r=performance.now(),s=this.retryDate;if(!s||r>=s||(n=this.media)!=null&&n.seeking){const{levels:i,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((i==null?void 0:i[o])||null),this.state=j.IDLE}break}case j.WAITING_INIT_PTS:{const r=this.waitingData;if(r){const{frag:s,part:i,cache:o,complete:a}=r;if(this.initPTS[s.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=j.FRAG_LOADING;const l=o.flush(),u={frag:s,part:i,payload:l,networkDetails:null};this._handleFragmentLoadProgress(u),a&&super._handleFragmentLoadComplete(u)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${s.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),u=Ee.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);ih(u.end,this.config.maxFragLookUpTolerance,s)<0&&(this.log(`Waiting fragment cc (${s.cc}) @ ${s.start} cancelled because another fragment at ${u.end} is needed`),this.clearWaitingFragment())}}else this.state=j.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=j.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:n,media:r,trackId:s}=this,i=e.config;if(!this.buffering||!r&&(this.startFragRequested||!i.startFragPrefetch)||!(n!=null&&n[s]))return;const o=n[s],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a)){this.state=j.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,ye.AUDIO,J.AUDIO));const u=this.getFwdBufferInfo(l,J.AUDIO);if(u===null)return;if(!this.switchingTrack&&this._streamEnded(u,a)){e.trigger(T.BUFFER_EOS,{type:"audio"}),this.state=j.ENDED;return}const c=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,J.MAIN),d=u.len,f=this.getMaxBufferLength(c==null?void 0:c.len),m=a.fragments,p=m[0].start,g=this.getLoadPosition(),v=this.flushing?g:u.end;if(this.switchingTrack&&r){const w=g;a.PTSKnown&&w<p&&(u.end>p||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=p+.05)}if(d>=f&&!this.switchingTrack&&v<m[m.length-1].start)return;let y=this.getNextFragment(v,a),x=!1;if(y&&this.isLoopLoading(y,v)&&(x=!!y.gap,y=this.getNextFragmentLoopLoading(y,a,u,J.MAIN,f)),!y){this.bufferFlushed=!0;return}const S=c&&y.start>c.end+a.targetduration;if(S||!(c!=null&&c.len)&&u.len){const w=this.getAppendedFrag(y.start,J.MAIN);if(w===null||(x||(x=!!w.gap||!!S&&c.len===0),S&&!x||x&&u.nextStart&&u.nextStart<w.end))return}this.loadFragment(y,o,v)}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.min(Math.max(n,e),this.config.maxMaxBufferLength):n}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new li(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),r?this.setInterval(Sy):this.resetTransmuxer(),r?(this.switchingTrack=n,this.state=j.IDLE,this.flushAudioIfNeeded(n)):(this.switchingTrack=null,this.bufferedTrack=n,this.state=j.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,n){this.mainDetails=n.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(T.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,n){var r;if(this.mainDetails==null){this.cachedTrackLoadedData=n;return}const{levels:s}=this,{details:i,id:o}=n;if(!s){this.warn(`Audio tracks were reset while loading level ${o}`);return}this.log(`Audio track ${o} loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const a=s[o];let l=0;if(i.live||(r=a.details)!=null&&r.live){this.checkLiveUpdate(i);const c=this.mainDetails;if(i.deltaUpdateFailed||!c)return;if(!a.details&&i.hasProgramDateTime&&c.hasProgramDateTime)pu(i,c),l=i.fragments[0].start;else{var u;l=this.alignPlaylists(i,a.details,(u=this.levelLastLoaded)==null?void 0:u.details)}}a.details=i,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!i.live)&&this.setStartPosition(this.mainDetails||i,l),this.state===j.WAITING_TRACK&&!this.waitForCdnTuneIn(i)&&(this.state=j.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:s,payload:i}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const u=l[a];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const c=u.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const d=o.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new o1(this.hls,J.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const m=this.initPTS[r.cc],p=(n=r.initSegment)==null?void 0:n.data;if(m!==void 0){const v=s?s.index:-1,y=v!==-1,x=new Wm(r.level,r.sn,r.stats.chunkCount,i.byteLength,v,y);f.push(i,p,d,"",r,s,c.totalduration,!1,x,m)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:g}=this.waitingData=this.waitingData||{frag:r,part:s,cache:new HT,complete:!1};g.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=j.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,n){const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer||null)}onFragBuffered(e,n){const{frag:r,part:s}=n;if(r.type!==J.AUDIO){if(!this.loadedmetadata&&r.type===J.MAIN){const i=this.videoBuffer||this.media;i&&Ee.getBuffered(i).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(r.sn!=="initSegment"){this.fragPrevious=r;const i=this.switchingTrack;i&&(this.bufferedTrack=i,this.switchingTrack=null,this.hls.trigger(T.AUDIO_TRACK_SWITCHED,nt({},i)))}this.fragBufferedComplete(r,s)}onError(e,n){var r;if(n.fatal){this.state=j.ERROR;return}switch(n.details){case N.FRAG_GAP:case N.FRAG_PARSING_ERROR:case N.FRAG_DECRYPT_ERROR:case N.FRAG_LOAD_ERROR:case N.FRAG_LOAD_TIMEOUT:case N.KEY_LOAD_ERROR:case N.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(J.AUDIO,n);break;case N.AUDIO_TRACK_LOAD_ERROR:case N.AUDIO_TRACK_LOAD_TIMEOUT:case N.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===j.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===fe.AUDIO_TRACK&&(this.state=j.IDLE);break;case N.BUFFER_APPEND_ERROR:case N.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="audio")return;if(n.details===N.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case N.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==ye.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==ye.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===j.ENDED&&(this.state=j.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,J.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:s}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:u,level:c}=a,{details:d}=c,{audio:f,text:m,id3:p,initSegment:g}=i;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=j.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const v=l.initSegment||l;this._bufferInitSegment(c,g.tracks,v,o),s.trigger(T.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:r,tracks:g.tracks})}if(f){const{startPTS:v,endPTS:y,startDTS:x,endDTS:S}=f;u&&(u.elementaryStreams[ye.AUDIO]={startPTS:v,endPTS:y,startDTS:x,endDTS:S}),l.setElementaryStreamInfo(ye.AUDIO,v,y,x,S),this.bufferFragmentData(f,l,u,o)}if(p!=null&&(n=p.samples)!=null&&n.length){const v=Ke({id:r,frag:l,details:d},p);s.trigger(T.FRAG_PARSING_METADATA,v)}if(m){const v=Ke({id:r,frag:l,details:d},m);s.trigger(T.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,n,r,s){if(this.state!==j.PARSING)return;n.video&&delete n.video;const i=n.audio;if(!i)return;i.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${o}/${i.codec}]`),o&&o.split(",").length===1&&(i.levelCodec=o),this.hls.trigger(T.BUFFER_CODECS,n);const a=i.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:r,part:null,chunkMeta:s,parent:r.type,data:a};this.hls.trigger(T.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,n,r){const s=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||s===et.NOT_LOADED||s===et.PARTIAL){var i;if(e.sn==="initSegment")this._loadInitSegment(e,n);else if((i=n.details)!=null&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=j.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragments[0].start!==n.details.fragments[0].start&&pu(n.details,o)}else this.startFragRequested=!0,super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:r,assocLang:s,characteristics:i,audioCodec:o,channels:a}=this.bufferedTrack;rs({name:n,lang:r,assocLang:s,characteristics:i,audioCodec:o,channels:a},e,Gr)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(T.AUDIO_TRACK_SWITCHED,nt({},e))}}function a1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!ko(t[n].attrs,e[n].attrs))return!1;return!0}function ko(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>t[s]!==e[s])}function ah(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class nN extends Km{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.MANIFEST_PARSED,this.onManifestParsed,this),e.on(T.LEVEL_LOADING,this.onLevelLoading,this),e.on(T.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(T.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(T.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.MANIFEST_PARSED,this.onManifestParsed,this),e.off(T.LEVEL_LOADING,this.onLevelLoading,this),e.off(T.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(T.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(T.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:s,details:i}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==s){this.warn(`Audio track with id:${r} and group:${s} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Audio track ${r} "${o.name}" lang:${o.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,s=this.groupIds;let i=this.currentTrack;if(!r||(s==null?void 0:s.length)!==(r==null?void 0:r.length)||r!=null&&r.some(a=>(s==null?void 0:s.indexOf(a))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(f=>!r||r.indexOf(f.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(f=>f.default)&&(this.selectDefaultTrack=!1),a.forEach((f,m)=>{f.id=m});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!i&&l){const f=In(l,a,Gr);if(f>-1)i=a[f];else{const m=In(l,this.tracks);i=this.tracks[m]}}let u=this.findTrackId(i);u===-1&&i&&(u=this.findTrackId(null));const c={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(T.AUDIO_TRACKS_UPDATED,c);const d=this.trackId;if(u!==-1&&d===-1)this.setAudioTrack(u);else if(a.length&&d===-1){var o;const f=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(f.message),this.hls.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}else this.shouldReloadPlaylist(i)&&this.setAudioTrack(this.trackId)}onError(e,n){n.fatal||!n.context||n.context.type===fe.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(n))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const s=this.currentTrack;if(s&&rs(e,s,Gr))return s;const i=In(e,this.tracksInGroup,Gr);if(i>-1){const o=this.tracksInGroup[i];return this.setAudioTrack(i),o}else if(s){let o=n.loadLevel;o===-1&&(o=n.firstAutoLevel);const a=n2(e,n.levels,r,o,Gr);if(a===-1)return null;n.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=In(e,r);if(o>-1)return r[o]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,s=n[e],i=s.details&&!s.details.live;if(e===this.trackId&&s===r&&i||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(T.AUDIO_TRACK_SWITCHING,nt({},s)),i))return;const o=this.switchParams(s.url,r==null?void 0:r.details,s.details);this.loadPlaylist(o)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const s=n[r];if(!(this.selectDefaultTrack&&!s.default)&&(!e||rs(e,s,Gr)))return r}if(e){const{name:r,lang:s,assocLang:i,characteristics:o,audioCodec:a,channels:l}=e;for(let u=0;u<n.length;u++){const c=n[u];if(rs({name:r,lang:s,assocLang:i,characteristics:o,audioCodec:a,channels:l},c,Gr))return u}for(let u=0;u<n.length;u++){const c=n[u];if(ko(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<n.length;u++){const c=n[u];if(ko(e.attrs,c.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){super.loadPlaylist();const r=n.id,s=n.groupId;let i=n.url;if(e)try{i=e.addDirectives(i)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${r} "${n.name}" lang:${n.lang} group:${s}`),this.clearTimer(),this.hls.trigger(T.AUDIO_TRACK_LOADING,{url:i,id:r,groupId:s,deliveryDirectives:e||null})}}}const Ey=500;class rN extends qm{constructor(e,n,r){super(e,n,r,"[subtitle-stream-controller]",J.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.LEVEL_LOADED,this.onLevelLoaded,this),e.on(T.ERROR,this.onError,this),e.on(T.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(T.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(T.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(T.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(T.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.LEVEL_LOADED,this.onLevelLoaded,this),e.off(T.ERROR,this.onError,this),e.off(T.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(T.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(T.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(T.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(T.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=j.IDLE,this.setInterval(Ey),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:s}=n;if(this.fragPrevious=r,this.state=j.IDLE,!s)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let o;const a=r.start;for(let u=0;u<i.length;u++)if(a>=i[u].start&&a<=i[u].end){o=i[u];break}const l=r.start+r.duration;o?o.end=l:(o={start:a,end:l},i.push(o)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null)}onBufferFlushing(e,n){const{startOffset:r,endOffset:s}=n;if(r===0&&s!==Number.POSITIVE_INFINITY){const i=s-1;if(i<=0)return;n.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=i){o.shift();continue}else if(o[a].start<i)o[a].start=i;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(r,i,J.SUBTITLE)}}onFragBuffered(e,n){if(!this.loadedmetadata&&n.frag.type===J.MAIN){var r;(r=this.media)!=null&&r.buffered.length&&(this.loadedmetadata=!0)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===J.SUBTITLE&&(n.details===N.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==j.STOPPED&&(this.state=j.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&a1(this.levels,n)){this.levels=n.map(r=>new li(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const s=new li(r);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,J.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.setInterval(Ey)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:s,levels:i}=this,{details:o,id:a}=n;if(!i){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=i[a];if(a>=i.length||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(o.live||(r=l.details)!=null&&r.live){const d=this.mainDetails;if(o.deltaUpdateFailed||!d)return;const f=d.fragments[0];if(!l.details)o.hasProgramDateTime&&d.hasProgramDateTime?(pu(o,d),u=o.fragments[0].start):f&&(u=f.start,sh(o,u));else{var c;u=this.alignPlaylists(o,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),u===0&&f&&(u=f.start,sh(o,u))}}l.details=o,this.levelLastLoaded=l,a===s&&(!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,u),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===j.IDLE&&(mu(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,s=n.decryptdata,i=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&s!=null&&s.key&&s.iv&&s.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(r),s.key.buffer,s.iv.buffer).catch(a=>{throw i.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:n}),a}).then(a=>{const l=performance.now();i.trigger(T.FRAG_DECRYPTED,{frag:n,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=j.IDLE})}}doTick(){if(!this.media){this.state=j.IDLE;return}if(this.state===j.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details)return;const{config:s}=this,i=this.getLoadPosition(),o=Ee.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,s.maxBufferHole),{end:a,len:l}=o,u=this.getFwdBufferInfo(this.media,J.MAIN),c=r.details,d=this.getMaxBufferLength(u==null?void 0:u.len)+c.levelTargetDuration;if(l>d)return;const f=c.fragments,m=f.length,p=c.edge;let g=null;const v=this.fragPrevious;if(a<p){const y=s.maxFragLookUpTolerance,x=a>p-y?0:y;g=mu(v,f,Math.max(f[0].start,a),x),!g&&v&&v.start<f[0].start&&(g=f[0])}else g=f[m-1];if(!g)return;if(g=this.mapToInitFragWhenRequired(g),g.sn!=="initSegment"){const y=g.sn-c.startSN,x=f[y-1];x&&x.cc===g.cc&&this.fragmentTracker.getState(x)===et.NOT_LOADED&&(g=x)}this.fragmentTracker.getState(g)===et.NOT_LOADED&&this.loadFragment(g,r,a)}}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.max(n,e):n}loadFragment(e,n,r){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,n):(this.startFragRequested=!0,super.loadFragment(e,n,r))}get mediaBufferTimeRanges(){return new sN(this.tracksBuffered[this.currentTrackId]||[])}}class sN{constructor(e){this.buffered=void 0;const n=(r,s,i)=>{if(s=s>>>0,s>i-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${i})`);return e[s][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}class iN extends Km{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=fl(this.media.textTracks);for(let i=0;i<r.length;i++)if(r[i].mode==="hidden")n=r[i];else if(r[i].mode==="showing"){n=r[i];break}const s=this.findTrackForTextTrack(n);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.MANIFEST_PARSED,this.onManifestParsed,this),e.on(T.LEVEL_LOADING,this.onLevelLoading,this),e.on(T.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(T.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(T.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.MANIFEST_PARSED,this.onManifestParsed,this),e.off(T.LEVEL_LOADING,this.onLevelLoading,this),e.off(T.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(T.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(T.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),fl(this.media.textTracks).forEach(n=>{Fs(n)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:s,details:i}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==s){this.warn(`Subtitle track with id:${r} and group:${s} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Subtitle track ${r} "${o.name}" lang:${o.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,s=this.groupIds;let i=this.currentTrack;if(!r||(s==null?void 0:s.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(s==null?void 0:s.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(c=>!r||r.indexOf(c.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(c=>c.default)&&(this.selectDefaultTrack=!1),o.forEach((c,d)=>{c.id=d});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!i&&a){this.selectDefaultTrack=!1;const c=In(a,o);if(c>-1)i=o[c];else{const d=In(a,this.tracks);i=this.tracks[d]}}let l=this.findTrackId(i);l===-1&&i&&(l=this.findTrackId(null));const u={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(T.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let s=0;s<n.length;s++){const i=n[s];if(!(r&&!i.default||!r&&!e)&&(!e||rs(i,e)))return s}if(e){for(let s=0;s<n.length;s++){const i=n[s];if(ko(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<n.length;s++){const i=n[s];if(ko(e.attrs,i.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const s=n[r];if(ah(s,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===fe.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&rs(e,r))return r;const s=In(e,this.tracksInGroup);if(s>-1){const i=this.tracksInGroup[s];return this.setSubtitleTrack(s),i}else{if(r)return null;{const i=In(e,n);if(i>-1)return n[i]}}}}return null}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){const r=n.id,s=n.groupId;let i=n.url;if(e)try{i=e.addDirectives(i)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(T.SUBTITLE_TRACK_LOADING,{url:i,id:r,groupId:s,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=fl(e.textTracks),r=this.currentTrack;let s;if(r&&(s=n.filter(i=>ah(r,i))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(i=>{i.mode!=="disabled"&&i!==s&&(i.mode="disabled")}),s){const i=this.subtitleDisplay?"showing":"hidden";s.mode!==i&&(s.mode=i)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!Y(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,s=n[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(T.SUBTITLE_TRACK_SWITCH,{id:e});return}const i=!!s.details&&!s.details.live;if(e===this.trackId&&s===r&&i)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:o,groupId:a="",name:l,type:u,url:c}=s;this.hls.trigger(T.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:u,url:c});const d=this.switchParams(s.url,r==null?void 0:r.details,s.details);this.loadPlaylist(d)}}class oN{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,n,r){const s=this.queues[n];s.push(e),s.length===1&&!r&&this.executeNext(n)}insertAbort(e,n){this.queues[n].unshift(e),this.executeNext(n)}appendBlocker(e){let n;const r=new Promise(i=>{n=i}),s={execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(s,e),r}executeNext(e){const n=this.queues[e];if(n.length){const r=n[0];try{r.execute()}catch(s){D.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${s}`),r.onError(s);const i=this.buffers[e];i!=null&&i.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const Ty=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class aN{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=r=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:r,mediaSource:s}=this;this.log("Media source opened"),r&&(r.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(T.MEDIA_ATTACHED,{media:r,mediaSource:s})),s&&s.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:s}=this;r!==s&&D.error(`Media element src was set while attaching MediaSource (${s} > ${r})`)},this.hls=e;const n="[buffer-controller]";this.appendSource=gP(fs(e.config.preferManagedMediaSource)),this.log=D.log.bind(D,n),this.warn=D.warn.bind(D,n),this.error=D.error.bind(D,n),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(T.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.MANIFEST_PARSED,this.onManifestParsed,this),e.on(T.BUFFER_RESET,this.onBufferReset,this),e.on(T.BUFFER_APPENDING,this.onBufferAppending,this),e.on(T.BUFFER_CODECS,this.onBufferCodecs,this),e.on(T.BUFFER_EOS,this.onBufferEos,this),e.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(T.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(T.FRAG_PARSED,this.onFragParsed,this),e.on(T.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(T.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.MANIFEST_PARSED,this.onManifestParsed,this),e.off(T.BUFFER_RESET,this.onBufferReset,this),e.off(T.BUFFER_APPENDING,this.onBufferAppending,this),e.off(T.BUFFER_CODECS,this.onBufferCodecs,this),e.off(T.BUFFER_EOS,this.onBufferEos,this),e.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(T.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(T.FRAG_PARSED,this.onFragParsed,this),e.off(T.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new oN(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){let r=2;(n.audio&&!n.video||!n.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,n){const r=this.media=n.media,s=fs(this.appendSource);if(r&&s){var i;const o=this.mediaSource=new s;this.log(`created media source: ${(i=o.constructor)==null?void 0:i.name}`),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{r.removeAttribute("src");const l=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||l&&o instanceof l,wy(r),lN(r,a),r.load()}catch{r.src=a}else r.src=a;r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:n,_objectUrl:r}=this;if(n){if(this.log("media source detaching"),n.readyState==="open")try{n.endOfStream()}catch(s){this.warn(`onMediaDetaching: ${s.message} while calling endOfStream`)}this.onBufferReset(),n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(e.removeAttribute("src"),this.appendSource&&wy(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(T.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const n=this.sourceBuffer[e];try{if(n){var r;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}}catch(s){this.warn(`onBufferReset ${e}`,s)}}onBufferCodecs(e,n){const r=this.getSourceBufferTypes().length,s=Object.keys(n);if(s.forEach(o=>{if(r){const l=this.tracks[o];if(l&&typeof l.buffer.changeType=="function"){var a;const{id:u,codec:c,levelCodec:d,container:f,metadata:m}=n[o],p=H0(l.codec,l.levelCodec),g=p==null?void 0:p.replace(Ty,"$1");let v=H0(c,d);const y=(a=v)==null?void 0:a.replace(Ty,"$1");if(v&&g!==y){o.slice(0,5)==="audio"&&(v=cu(v,this.appendSource));const x=`${f};codecs=${v}`;this.appendChangeType(o,x),this.log(`switching codec ${p} to ${v}`),this.tracks[o]={buffer:l.buffer,codec:c,container:f,levelCodec:d,metadata:m,id:u}}}}else this.pendingTracks[o]=n[o]}),r)return;const i=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==i&&(this.log(`${i} bufferCodec event(s) expected ${s.join(",")}`),this.bufferCodecEventsExpected=i),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,n){const{operationQueue:r}=this,s={execute:()=>{const i=this.sourceBuffer[e];i&&(this.log(`changing ${e} sourceBuffer type to ${n}`),i.changeType(n)),r.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:i=>{this.warn(`Failed to change ${e} SourceBuffer type`,i)}};r.append(s,e,!!this.pendingTracks[e])}onBufferAppending(e,n){const{hls:r,operationQueue:s,tracks:i}=this,{data:o,type:a,frag:l,part:u,chunkMeta:c}=n,d=c.buffering[a],f=self.performance.now();d.start=f;const m=l.stats.buffering,p=u?u.stats.buffering:null;m.start===0&&(m.start=f),p&&p.start===0&&(p.start=f);const g=i.audio;let v=!1;a==="audio"&&(g==null?void 0:g.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const y=l.start,x={execute:()=>{if(d.executeStart=self.performance.now(),v){const S=this.sourceBuffer[a];if(S){const w=y-S.timestampOffset;Math.abs(w)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${y} (delta: ${w}) sn: ${l.sn})`),S.timestampOffset=y)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const S=self.performance.now();d.executeEnd=d.end=S,m.first===0&&(m.first=S),p&&p.first===0&&(p.first=S);const{sourceBuffer:w}=this,E={};for(const b in w)E[b]=Ee.getBuffered(w[b]);this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(T.BUFFER_APPENDED,{type:a,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:E})},onError:S=>{const w={type:te.MEDIA_ERROR,parent:l.type,details:N.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:l,part:u,chunkMeta:c,error:S,err:S,fatal:!1};if(S.code===DOMException.QUOTA_EXCEEDED_ERR)w.details=N.BUFFER_FULL_ERROR;else{const E=++this.appendErrors[a];w.details=N.BUFFER_APPEND_ERROR,this.warn(`Failed ${E}/${r.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),E>=r.config.appendErrorMaxRetry&&(w.fatal=!0)}r.trigger(T.ERROR,w)}};s.append(x,a,!!this.pendingTracks[a])}onBufferFlushing(e,n){const{operationQueue:r}=this,s=i=>({execute:this.removeExecutor.bind(this,i,n.startOffset,n.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(T.BUFFER_FLUSHED,{type:i})},onError:o=>{this.warn(`Failed to remove from ${i} SourceBuffer`,o)}});n.type?r.append(s(n.type),n.type):this.getSourceBufferTypes().forEach(i=>{r.append(s(i),i)})}onFragParsed(e,n){const{frag:r,part:s}=n,i=[],o=s?s.elementaryStreams:r.elementaryStreams;o[ye.AUDIOVIDEO]?i.push("audiovideo"):(o[ye.AUDIO]&&i.push("audio"),o[ye.VIDEO]&&i.push("video"));const a=()=>{const l=self.performance.now();r.stats.buffering.end=l,s&&(s.stats.buffering.end=l);const u=s?s.stats:r.stats;this.hls.trigger(T.FRAG_BUFFERED,{frag:r,part:s,stats:u,id:r.type})};i.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(a,i)}onFragChanged(e,n){this.trimBuffers()}onBufferEos(e,n){this.getSourceBufferTypes().reduce((s,i)=>{const o=this.sourceBuffer[i];return o&&(!n.type||n.type===i)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${i} sourceBuffer now EOS`))),s&&!!(!o||o.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(i=>{const o=this.sourceBuffer[i];o&&(o.ending=!1)});const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream()}))}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.getSourceBufferTypes().length)return;const i=e.config,o=r.currentTime,a=n.levelTargetDuration,l=n.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Y(l)&&l>0){const u=Math.max(l,a),c=Math.floor(o/a)*a-u;this.flushBackBuffer(o,a,c)}if(Y(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const u=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),c=Math.max(u,a),d=Math.floor(o/a)*a+c;this.flushFrontBuffer(o,a,d)}}flushBackBuffer(e,n,r){const{details:s,sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(a=>{const l=i[a];if(l){const u=Ee.getBuffered(l);if(u.length>0&&r>u.start(0)){if(this.hls.trigger(T.BACK_BUFFER_REACHED,{bufferEnd:r}),s!=null&&s.live)this.hls.trigger(T.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(l.ended&&u.end(u.length-1)-e<n*2){this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(T.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:a})}}})}flushFrontBuffer(e,n,r){const{sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(o=>{const a=s[o];if(a){const l=Ee.getBuffered(a),u=l.length;if(u<2)return;const c=l.start(u-1),d=l.end(u-1);if(r>c||e>=c&&e<=d)return;if(a.ended&&e-d<2*n){this.log(`Cannot flush ${o} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(T.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:o})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:n,media:r,mediaSource:s}=this,i=e.fragments[0].start+e.totalduration,o=r.duration,a=Y(s.duration)?s.duration:0;e.live&&n.config.liveDurationInfinity?(s.duration=1/0,this.updateSeekableRange(e)):(i>a&&i>o||!Y(o))&&(this.log(`Updating Media Source duration to ${i.toFixed(3)}`),s.duration=i)}updateSeekableRange(e){const n=this.mediaSource,r=e.fragments;if(r.length&&e.live&&n!=null&&n.setLiveSeekableRange){const i=Math.max(0,r[0].start),o=Math.max(i,i+e.totalduration);this.log(`Media Source duration is set to ${n.duration}. Setting seekable range to ${i}-${o}.`),n.setLiveSeekableRange(i,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:n,pendingTracks:r}=this,s=Object.keys(r).length;if(s&&(!e||s===2||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};const i=this.getSourceBufferTypes();if(i.length)this.hls.trigger(T.BUFFER_CREATED,{tracks:this.tracks}),i.forEach(o=>{n.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:n,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!n[i]){var s;const o=e[i];if(!o)throw Error(`source buffer exists for track ${i}, however track does not`);let a=((s=o.levelCodec)==null?void 0:s.indexOf(","))===-1?o.levelCodec:o.codec;a&&i.slice(0,5)==="audio"&&(a=cu(a,this.appendSource));const l=`${o.container};codecs=${a}`;this.log(`creating sourceBuffer(${l})`);try{const u=n[i]=r.addSourceBuffer(l),c=i;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(c,"bufferedchange",(d,f)=>{const m=f.removedRanges;m!=null&&m.length&&this.hls.trigger(T.BUFFER_FLUSHED,{type:i})}),this.tracks[i]={buffer:u,codec:a,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(u){this.error(`error while trying to add sourceBuffer: ${u.message}`),this.hls.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:i,mimeType:l})}}}get mediaSrc(){var e,n;const r=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return r==null?void 0:r.src}_onSBUpdateStart(e){const{operationQueue:n}=this;n.current(e).onStart()}_onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:r}=this;r.current(e).onComplete(),r.shiftAndExecuteNext(e)}_onSBUpdateError(e,n){var r;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${s}`,n),this.hls.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(s)}removeExecutor(e,n,r){const{media:s,mediaSource:i,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!s||!i||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),o.shiftAndExecuteNext(e);return}const u=Y(s.duration)?s.duration:1/0,c=Y(i.duration)?i.duration:1/0,d=Math.max(0,n),f=Math.min(r,u,c);f>d&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${d},${f}] from the ${e} SourceBuffer`),l.remove(d,f)):o.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.sourceBuffer[n];if(!r){if(!this.pendingTracks[n])throw new Error(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);return}r.ended=!1,r.appendBuffer(e)}blockBuffers(e,n=this.getSourceBufferTypes()){if(!n.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:r}=this,s=n.map(i=>r.appendBlocker(i));Promise.all(s).then(()=>{e(),n.forEach(i=>{const o=this.sourceBuffer[i];o!=null&&o.updating||r.shiftAndExecuteNext(i)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,n,r){const s=this.sourceBuffer[e];if(!s)return;const i=r.bind(this,e);this.listeners[e].push({event:n,listener:i}),s.addEventListener(n,i)}removeBufferListeners(e){const n=this.sourceBuffer[e];n&&this.listeners[e].forEach(r=>{n.removeEventListener(r.event,r.listener)})}}function wy(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function lN(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}const uN={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},l1=t=>String.fromCharCode(uN[t]||t),ln=15,Vn=100,cN={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},dN={17:2,18:4,21:6,22:8,23:10,19:13,20:15},fN={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},hN={25:2,26:4,29:6,30:8,31:10,27:13,28:15},mN=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class pN{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;D.log(`${this.time} [${e}] ${r}`)}}}const jr=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class u1{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const s=n[r];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class gN{constructor(){this.uchar=" ",this.penState=new u1}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class yN{constructor(e){this.chars=[],this.pos=0,this.currPenState=new u1,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<Vn;n++)this.chars.push(new gN);this.logger=e}equals(e){for(let n=0;n<Vn;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<Vn;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<Vn;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Vn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Vn)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=l1(e);if(this.pos>=Vn){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<Vn;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<Vn;r++){const s=this.chars[r].uchar;s!==" "&&(n=!1),e.push(s)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class fd{constructor(e){this.rows=[],this.currRow=ln-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<ln;n++)this.rows.push(new yN(e));this.logger=e}reset(){for(let e=0;e<ln;e++)this.rows[e].clear();this.currRow=ln-1}equals(e){let n=!0;for(let r=0;r<ln;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<ln;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<ln;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let a=0;a<ln;a++)this.rows[a].clear();const i=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[i].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[n-this.nrRollUpRows+u+1].copy(o.rows[i+u])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const i=e.indent,o=Math.max(i-1,0);r.setCursor(e.indent),e.color=r.chars[o].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",s=-1;for(let i=0;i<ln;i++){const o=this.rows[i].getTextString();o&&(s=i+1,e?n.push("Row "+s+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class by{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new fd(r),this.nonDisplayedMemory=new fd(r),this.lastOutputScreen=new fd(r),this.currRollUpRow=this.displayedMemory.rows[ln-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ln-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=s[r]}this.logger.log(2,"MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Ay{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=xN(),this.logger=void 0;const s=this.logger=new pN;this.channels=[null,new by(e,n,s),new by(e+1,r,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let r=0;r<n.length;r+=2){const s=n[r]&127,i=n[r+1]&127;let o=!1,a=null;if(s===0&&i===0)continue;this.logger.log(3,()=>"["+jr([n[r],n[r+1]])+"] -> ("+jr([s,i])+")");const l=this.cmdHistory;if(s>=16&&s<=31){if(vN(s,i,l)){Oa(null,null,l),this.logger.log(3,()=>"Repeated command ("+jr([s,i])+") is dropped");continue}Oa(s,i,this.cmdHistory),o=this.parseCmd(s,i),o||(o=this.parseMidrow(s,i)),o||(o=this.parsePAC(s,i)),o||(o=this.parseBackgroundAttributes(s,i))}else Oa(null,null,l);if(!o&&(a=this.parseChars(s,i),a)){const c=this.currentChannel;c&&c>0?this.channels[c].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+jr([s,i])+" orig: "+jr([n[r],n[r+1]]))}}parseCmd(e,n){const r=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=33&&n<=35;if(!(r||s))return!1;const i=e===20||e===21||e===23?1:2,o=this.channels[i];return e===20||e===21||e===28||e===29?n===32?o.ccRCL():n===33?o.ccBS():n===34?o.ccAOF():n===35?o.ccAON():n===36?o.ccDER():n===37?o.ccRU(2):n===38?o.ccRU(3):n===39?o.ccRU(4):n===40?o.ccFON():n===41?o.ccRDC():n===42?o.ccTR():n===43?o.ccRTD():n===44?o.ccEDM():n===45?o.ccCR():n===46?o.ccENM():n===47&&o.ccEOC():o.ccTO(n-32),this.currentChannel=i,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[r];return s?(s.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+jr([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const s=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,i=(e===16||e===24)&&n>=64&&n<=95;if(!(s||i))return!1;const o=e<=23?1:2;n>=64&&n<=95?r=o===1?cN[e]:fN[e]:r=o===1?dN[e]:hN[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(r,n)),this.currentChannel=o,!0):!1}interpretPAC(e,n){let r;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,s.underline=(r&1)===1,r<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((r-16)/2)*4,s}parseChars(e,n){let r,s=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){let o;i===17?o=n+80:i===18?o=n+112:o=n+144,this.logger.log(2,()=>"Special char '"+l1(o)+"' in channel "+r),s=[o]}else e>=32&&e<=127&&(s=n===0?[e]:[e,n]);return s&&this.logger.log(3,()=>"Char codes =  "+jr(s).join(",")),s}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=45&&n<=47;if(!(r||s))return!1;let i;const o={};e===16||e===24?(i=Math.floor((n-32)/2),o.background=mN[i],n%2===1&&(o.background=o.background+"_semi")):n===45?o.background="transparent":(o.foreground="black",n===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}Oa(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function Oa(t,e,n){n.a=t,n.b=e}function vN(t,e,n){return n.a===t&&n.b===e}function xN(){return{a:null,b:null}}class Ma{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var ep=function(){if(ai!=null&&ai.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const u=l.toLowerCase();return~a.indexOf(u)?u:!1}function r(a){return n(t,a)}function s(a){return n(e,a)}function i(a,...l){let u=1;for(;u<arguments.length;u++){const c=arguments[u];for(const d in c)a[d]=c[d]}return a}function o(a,l,u){const c=this,d={enumerable:!0};c.hasBeenReset=!1;let f="",m=!1,p=a,g=l,v=u,y=null,x="",S=!0,w="auto",E="start",b=50,L="middle",R=50,I="middle";Object.defineProperty(c,"id",i({},d,{get:function(){return f},set:function(C){f=""+C}})),Object.defineProperty(c,"pauseOnExit",i({},d,{get:function(){return m},set:function(C){m=!!C}})),Object.defineProperty(c,"startTime",i({},d,{get:function(){return p},set:function(C){if(typeof C!="number")throw new TypeError("Start time must be set to a number.");p=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",i({},d,{get:function(){return g},set:function(C){if(typeof C!="number")throw new TypeError("End time must be set to a number.");g=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",i({},d,{get:function(){return v},set:function(C){v=""+C,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",i({},d,{get:function(){return y},set:function(C){y=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",i({},d,{get:function(){return x},set:function(C){const k=r(C);if(k===!1)throw new SyntaxError("An invalid or illegal string was specified.");x=k,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",i({},d,{get:function(){return S},set:function(C){S=!!C,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",i({},d,{get:function(){return w},set:function(C){if(typeof C!="number"&&C!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");w=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",i({},d,{get:function(){return E},set:function(C){const k=s(C);if(!k)throw new SyntaxError("An invalid or illegal string was specified.");E=k,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",i({},d,{get:function(){return b},set:function(C){if(C<0||C>100)throw new Error("Position must be between 0 and 100.");b=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",i({},d,{get:function(){return L},set:function(C){const k=s(C);if(!k)throw new SyntaxError("An invalid or illegal string was specified.");L=k,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",i({},d,{get:function(){return R},set:function(C){if(C<0||C>100)throw new Error("Size must be between 0 and 100.");R=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",i({},d,{get:function(){return I},set:function(C){const k=s(C);if(!k)throw new SyntaxError("An invalid or illegal string was specified.");I=k,this.hasBeenReset=!0}})),c.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class SN{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function c1(t){function e(r,s,i,o){return(r|0)*3600+(s|0)*60+(i|0)+parseFloat(o||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class EN{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let s=0;s<r.length;++s)if(n===r[s]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function d1(t,e,n,r){const s=r?t.split(r):[t];for(const i in s){if(typeof s[i]!="string")continue;const o=s[i].split(n);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const lh=new ep(0,0,""),Fa=lh.align==="middle"?"middle":"center";function TN(t,e,n){const r=t;function s(){const a=c1(t);if(a===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function i(a,l){const u=new EN;d1(a,function(f,m){let p;switch(f){case"region":for(let g=n.length-1;g>=0;g--)if(n[g].id===m){u.set(f,n[g].region);break}break;case"vertical":u.alt(f,m,["rl","lr"]);break;case"line":p=m.split(","),u.integer(f,p[0]),u.percent(f,p[0])&&u.set("snapToLines",!1),u.alt(f,p[0],["auto"]),p.length===2&&u.alt("lineAlign",p[1],["start",Fa,"end"]);break;case"position":p=m.split(","),u.percent(f,p[0]),p.length===2&&u.alt("positionAlign",p[1],["start",Fa,"end","line-left","line-right","auto"]);break;case"size":u.percent(f,m);break;case"align":u.alt(f,m,["start",Fa,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let c=u.get("line","auto");c==="auto"&&lh.line===-1&&(c=-1),l.line=c,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",Fa);let d=u.get("position","auto");d==="auto"&&lh.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=s(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),o(),e.endTime=s(),o(),i(t,e)}function f1(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class wN{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new SN,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let i=n.buffer,o=0;for(i=f1(i);o<i.length&&i[o]!=="\r"&&i[o]!==`
`;)++o;const a=i.slice(0,o);return i[o]==="\r"&&++o,i[o]===`
`&&++o,n.buffer=i.slice(o),a}function s(i){d1(i,function(o,a){},/:/)}try{let i="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;i=r();const a=i.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let o=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:i=r(),n.state){case"HEADER":/:/.test(i)?s(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new ep(0,0,""),n.state="CUE",i.indexOf("-->")===-1){n.cue.id=i;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{TN(i,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const a=i.indexOf("-->")!==-1;if(!i||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=i}continue;case"BADCUE":i||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const bN=/\r\n|\n\r|\n|\r/g,hd=function(e,n,r=0){return e.slice(r,r+n.length)===n},AN=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Y(n)||!Y(r)||!Y(s)||!Y(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*s,n+=60*60*1e3*i,n},md=function(e){let n=5381,r=e.length;for(;r;)n=n*33^e.charCodeAt(--r);return(n>>>0).toString()};function tp(t,e,n){return md(t.toString())+md(e.toString())+md(n)}const RN=function(e,n,r){let s=e[n],i=e[s.prevCC];if(!i||!i.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(o=i)!=null&&o.new;){var o;e.ccOffset+=s.start-i.start,s.new=!1,s=i,i=e[s.prevCC]}e.presentationOffset=r};function LN(t,e,n,r,s,i,o){const a=new wN,l=Nn(new Uint8Array(t)).trim().replace(bN,`
`).split(`
`),u=[],c=e?H2(e.baseTime,e.timescale):0;let d="00:00.000",f=0,m=0,p,g=!0;a.oncue=function(v){const y=n[r];let x=n.ccOffset;const S=(f-c)/9e4;if(y!=null&&y.new&&(m!==void 0?x=n.ccOffset=y.start:RN(n,r,S)),S){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}x=S-n.presentationOffset}const w=v.endTime-v.startTime,E=Yt((v.startTime+x-m)*9e4,s*9e4)/9e4;v.startTime=Math.max(E,0),v.endTime=Math.max(E+w,0);const b=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(b)),v.id||(v.id=tp(v.startTime,v.endTime,b)),v.endTime>0&&u.push(v)},a.onparsingerror=function(v){p=v},a.onflush=function(){if(p){o(p);return}i(u)},l.forEach(v=>{if(g)if(hd(v,"X-TIMESTAMP-MAP=")){g=!1,v.slice(16).split(",").forEach(y=>{hd(y,"LOCAL:")?d=y.slice(6):hd(y,"MPEGTS:")&&(f=parseInt(y.slice(7)))});try{m=AN(d)/1e3}catch(y){p=y}return}else v===""&&(g=!1);a.parse(v+`
`)}),a.flush()}const pd="stpp.ttml.im1t",h1=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,m1=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,CN={left:"start",center:"center",right:"end",start:"start",end:"end"};function Ry(t,e,n,r){const s=re(new Uint8Array(t),["mdat"]);if(s.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const i=s.map(a=>Nn(a)),o=G2(e.baseTime,1,e.timescale);try{i.forEach(a=>n(kN(a,o)))}catch(a){r(a)}}function kN(t,e){const s=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(i).reduce((d,f)=>(d[f]=s.getAttribute(`ttp:${f}`)||i[f],d),{}),a=s.getAttribute("xml:space")!=="preserve",l=Ly(gd(s,"styling","style")),u=Ly(gd(s,"layout","region")),c=gd(s,"body","[begin]");return[].map.call(c,d=>{const f=p1(d,a);if(!f||!d.hasAttribute("begin"))return null;const m=vd(d.getAttribute("begin"),o),p=vd(d.getAttribute("dur"),o);let g=vd(d.getAttribute("end"),o);if(m===null)throw Cy(d);if(g===null){if(p===null)throw Cy(d);g=m+p}const v=new ep(m-e,g-e,f);v.id=tp(v.startTime,v.endTime,v.text);const y=u[d.getAttribute("region")],x=l[d.getAttribute("style")],S=IN(y,x,l),{textAlign:w}=S;if(w){const E=CN[w];E&&(v.lineAlign=E),v.align=w}return Ke(v,S),v}).filter(d=>d!==null)}function gd(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function Ly(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function p1(t,e){return[].slice.call(t.childNodes).reduce((n,r,s)=>{var i;return r.nodeName==="br"&&s?n+`
`:(i=r.childNodes)!=null&&i.length?p1(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function IN(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let s=null;const i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(s=n[o]),i.reduce((a,l)=>{const u=yd(e,r,l)||yd(t,r,l)||yd(s,r,l);return u&&(a[l]=u),a},{})}function yd(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function Cy(t){return new Error(`Could not parse ttml timestamp ${t}`)}function vd(t,e){if(!t)return null;let n=c1(t);return n===null&&(h1.test(t)?n=DN(t,e):m1.test(t)&&(n=PN(t,e))),n}function DN(t,e){const n=h1.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function PN(t,e){const n=m1.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class NN{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Iy(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(T.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(T.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(T.FRAG_LOADING,this.onFragLoading,this),e.on(T.FRAG_LOADED,this.onFragLoaded,this),e.on(T.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(T.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(T.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(T.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(T.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(T.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(T.FRAG_LOADING,this.onFragLoading,this),e.off(T.FRAG_LOADED,this.onFragLoaded,this),e.off(T.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(T.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(T.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(T.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Ma(this,"textTrack1"),n=new Ma(this,"textTrack2"),r=new Ma(this,"textTrack3"),s=new Ma(this,"textTrack4");this.cea608Parser1=new Ay(1,e,n),this.cea608Parser2=new Ay(3,r,s)}}addCues(e,n,r,s,i){let o=!1;for(let a=i.length;a--;){const l=i[a],u=_N(l[0],l[1],n,r);if(u>=0&&(l[0]=Math.min(l[0],n),l[1]=Math.max(l[1],r),o=!0,u/(r-n)>.5))return}if(o||i.push([n,r]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,n,r,s)}else{const a=this.Cues.newCue(null,n,r,s);this.hls.trigger(T.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:s,timescale:i}){const{unparsedVttFrags:o}=this;r==="main"&&(this.initPTS[n.cc]={baseTime:s,timescale:i}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(T.FRAG_LOADED,a)}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let s=0;s<r.textTracks.length;s++){const i=r.textTracks[s];if(ky(i,{name:e,lang:n,attrs:{}}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:s}=this,{label:i,languageCode:o}=n[e],a=this.getExistingTrack(i,o);if(a)r[e]=a,Fs(r[e]),OT(r[e],s);else{const l=this.createTextTrack("captions",i,o);l&&(l[e]=!0,r[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,s={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(T.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,n,r){const s=this.media;if(s)return s.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(n=>{Fs(e[n]),delete e[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Iy(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)Fs(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],s=r.some(i=>i.textCodec===pd);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(a1(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const o=this.media,a=o?fl(o.textTracks):null;if(this.tracks.forEach((l,u)=>{let c;if(a){let d=null;for(let f=0;f<a.length;f++)if(a[f]&&ky(a[f],l)){d=a[f],a[f]=null;break}d&&(c=d)}if(c)Fs(c);else{const d=g1(l);c=this.createTextTrack(d,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),a!=null&&a.length){const l=a.filter(u=>u!==null).map(u=>u.label);l.length&&D.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(T.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const s=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!s)return;const i=`textTrack${s[1]}`,o=this.captionsProperties[i];o&&(o.label=r.name,r.lang&&(o.languageCode=r.lang),o.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===J.MAIN){var r,s;const{cea608Parser1:i,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:u}=n.frag,c=(r=(s=n.part)==null?void 0:s.index)!=null?r:-1;i&&o&&(u!==a+1||u===a&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(i.reset(),o.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}}onFragLoaded(e,n){const{frag:r,payload:s}=n;if(r.type===J.SUBTITLE)if(s.byteLength){const i=r.decryptdata,o="stats"in n;if(i==null||!i.encrypted||o){const a=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),a&&a.textCodec===pd?this._parseIMSC1(r,s):this._parseVTTs(n)}}else this.hls.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;Ry(n,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),r.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{D.log(`Failed to parse IMSC1: ${s}`),r.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var n;const{frag:r,payload:s}=e,{initPTS:i,unparsedVttFrags:o}=this,a=i.length-1;if(!i[r.cc]&&a===-1){o.push(e);return}const l=this.hls,u=(n=r.initSegment)!=null&&n.data?nn(r.initSegment.data,new Uint8Array(s)):s;LN(u,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,c=>{this._appendCues(c,r.level),l.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},c=>{const d=c.message==="Missing initPTS for VTT MPEGTS";d?o.push(e):this._fallbackToIMSC1(r,s),D.log(`Failed to parse VTT cue: ${c}`),!(d&&a>r.cc)&&l.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:c})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||Ry(n,this.initPTS[e.cc],()=>{r.textCodec=pd,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[n];if(!s||s.mode==="disabled")return;e.forEach(i=>MT(s,i))}else{const s=this.tracks[n];if(!s)return;const i=s.default?"default":"subtitles"+n;r.trigger(T.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===J.SUBTITLE&&this.onFragLoaded(T.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:s}=this;if(!this.enabled||!r||!s)return;const{frag:i,samples:o}=n;if(!(i.type===J.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const u=this.extractCea608Data(l);r.addData(o[a].pts,u[0]),s.addData(o[a].pts,u[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:s,type:i}){const{media:o}=this;if(!(!o||o.currentTime<r)){if(!i||i==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>th(a[l],n,r))}if(this.config.renderTextTracksNatively&&n===0&&s!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>th(a[l],n,s))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let s=2;for(let i=0;i<r;i++){const o=e[s++],a=127&e[s++],l=127&e[s++];if(a===0&&l===0)continue;if((4&o)!==0){const c=3&o;(c===0||c===1)&&(n[c].push(a),n[c].push(l))}}return n}}function g1(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function ky(t,e){return!!t&&t.kind===g1(e)&&ah(e,t)}function _N(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function Iy(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class np{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(T.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(T.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(T.MANIFEST_PARSED,this.onManifestParsed,this),e.on(T.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(T.BUFFER_CODECS,this.onBufferCodecs,this),e.on(T.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(T.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(T.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(T.MANIFEST_PARSED,this.onManifestParsed,this),e.off(T.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(T.BUFFER_CODECS,this.onBufferCodecs,this),e.off(T.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&Y(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&D.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((s,i)=>this.isLevelAllowed(s)&&i<=e);return this.clientRect=null,np.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const s=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let i=e.length-1;const o=Math.max(n,r);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&s(l,e[a+1])){i=a;break}}return i}}class ON{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(T.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(T.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const s=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(e,n,r){const s=performance.now();if(n){if(this.lastTime){const i=s-this.lastTime,o=r-this.lastDroppedFrames,a=n-this.lastDecodedFrames,l=1e3*o/i,u=this.hls;if(u.trigger(T.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),l>0&&o>u.config.fpsDroppedMonitoringThreshold*a){let c=u.currentLevel;D.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c=c-1,u.trigger(T.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const ja="[eme]";class Js{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Js.CDMCleanupPromise?[Js.CDMCleanupPromise]:[],this.debug=D.debug.bind(D,ja),this.log=D.log.bind(D,ja),this.warn=D.warn.bind(D,ja),this.error=D.error.bind(D,ja),this.onMediaEncrypted=n=>{const{initDataType:r,initData:s}=n,i=`"${n.type}" event: init data type: "${r}"`;if(this.debug(i),s!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=Ca(this.config));const a=o.map(ed).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{const a=Jc(o);let l,u;if(r==="sinf"){if(a!==pe.FAIRPLAY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${r}" for selected key-system ${a}`);return}const p=We(new Uint8Array(s));try{const g=$m(JSON.parse(p).sinf),v=IT(g);if(!v)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=v.subarray(8,24),u=pe.FAIRPLAY}catch(g){this.warn(`${i} Failed to parse sinf: ${g}`);return}}else{if(a!==pe.WIDEVINE&&a!==pe.PLAYREADY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${r}" for selected key-system ${a}`);return}const p=fP(s),g=p.filter(y=>!!y.systemId&&Zc(y.systemId)===a);g.length>1&&this.warn(`${i} Using first of ${g.length} pssh found for selected key-system ${a}`);const v=g[0];if(!v){p.length===0||p.some(y=>!y.systemId)?this.warn(`${i} contains incomplete or invalid pssh data`):this.log(`ignoring ${i} for ${p.map(y=>Zc(y.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(u=Zc(v.systemId),v.version===0&&v.data)if(u===pe.WIDEVINE){const y=v.data.length-22;l=v.data.subarray(y,y+16)}else u===pe.PLAYREADY&&(l=TT(v.data))}if(!u||!l){this.log(`Unable to handle ${i} with key-system ${a}`);return}const c=bn.hexDump(l),{keyIdToKeySessionPromise:d,mediaKeySessions:f}=this;let m=d[c];for(let p=0;p<f.length;p++){const g=f[p],v=g.decryptdata;if(!v.keyId)continue;const y=bn.hexDump(v.keyId);if(c===y||v.uri.replace(/-/g,"").indexOf(c)!==-1){if(m=d[y],v.pssh)break;delete d[y],v.pssh=new Uint8Array(s),v.keyId=l,m=d[c]=m.then(()=>this.generateRequestWithPreferredKeySession(g,r,s,"encrypted-event-key-match")),m.catch(x=>this.handleError(x));break}}if(!m){if(u!==a){this.log(`Ignoring "${i}" with ${u} init data for selected key-system ${a}`);return}m=d[c]=this.getKeySystemSelectionPromise([u]).then(({keySystem:p,mediaKeys:g})=>{var v;this.throwIfDestroyed();const y=new Lo("ISO-23001-7",c,(v=ed(p))!=null?v:"");return y.pssh=new Uint8Array(s),y.keyId=l,this.attemptSetMediaKeys(p,g).then(()=>{this.throwIfDestroyed();const x=this.createMediaKeySessionContext({decryptdata:y,keySystem:p,mediaKeys:g});return this.generateRequestWithPreferredKeySession(x,r,s,"encrypted-event-no-match")})}),m.catch(p=>this.handleError(p))}})}},this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(T.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(T.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(T.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(T.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(T.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(T.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,s=n[e];if(s)return s.licenseUrl;if(e===pe.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(o,a,l)=>!!o&&l.indexOf(o)===a,s=n.map(o=>o.audioCodec).filter(r),i=n.map(o=>o.videoCodec).filter(r);return s.length+i.length===0&&i.push("avc1.42e01e"),new Promise((o,a)=>{const l=u=>{const c=u.shift();this.getMediaKeysPromise(c,s,i).then(d=>o({keySystem:c,mediaKeys:d})).catch(d=>{u.length?l(u):d instanceof Ht?a(d):a(new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${r}`;return ET===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return r(e,n)}getMediaKeysPromise(e,n,r){const s=$D(e,n,r,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let o=i==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(s)}`),o=this.requestMediaKeySystemAccess(e,s);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const u=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(c=>(this.log(`Media-keys created for "${e}"`),u.then(d=>d?this.setMediaKeysServerCertificate(c,e,d):c))),a.mediaKeys.catch(c=>{this.error(`Failed to create media-keys for "${e}"}: ${c}`)}),a.mediaKeys})}return o.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${bn.hexDump(e.keyId||[])}`);const s=r.createSession(),i={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),s=this.getKeyIdString(n),i="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(r,i,n.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return bn.hexDump(e.keyId)}updateKeySession(e,n){var r;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${bn.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),s.update(n)}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((n,r)=>{const s=Ca(this.config),i=e.map(Jc).filter(o=>!!o&&s.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(i).then(({keySystem:o})=>{const a=ed(o);a?n(a):r(new Error(`Unable to find format for key-system "${o}"`))}).catch(r)})}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),s=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${s}`);let i=this.keyIdToKeySessionPromise[r];return i||(i=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:n});return this.generateRequestWithPreferredKeySession(l,"cenc",n.pssh,"playlist-key")}))),i.catch(o=>this.handleError(o))),i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Ht?this.hls.trigger(T.ERROR,e.data):this.hls.trigger(T.ERROR,{type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const s=Jc(e.keyFormat),i=s?[s]:Ca(this.config);return this.attemptKeySystemAccess(i)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=Ca(this.config)),e.length===0)throw new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(r).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(i=>r.indexOf(i)===-1)})}generateRequestWithPreferredKeySession(e,n,r,s){var i,o;const a=(i=this.config.drmSystems)==null||(o=i[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const p=a.call(this.hls,n,r,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");n=p.initDataType,r=e.decryptdata.pssh=p.initData?new Uint8Array(p.initData):null}catch(p){var l;if(this.warn(p.message),(l=this.hls)!=null&&l.config.debug)throw p}if(r===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const u=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${u} (init data type: ${n} length: ${r?r.byteLength:null})`);const c=new Zm,d=e._onmessage=p=>{const g=e.mediaKeysSession;if(!g){c.emit("error",new Error("invalid state"));return}const{messageType:v,message:y}=p;this.log(`"${v}" message event for session "${g.sessionId}" message size: ${y.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(e,y).catch(x=>{this.handleError(x),c.emit("error",x)}):v==="license-release"?e.keySystem===pe.FAIRPLAY&&(this.updateKeySession(e,Zf("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${v}"`)},f=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const v=e.keyStatus;c.emit("keyStatus",v),v==="expired"&&(this.warn(`${e.keySystem} expired for key ${u}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",f);const m=new Promise((p,g)=>{c.on("error",g),c.on("keyStatus",v=>{v.startsWith("usable")?p():v==="output-restricted"?g(new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):v==="internal-error"?g(new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${v}"`)):v==="expired"?g(new Error("key expired while generating request")):this.warn(`unhandled key status change "${v}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${u}`)}).catch(p=>{throw new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>m).catch(p=>{throw c.removeAllListeners(),this.removeSession(e),p}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{this.log(`key status change "${n}" for keyStatuses keyId: ${bn.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${bn.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,s=new r(n),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:i},u=n.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,m,p,g)=>{o(f.data)},onError:(f,m,p,g)=>{a(new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:nt({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${i}). Status: ${f.code} (${f.text})`))},onTimeout:(f,m,p)=>{a(new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(f,m,p)=>{a(new Error("aborted"))}};s.load(l,c,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((s,i)=>{e.setServerCertificate(r).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),s(e)}).catch(o=>{i(new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(s=>{throw new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const s=new DOMParser().parseFromString(r,"application/xml"),i=s.querySelectorAll("HttpHeader");if(i.length>0){let c;for(let d=0,f=i.length;d<f;d++){var o,a;c=i[d];const m=(o=c.querySelector("name"))==null?void 0:o.textContent,p=(a=c.querySelector("value"))==null?void 0:a.textContent;m&&p&&e.setRequestHeader(m,p)}}const l=s.querySelector("Challenge"),u=l==null?void 0:l.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return Zf(atob(u))}setupLicenseXHR(e,n,r,s){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,n,r,s)}).catch(o=>{if(!r.decryptdata)throw o;return e.open("POST",n,!0),i.call(this.hls,e,n,r,s)}).then(o=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:o||s})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((s,i)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,a,o,e)}catch(c){this.error(c)}s(l)}else{const l=r.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||a.status>=400&&a.status<500)i(new Ht({type:te.KEY_SYSTEM_ERROR,details:N.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const c=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,n).then(s,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,n).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==pe.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)})})}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,n=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Lo.clearKeyUriToKeyIdMap();const r=n.length;Js.CDMCleanupPromise=Promise.all(n.map(s=>this.removeSession(s)).concat(e==null?void 0:e.setMediaKeys(null).catch(s=>{this.log(`Could not clear media keys: ${s}`)}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),n.length=0)}).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((s,i)=>(s.indexOf(i.keyFormat)===-1&&s.push(i.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),n.remove().catch(i=>{this.log(`Could not remove session: ${i}`)}).then(()=>n.close()).catch(i=>{this.log(`Could not close session: ${i}`)})}}}Js.CDMCleanupPromise=void 0;class Ht extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}var dt;(function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"})(dt||(dt={}));var uh;(function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"})(uh||(uh={}));var Xr;(function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"})(Xr||(Xr={}));const MN={[Xr.OBJECT]:["br","d","ot","tb"],[Xr.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Xr.SESSION]:["cid","pr","sf","sid","st","v"],[Xr.STATUS]:["bs","rtp"]};class ui{constructor(e,n){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(r=>r instanceof ui?r:new ui(r))),this.value=e,this.params=n}}class y1{constructor(e){this.description=void 0,this.description=e}}const FN="Dict";function jN(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function UN(t,e,n,r){return new Error(`failed to ${t} "${jN(e)}" as ${n}`,{cause:r})}const Dy="Bare Item",BN="Boolean",$N="Byte Sequence",VN="Decimal",GN="Integer";function HN(t){return t<-999999999999999||999999999999999<t}const KN=/[\x00-\x1f\x7f]+/,WN="Token",zN="Key";function Mn(t,e,n){return UN("serialize",t,e,n)}function qN(t){if(typeof t!="boolean")throw Mn(t,BN);return t?"?1":"?0"}function YN(t){return btoa(String.fromCharCode(...t))}function QN(t){if(ArrayBuffer.isView(t)===!1)throw Mn(t,$N);return`:${YN(t)}:`}function v1(t){if(HN(t))throw Mn(t,GN);return t.toString()}function XN(t){return`@${v1(t.getTime()/1e3)}`}function x1(t,e){if(t<0)return-x1(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const s=Math.floor(t*n);return(s%2===0?s:s+1)/n}else return Math.round(t*n)/n}function JN(t){const e=x1(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Mn(t,VN);const n=e.toString();return n.includes(".")?n:`${n}.0`}const ZN="String";function e_(t){if(KN.test(t))throw Mn(t,ZN);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function t_(t){return t.description||t.toString().slice(7,-1)}function Py(t){const e=t_(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Mn(e,WN);return e}function ch(t){switch(typeof t){case"number":if(!Y(t))throw Mn(t,Dy);return Number.isInteger(t)?v1(t):JN(t);case"string":return e_(t);case"symbol":return Py(t);case"boolean":return qN(t);case"object":if(t instanceof Date)return XN(t);if(t instanceof Uint8Array)return QN(t);if(t instanceof y1)return Py(t);default:throw Mn(t,Dy)}}function dh(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw Mn(t,zN);return t}function rp(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${dh(e)}`:`;${dh(e)}=${ch(n)}`).join("")}function S1(t){return t instanceof ui?`${ch(t.value)}${rp(t.params)}`:ch(t)}function n_(t){return`(${t.value.map(S1).join(" ")})${rp(t.params)}`}function r_(t,e={whitespace:!0}){if(typeof t!="object")throw Mn(t,FN);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([s,i])=>{i instanceof ui||(i=new ui(i));let o=dh(s);return i.value===!0?o+=rp(i.params):(o+="=",Array.isArray(i.value)?o+=n_(i):o+=S1(i)),o}).join(`,${r}`)}function s_(t,e){return r_(t,e)}const i_=t=>t==="ot"||t==="sf"||t==="st",o_=t=>typeof t=="number"?Y(t):t!=null&&t!==""&&t!==!1;function a_(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const s=n.pathname.split("/").slice(1),i=r.pathname.split("/").slice(1,-1);for(;s[0]===i[0];)s.shift(),i.shift();for(;i.length;)i.shift(),s.unshift("..");return s.join("/")}function l_(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(s=="x"?i:i&3|8).toString(16)})}}}const vl=t=>Math.round(t),u_=(t,e)=>(e!=null&&e.baseUrl&&(t=a_(t,e.baseUrl)),encodeURIComponent(t)),Ua=t=>vl(t/100)*100,c_={br:vl,d:vl,bl:Ua,dl:Ua,mtp:Ua,nor:u_,rtp:Ua,tb:vl};function d_(t,e){const n={};if(t==null||typeof t!="object")return n;const r=Object.keys(t).sort(),s=Ke({},c_,e==null?void 0:e.formatters),i=e==null?void 0:e.filter;return r.forEach(o=>{if(i!=null&&i(o))return;let a=t[o];const l=s[o];l&&(a=l(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||o_(a)&&(i_(o)&&typeof a=="string"&&(a=new y1(a)),n[o]=a))}),n}function E1(t,e={}){return t?s_(d_(t,e),Ke({whitespace:!1},e)):""}function f_(t,e={}){if(!t)return{};const n=Object.entries(t),r=Object.entries(MN).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),s=n.reduce((i,o)=>{var a,l;const[u,c]=o,d=((a=r.find(f=>f[1].includes(u)))==null?void 0:a[0])||Xr.REQUEST;return(l=i[d])!=null||(i[d]={}),i[d][u]=c,i},{});return Object.entries(s).reduce((i,[o,a])=>(i[o]=E1(a,e),i),{})}function h_(t,e,n){return Ke(t,f_(e,n))}const m_="CMCD";function p_(t,e={}){if(!t)return"";const n=E1(t,e);return`${m_}=${encodeURIComponent(n)}`}const Ny=/CMCD=[^&#]+/;function g_(t,e,n){const r=p_(e,n);if(!r)return t;if(Ny.test(t))return t.replace(Ny,r);const s=t.includes("?")?"&":"?";return`${t}${s}${r}`}class y_{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:dt.MANIFEST,su:!this.initialized})}catch(i){D.warn("Could not generate manifest CMCD data.",i)}},this.applyFragmentData=s=>{try{const i=s.frag,o=this.hls.levels[i.level],a=this.getObjectType(i),l={d:i.duration*1e3,ot:a};(a===dt.VIDEO||a===dt.AUDIO||a==dt.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(s,l)}catch(i){D.warn("Could not generate segment CMCD data.",i)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||l_(),this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(T.MEDIA_DETACHED,this.onMediaDetached,this),e.on(T.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(T.MEDIA_DETACHED,this.onMediaDetached,this),e.off(T.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,s;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(s=n.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:uh.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){Ke(n,this.createData());const r=n.ot===dt.INIT||n.ot===dt.VIDEO||n.ot===dt.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:s}=this;s&&(n=Object.keys(n).reduce((i,o)=>(s.includes(o)&&(i[o]=n[o]),i),{})),this.useHeaders?(e.headers||(e.headers={}),h_(e.headers,n)):e.url=g_(e.url,n)}getObjectType(e){const{type:n}=e;if(n==="subtitle")return dt.TIMED_TEXT;if(e.sn==="initSegment")return dt.INIT;if(n==="audio")return dt.AUDIO;if(n==="main")return this.hls.audioTracks.length?dt.VIDEO:dt.MUXED}getTopBandwidth(e){let n=0,r;const s=this.hls;if(e===dt.AUDIO)r=s.audioTracks;else{const i=s.maxAutoLevel,o=i>-1?i+1:s.levels.length;r=s.levels.slice(0,o)}for(const i of r)i.bitrate>n&&(n=i.bitrate);return n>0?n:NaN}getBufferLength(e){const n=this.hls.media,r=e===dt.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:Ee.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new r(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,o,a){n(i),this.loader.load(i,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new r(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,o,a){n(i),this.loader.load(i,o,a)}}}}const v_=3e5;class x_{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=D.log.bind(D,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(T.MANIFEST_PARSED,this.onManifestParsed,this),e.on(T.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(T.MANIFEST_PARSED,this.onManifestParsed,this),e.off(T.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===st.SendAlternateToPenaltyBox&&r.flags===an.MoveAllAlternatesMatchingHost){const s=this.levels;let i=this.pathwayPriority,o=this.pathwayId;if(n.context){const{groupId:a,pathwayId:l,type:u}=n.context;a&&s?o=this.getPathwayForGroupId(a,u,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!i&&s&&(i=s.reduce((a,l)=>(a.indexOf(l.pathwayId)===-1&&a.push(l.pathwayId),a),[])),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==o),r.resolved||D.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${o} levels: ${s&&s.length} priorities: ${JSON.stringify(i)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let n;const r=this.penalizedPathways,s=performance.now();Object.keys(r).forEach(i=>{s-r[i]>v_&&delete r[i]});for(let i=0;i<e.length;i++){const o=e[i];if(o in r)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(n=this.getLevelsForPathway(o),n.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,BT(n),this.hls.trigger(T.LEVELS_UPDATED,{levels:n});const u=this.hls.levels[a];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,n,r){const s=this.getLevelsForPathway(r).concat(this.levels||[]);for(let i=0;i<s.length;i++)if(n===fe.AUDIO_TRACK&&s[i].hasAudioGroup(e)||n===fe.SUBTITLE_TRACK&&s[i].hasSubtitleGroup(e))return s[i].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},s={};e.forEach(i=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=i;if(n.some(c=>c.pathwayId===o))return;const u=this.getLevelsForPathway(a).map(c=>{const d=new Ie(c.attrs);d["PATHWAY-ID"]=o;const f=d.AUDIO&&`${d.AUDIO}_clone_${o}`,m=d.SUBTITLES&&`${d.SUBTITLES}_clone_${o}`;f&&(r[d.AUDIO]=f,d.AUDIO=f),m&&(s[d.SUBTITLES]=m,d.SUBTITLES=m);const p=T1(c.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),g=new li({attrs:d,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:p,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let v=1;v<c.audioGroups.length;v++)g.addGroupId("audio",`${c.audioGroups[v]}_clone_${o}`);if(c.subtitleGroups)for(let v=1;v<c.subtitleGroups.length;v++)g.addGroupId("text",`${c.subtitleGroups[v]}_clone_${o}`);return g});n.push(...u),_y(this.audioTracks,r,l,o),_y(this.subtitleTracks,s,l,o)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+c)}const i={responseType:"json",url:s.href},o=n.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(c,d,f,m)=>{this.log(`Loaded steering manifest: "${s}"`);const p=c.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":y}=p;if(g)try{this.uri=new self.URL(g,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||f.url),v&&this.clonePathways(v);const x={steeringManifest:p,url:s.toString()};this.hls.trigger(T.STEERING_MANIFEST_LOADED,x),y&&this.updatePathwayPriority(y)},onError:(c,d,f,m)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${d.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(c.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const v=g.getResponseHeader("Retry-After");v&&(p=parseFloat(v)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(c,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(i,l,u)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const s=(r=this.hls)==null?void 0:r.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function _y(t,e,n,r){t&&Object.keys(e).forEach(s=>{const i=t.filter(o=>o.groupId===s).map(o=>{const a=Ke({},o);return a.details=void 0,a.attrs=new Ie(a.attrs),a.url=a.attrs.URI=T1(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=e[s],a.attrs["PATHWAY-ID"]=r,a});t.push(...i)})}function T1(t,e,n,r){const{HOST:s,PARAMS:i,[n]:o}=r;let a;e&&(a=o==null?void 0:o[e],a&&(t=a));const l=new self.URL(t);return s&&!a&&(l.host=s),i&&Object.keys(i).sort().forEach(u=>{u&&l.searchParams.set(u,i[u])}),l.href}const S_=/^age:\s*[\d.]+\s*$/im;class w1{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new rc,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return i(r,n.url)}).catch(o=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",n.url,!0),i(r,n.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(o=>{this.callbacks.onError({code:r.status,text:o.message},n,r,s)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const s=n.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:o}=r.loadPolicy;if(s)for(const a in s)e.setRequestHeader(a,s[a]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=i&&Y(i)?i:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const s=n.readyState,i=this.config;if(!r.aborted&&s>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const o=n.status,a=n.responseType==="text"?n.responseText:null;if(o>=200&&o<300){const d=a??n.response;if(d!=null){r.loading.end=Math.max(self.performance.now(),r.loading.first);const f=n.responseType==="arraybuffer"?d.byteLength:d.length;if(r.loaded=r.total=f,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first),!this.callbacks)return;const m=this.callbacks.onProgress;if(m&&m(r,e,d,n),!this.callbacks)return;const p={url:n.responseURL,data:d,code:o};this.callbacks.onSuccess(p,r,e,n);return}}const l=i.loadPolicy.errorRetry,u=r.retry,c={url:e.url,data:void 0,code:o};hu(l,u,!1,c)?this.retry(l):(D.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:n.statusText},e,n,r))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(hu(e,n,!0))this.retry(e);else{var r;D.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=Hm(e,r.retry),r.retry++,D.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&S_.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function E_(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const T_=/(\d+)-(\d+)\/(\d+)/;class Oy{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||R_,this.controller=new self.AbortController,this.stats=new rc}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const i=w_(e,this.controller.signal),o=r.onProgress,a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:c}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),n.timeout=u&&Y(u)?u:c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(s,e,this.response)},n.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const f=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(s,e,this.response)},c-(f-s.loading.start)),!d.ok){const{status:m,statusText:p}=d;throw new L_(p||"fetch, bad network response",m,d)}return s.loading.first=f,s.total=A_(d.headers)||s.total,o&&Y(n.highWaterMark)?this.loadProgressively(d,s,e,n.highWaterMark,o):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const f=this.response;if(!f)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const m=d[l];m&&(s.loaded=s.total=m);const p={url:f.url,data:d,code:f.status};o&&!Y(n.highWaterMark)&&o(s,e,d,f),r.onSuccess(p,s,e,f)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const f=d&&d.code||0,m=d?d.message:null;r.onError({code:f,text:m},e,d?d.details:null,s)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,s=0,i){const o=new HT,a=e.body.getReader(),l=()=>a.read().then(u=>{if(u.done)return o.dataLength&&i(n,r,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const c=u.value,d=c.length;return n.loaded+=d,d<s||o.dataLength?(o.push(c),o.dataLength>=s&&i(n,r,o.flush(),e)):i(n,r,c,e),l()}).catch(()=>Promise.reject());return l()}}function w_(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Ke({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function b_(t){const e=T_.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function A_(t){const e=t.get("Content-Range");if(e){const r=b_(e);if(Y(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function R_(t,e){return new self.Request(t.url,e)}class L_ extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const C_=/\s/,k_={newCue(t,e,n,r){const s=[];let i,o,a,l,u;const c=self.VTTCue||self.TextTrackCue;for(let f=0;f<r.rows.length;f++)if(i=r.rows[f],a=!0,l=0,u="",!i.isEmpty()){var d;for(let g=0;g<i.chars.length;g++)C_.test(i.chars[g].uchar)&&a?l++:(u+=i.chars[g].uchar,a=!1);i.cueStartTime=e,e===n&&(n+=1e-4),l>=16?l--:l++;const m=f1(u.trim()),p=tp(e,n,m);t!=null&&(d=t.cues)!=null&&d.getCueById(p)||(o=new c(e,n,m),o.id=p,o.line=f+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),s.push(o))}return t&&s.length&&(s.sort((f,m)=>f.line==="auto"||m.line==="auto"?0:f.line>8&&m.line>8?m.line-f.line:f.line-m.line),s.forEach(f=>MT(t,f))),s}},I_={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},b1=nt(nt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:w1,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:r2,bufferController:aN,capLevelController:np,errorController:KP,fpsController:ON,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:ET,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:I_},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},D_()),{},{subtitleStreamController:rN,subtitleTrackController:iN,timelineController:NN,audioStreamController:tN,audioTrackController:nN,emeController:Js,cmcdController:y_,contentSteeringController:x_});function D_(){return{cueHandler:k_,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function P_(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=fh(t),r=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(i=>{const o=`${i==="level"?"playlist":i}LoadPolicy`,a=e[o]===void 0,l=[];s.forEach(u=>{const c=`${i}Loading${u}`,d=e[c];if(d!==void 0&&a){l.push(c);const f=n[o].default;switch(e[o]={default:f},u){case"TimeOut":f.maxLoadTimeMs=d,f.maxTimeToFirstByteMs=d;break;case"MaxRetry":f.errorRetry.maxNumRetry=d,f.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":f.errorRetry.retryDelayMs=d,f.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=d,f.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&D.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${o}": ${JSON.stringify(e[o])}`)}),nt(nt({},n),e)}function fh(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(fh):Object.keys(t).reduce((e,n)=>(e[n]=fh(t[n]),e),{}):t}function N_(t){const e=t.loader;e!==Oy&&e!==w1?(D.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):E_()&&(t.loader=Oy,t.progressive=!0,t.enableSoftwareAES=!0,D.log("[config]: Progressive streaming enabled, using FetchLoader"))}let xd;class __ extends Km{constructor(e,n){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(T.LEVEL_LOADED,this.onLevelLoaded,this),e.on(T.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(T.FRAG_BUFFERED,this.onFragBuffered,this),e.on(T.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(T.LEVEL_LOADED,this.onLevelLoaded,this),e.off(T.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(T.FRAG_BUFFERED,this.onFragBuffered,this),e.off(T.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=this.hls.config.preferManagedMediaSource,s=[],i={},o={};let a=!1,l=!1,u=!1;n.levels.forEach(c=>{var d,f;const m=c.attrs;let{audioCodec:p,videoCodec:g}=c;((d=p)==null?void 0:d.indexOf("mp4a.40.34"))!==-1&&(xd||(xd=/chrome|firefox/i.test(navigator.userAgent)),xd&&(c.audioCodec=p=void 0)),p&&(c.audioCodec=p=cu(p,r)),((f=g)==null?void 0:f.indexOf("avc1"))===0&&(g=c.videoCodec=SP(g));const{width:v,height:y,unknownCodecs:x}=c;if(a||(a=!!(v&&y)),l||(l=!!g),u||(u=!!p),x!=null&&x.length||p&&!sd(p,"audio",r)||g&&!sd(g,"video",r))return;const{CODECS:S,"FRAME-RATE":w,"HDCP-LEVEL":E,"PATHWAY-ID":b,RESOLUTION:L,"VIDEO-RANGE":R}=m,C=`${`${b||"."}-`}${c.bitrate}-${L}-${w}-${S}-${R}-${E}`;if(i[C])if(i[C].uri!==c.url&&!c.attrs["PATHWAY-ID"]){const k=o[C]+=1;c.attrs["PATHWAY-ID"]=new Array(k+1).join(".");const U=new li(c);i[C]=U,s.push(U)}else i[C].addGroupId("audio",m.AUDIO),i[C].addGroupId("text",m.SUBTITLES);else{const k=new li(c);i[C]=k,o[C]=1,s.push(k)}}),this.filterAndSortMediaOptions(s,n,a,l,u)}filterAndSortMediaOptions(e,n,r,s,i){let o=[],a=[],l=e;if((r||s)&&i&&(l=l.filter(({videoCodec:p,videoRange:g,width:v,height:y})=>(!!p||!!(v&&y))&&NP(g))),l.length===0){Promise.resolve().then(()=>{if(this.hls){n.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(n.levels[0].attrs)}`);const p=new Error("no level with compatible codecs found in manifest");this.hls.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:p,reason:p.message})}});return}if(n.audioTracks){const{preferManagedMediaSource:p}=this.hls.config;o=n.audioTracks.filter(g=>!g.audioCodec||sd(g.audioCodec,"audio",p)),My(o)}n.subtitles&&(a=n.subtitles,My(a));const u=l.slice(0);l.sort((p,g)=>{if(p.attrs["HDCP-LEVEL"]!==g.attrs["HDCP-LEVEL"])return(p.attrs["HDCP-LEVEL"]||"")>(g.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&p.height!==g.height)return p.height-g.height;if(p.frameRate!==g.frameRate)return p.frameRate-g.frameRate;if(p.videoRange!==g.videoRange)return du.indexOf(p.videoRange)-du.indexOf(g.videoRange);if(p.videoCodec!==g.videoCodec){const v=G0(p.videoCodec),y=G0(g.videoCodec);if(v!==y)return y-v}if(p.uri===g.uri&&p.codecSet!==g.codecSet){const v=uu(p.codecSet),y=uu(g.codecSet);if(v!==y)return y-v}return p.averageBitrate!==g.averageBitrate?p.averageBitrate-g.averageBitrate:0});let c=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==u.length)){for(let p=0;p<u.length;p++)if(u[p].pathwayId===l[0].pathwayId){c=u[p];break}}this._levels=l;for(let p=0;p<l.length;p++)if(l[p]===c){var d;this._firstLevel=p;const g=c.bitrate,v=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${g}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const y=Math.min(g,this.hls.config.abrEwmaDefaultEstimateMax);y>v&&v===b1.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=y)}break}const f=i&&!s,m={levels:l,audioTracks:o,subtitleTracks:a,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:i,video:s,altAudio:!f&&o.some(p=>!!p.url)};this.hls.trigger(T.MANIFEST_PARSED,m),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const c=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(T.ERROR,{type:te.OTHER_ERROR,details:N.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:c,reason:c.message}),d)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,s=this.currentLevel,i=s?s.attrs["PATHWAY-ID"]:void 0,o=n[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,r===e&&o.details&&s&&i===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${r}${i?" with Pathway "+i:""}`);const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(T.LEVEL_SWITCHING,l);const u=o.details;if(!u||u.live){const c=this.switchParams(o.uri,s==null?void 0:s.details,u);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,n){n.fatal||!n.context||n.context.type===fe.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===J.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(i=>!!r[i]))return;const s=this._levels[n.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,n){var r;const{level:s,details:i}=n,o=this._levels[s];if(!o){var a;this.warn(`Invalid level index ${s}`),(a=n.deliveryDirectives)!=null&&a.skip&&(i.deltaUpdateFailed=!0);return}s===this.currentLevelIndex?(o.fragmentError===0&&(o.loadError=0),this.playlistLoaded(s,n,o.details)):(r=n.deliveryDirectives)!=null&&r.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const n=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){let s=r.uri;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const i=r.attrs["PATHWAY-ID"];this.log(`Loading level index ${n}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${i?" Pathway "+i:""} ${s}`),this.clearTimer(),this.hls.trigger(T.LEVEL_LOADING,{url:s,level:n,pathwayId:r.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;const r=this._levels.filter((s,i)=>i!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));BT(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(T.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(T.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function My(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}class O_{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[r].loader;if(s){var n;if(e&&e!==((n=s.context)==null?void 0:n.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=N.KEY_LOAD_ERROR,r,s,i){return new Hn({type:te.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:i,error:r,networkDetails:s})}loadClear(e,n){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:s}=e;for(let i=0;i<n.length;i++){const o=n[i];if(s<=o.cc&&(r==="initSegment"||o.sn==="initSegment"||r<o.sn)){this.emeController.selectKeySystemFormat(o).then(a=>{o.setKeyFormat(a)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,s;n&&e.setKeyFormat(n);const i=e.decryptdata;if(!i){const u=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,N.KEY_LOAD_ERROR,u))}const o=i.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,N.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if((r=a)!=null&&r.decryptdata.key)return i.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((s=a)!=null&&s.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(u=>(i.key=u.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return i.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,N.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(r);if(s)return(e.keyLoadPromise=s.then(i=>(e.mediaKeySessionContext=i,r))).catch(i=>{throw e.keyLoadPromise=null,i})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,s=r.loader,i=new s(r);return n.keyLoader=e.loader=i,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},u=r.keyLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,m,p,g)=>{const{frag:v,keyInfo:y,url:x}=p;if(!v.decryptdata||y!==this.keyUriToKeyInfo[x])return a(this.createKeyLoadError(v,N.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));y.decryptdata.key=v.decryptdata.key=new Uint8Array(f.data),v.keyLoader=null,y.loader=null,o({frag:v,keyInfo:y})},onError:(f,m,p,g)=>{this.resetLoader(m),a(this.createKeyLoadError(n,N.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,nt({url:l.url,data:void 0},f)))},onTimeout:(f,m,p)=>{this.resetLoader(m),a(this.createKeyLoadError(n,N.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,m,p)=>{this.resetLoader(m),a(this.createKeyLoadError(n,N.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};i.load(l,c,d)})}resetLoader(e){const{frag:n,keyInfo:r,url:s}=e,i=r.loader;n.keyLoader===i&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[s],i&&i.destroy()}}function A1(){return self.SourceBuffer||self.WebKitSourceBuffer}function R1(){if(!fs())return!1;const e=A1();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function M_(){if(!R1())return!1;const t=fs();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(Co(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(Co(e,"audio"))))}function F_(){var t;const e=A1();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const j_=250,xl=2,U_=.1,B_=.05;class $_{constructor(e,n,r,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=n,this.fragmentTracker=r,this.hls=s}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,n){const{config:r,media:s,stalled:i}=this;if(s===null)return;const{currentTime:o,seeking:a}=s,l=this.seeking&&!a,u=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),i!==null){if(this.stallReported){const v=self.performance.now()-i;D.warn(`playback not stuck anymore @${o}, after ${Math.round(v)}ms`),this.stallReported=!1}this.stalled=null}return}if(u||l){this.stalled=null;return}if(s.paused&&!a||s.ended||s.playbackRate===0||!Ee.getBuffered(s).length){this.nudgeRetry=0;return}const c=Ee.bufferInfo(s,o,0),d=c.nextStart||0;if(a){const v=c.len>xl,y=!d||n&&n.start<=o||d-o>xl&&!this.fragmentTracker.getPartialFragment(o);if(v||y)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var f;if(!(c.len>0)&&!d)return;const y=Math.max(d,c.start||0)-o,x=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,w=(x==null||(f=x.details)==null?void 0:f.live)?x.details.targetduration*2:xl,E=this.fragmentTracker.getPartialFragment(o);if(y>0&&(y<=w||E)){s.paused||this._trySkipBufferHole(E);return}}const m=self.performance.now();if(i===null){this.stalled=m;return}const p=m-i;if(!a&&p>=j_&&(this._reportStall(c),!this.media))return;const g=Ee.bufferInfo(s,o,r.maxBufferHole);this._tryFixBufferStall(g,p)}_tryFixBufferStall(e,n){const{config:r,fragmentTracker:s,media:i}=this;if(i===null)return;const o=i.currentTime,a=s.getPartialFragment(o);a&&(this._trySkipBufferHole(a)||!this.media)||(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-o<r.maxBufferHole)&&n>r.highBufferWatchdogPeriod*1e3&&(D.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:n,media:r,stallReported:s}=this;if(!s&&r){this.stallReported=!0;const i=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${JSON.stringify(e)})`);D.warn(i.message),n.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}}_trySkipBufferHole(e){const{config:n,hls:r,media:s}=this;if(s===null)return 0;const i=s.currentTime,o=Ee.bufferInfo(s,i,0),a=i<o.start?o.start:o.nextStart;if(a){const l=o.len<=n.maxBufferHole,u=o.len>0&&o.len<1&&s.readyState<3,c=a-i;if(c>0&&(l||u)){if(c>n.maxBufferHole){const{fragmentTracker:f}=this;let m=!1;if(i===0){const p=f.getAppendedFrag(0,J.MAIN);p&&a<p.end&&(m=!0)}if(!m){const p=e||f.getAppendedFrag(i,J.MAIN);if(p){let g=!1,v=p.end;for(;v<a;){const y=f.getPartialFragment(v);if(y)v+=y.duration;else{g=!0;break}}if(g)return 0}}}const d=Math.max(a+B_,i+U_);if(D.warn(`skipping hole, adjusting currentTime from ${i} to ${d}`),this.moved=!0,this.stalled=null,s.currentTime=d,e&&!e.gap){const f=new Error(`fragment loaded with buffer holes, seeking from ${i} to ${d}`);r.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:n,media:r,nudgeRetry:s}=this;if(r===null)return;const i=r.currentTime;if(this.nudgeRetry++,s<e.nudgeMaxRetry){const o=i+(s+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${i} to ${o}`);D.warn(a.message),r.currentTime=o,n.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const o=new Error(`Playhead still not moving while enough data buffered @${i} after ${e.nudgeMaxRetry} nudges`);D.error(o.message),n.trigger(T.ERROR,{type:te.MEDIA_ERROR,details:N.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}const V_=100;class G_ extends qm{constructor(e,n,r){super(e,n,r,"[stream-controller]",J.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(T.MANIFEST_LOADING,this.onManifestLoading,this),e.on(T.MANIFEST_PARSED,this.onManifestParsed,this),e.on(T.LEVEL_LOADING,this.onLevelLoading,this),e.on(T.LEVEL_LOADED,this.onLevelLoaded,this),e.on(T.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(T.ERROR,this.onError,this),e.on(T.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(T.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(T.BUFFER_CREATED,this.onBufferCreated,this),e.on(T.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(T.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(T.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(T.MANIFEST_LOADING,this.onManifestLoading,this),e.off(T.MANIFEST_PARSED,this.onManifestParsed,this),e.off(T.LEVEL_LOADED,this.onLevelLoaded,this),e.off(T.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(T.ERROR,this.onError,this),e.off(T.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(T.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(T.BUFFER_CREATED,this.onBufferCreated,this),e.off(T.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(T.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(T.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(V_),this.level=-1,!this.startFragRequested){let s=r.startLevel;s===-1&&(r.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=r.firstAutoLevel),r.nextLoadLevel=s,this.level=r.loadLevel,this.loadedmetadata=!1}n>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=j.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=j.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case j.WAITING_LEVEL:{const{levels:n,level:r}=this,s=n==null?void 0:n[r],i=s==null?void 0:s.details;if(i&&(!i.live||this.levelLastLoaded===s)){if(this.waitForCdnTuneIn(i))break;this.state=j.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=j.IDLE;break}break}case j.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:s,level:i}=this,o=s==null?void 0:s[i];this.resetStartWhenNotLoaded(o||null),this.state=j.IDLE}}break}this.state===j.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:s}=this;if(n===null||!s&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[i]))return;const o=r[i],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const g={};this.altAudio&&(g.type="video"),this.hls.trigger(T.BUFFER_EOS,g),this.state=j.ENDED;return}if(!this.buffering)return;e.loadLevel!==i&&e.manualLevel===-1&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const u=o.details;if(!u||this.state===j.WAITING_LEVEL||u.live&&this.levelLastLoaded!==o){this.level=i,this.state=j.WAITING_LEVEL;return}const c=a.len,d=this.getMaxBufferLength(o.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:a.end;let m=this.getNextFragment(f,u);if(this.couldBacktrack&&!this.fragPrevious&&m&&m.sn!=="initSegment"&&this.fragmentTracker.getState(m)!==et.OK){var p;const v=((p=this.backtrackFragment)!=null?p:m).sn-u.startSN,y=u.fragments[v-1];y&&m.cc===y.cc&&(m=y,this.fragmentTracker.removeFragment(y))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(m&&this.isLoopLoading(m,f)){if(!m.gap){const v=this.audioOnly&&!this.altAudio?ye.AUDIO:ye.VIDEO,y=(v===ye.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,v,J.MAIN)}m=this.getNextFragmentLoopLoading(m,u,a,J.MAIN,d)}m&&(m.initSegment&&!m.initSegment.data&&!this.bitrateTest&&(m=m.initSegment),this.loadFragment(m,o,f))}loadFragment(e,n,r){const s=this.fragmentTracker.getState(e);this.fragCurrent=e,s===et.NOT_LOADED||s===et.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,n):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):(this.startFragRequested=!0,super.loadFragment(e,n,r)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,J.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const s=this.getAppendedFrag(n.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const i=this.getLevelDetails();if(i!=null&&i.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<i.targetduration*2)return}if(!n.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],u=this.fragLastKbps;u&&this.fragCurrent?r=this.fragCurrent.duration*l.maxBitrate/(1e3*u)+1:r=0}else r=0;const o=this.getBufferedFrag(n.currentTime+r);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,u=a.duration,c=Math.max(o.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case j.KEY_LOADING:case j.FRAG_LOADING:case j.FRAG_LOADING_WAITING_RETRY:case j.PARSING:case j.PARSED:this.state=j.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new $_(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,n=e?e.currentTime:null;Y(n)&&this.log(`Media seeked to ${n.toFixed(3)}`);const r=this.getMainFwdBufferInfo();if(r===null||r.len===0){this.warn(`Main forward buffer length on "seeked" event ${r?r.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(T.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,n){let r=!1,s=!1;n.levels.forEach(i=>{const o=i.audioCodec;o&&(r=r||o.indexOf("mp4a.40.2")!==-1,s=s||o.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&s&&!F_(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==j.IDLE)return;const s=r[n.level];(!s.details||s.details.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(s.details))&&(this.state=j.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:s}=this,i=n.level,o=n.details,a=o.totalduration;if(!s){this.warn(`Levels were reset while loading level ${i}`);return}this.log(`Level ${i} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const l=s[i],u=this.fragCurrent;u&&(this.state===j.FRAG_LOADING||this.state===j.FRAG_LOADING_WAITING_RETRY)&&u.level!==n.level&&u.loader&&this.abortCurrentFrag();let c=0;if(o.live||(r=l.details)!=null&&r.live){var d;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;c=this.alignPlaylists(o,l.details,(d=this.levelLastLoaded)==null?void 0:d.details)}if(l.details=o,this.levelLastLoaded=l,this.hls.trigger(T.LEVEL_UPDATED,{details:o,level:i}),this.state===j.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=j.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,c),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:s,payload:i}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const a=o[r.level],l=a.details;if(!l){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const u=a.videoCodec,c=l.PTSKnown||!l.live,d=(n=r.initSegment)==null?void 0:n.data,f=this._getAudioCodec(a),m=this.transmuxer=this.transmuxer||new o1(this.hls,J.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,g=p!==-1,v=new Wm(r.level,r.sn,r.stats.chunkCount,i.byteLength,p,g),y=this.initPTS[r.cc];m.push(i,d,f,u,r,s,l.totalduration,c,v,y)}onAudioTrackSwitching(e,n){const r=this.altAudio;if(!!!n.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const i=this.hls;r&&(i.trigger(T.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),i.trigger(T.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=n.id,s=!!this.hls.audioTracks[r].url;if(s){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=s,this.tick()}onBufferCreated(e,n){const r=n.tracks;let s,i,o=!1;for(const a in r){const l=r[a];if(l.id==="main"){if(i=a,s=l,a==="video"){const u=r[a];u&&(this.videoBuffer=u.buffer)}}else o=!0}o&&s?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:s}=n;if(r&&r.type!==J.MAIN)return;if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===j.PARSED&&(this.state=j.IDLE);return}const i=s?s.stats:r.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),r.sn!=="initSegment"&&(this.fragPrevious=r),this.fragBufferedComplete(r,s)}onError(e,n){var r;if(n.fatal){this.state=j.ERROR;return}switch(n.details){case N.FRAG_GAP:case N.FRAG_PARSING_ERROR:case N.FRAG_DECRYPT_ERROR:case N.FRAG_LOAD_ERROR:case N.FRAG_LOAD_TIMEOUT:case N.KEY_LOAD_ERROR:case N.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(J.MAIN,n);break;case N.LEVEL_LOAD_ERROR:case N.LEVEL_LOAD_TIMEOUT:case N.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===j.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===fe.LEVEL&&(this.state=j.IDLE);break;case N.BUFFER_APPEND_ERROR:case N.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="main")return;if(n.details===N.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case N.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}checkBuffer(){const{media:e,gapController:n}=this;if(!(!e||!n||!e.readyState)){if(this.loadedmetadata||!Ee.getBuffered(e).length){const r=this.state!==j.IDLE?this.fragCurrent:null;n.poll(this.lastCurrentTime,r)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=j.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==ye.AUDIO||this.audioOnly&&!this.altAudio){const r=(n===ye.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,n,J.MAIN),this.tick()}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const s=Ee.getBuffered(e),o=(s.length?s.start(0):0)-r;o>0&&(o<this.config.maxBufferHole||o<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${o} to match buffer start`),r+=o,this.startPosition=r),this.log(`seek to target start position ${r} from current time ${n}`),e.currentTime=r}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:s}=this;if(!r||this.fragContextChanged(e))return;n.fragmentError=0,this.state=j.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),s.trigger(T.FRAG_LOADED,r),e.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const r="main",{hls:s}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:u,level:c}=a,{video:d,text:f,id3:m,initSegment:p}=i,{details:g}=c,v=this.altAudio?void 0:i.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=j.PARSING,p){if(p!=null&&p.tracks){const S=l.initSegment||l;this._bufferInitSegment(c,p.tracks,S,o),s.trigger(T.FRAG_PARSING_INIT_SEGMENT,{frag:S,id:r,tracks:p.tracks})}const y=p.initPTS,x=p.timescale;Y(y)&&(this.initPTS[l.cc]={baseTime:y,timescale:x},s.trigger(T.INIT_PTS_FOUND,{frag:l,id:r,initPTS:y,timescale:x}))}if(d&&g&&l.sn!=="initSegment"){const y=g.fragments[l.sn-1-g.startSN],x=l.sn===g.startSN,S=!y||l.cc>y.cc;if(i.independent!==!1){const{startPTS:w,endPTS:E,startDTS:b,endDTS:L}=d;if(u)u.elementaryStreams[d.type]={startPTS:w,endPTS:E,startDTS:b,endDTS:L};else if(d.firstKeyFrame&&d.independent&&o.id===1&&!S&&(this.couldBacktrack=!0),d.dropped&&d.independent){const R=this.getMainFwdBufferInfo(),I=(R?R.end:this.getLoadPosition())+this.config.maxBufferHole,C=d.firstKeyFramePTS?d.firstKeyFramePTS:w;if(!x&&I<C-this.config.maxBufferHole&&!S){this.backtrack(l);return}else S&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,E,l.start,L,!0)}else x&&w>xl&&(l.gap=!0);l.setElementaryStreamInfo(d.type,w,E,b,L),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,u,o,x||S)}else if(x||S)l.gap=!0;else{this.backtrack(l);return}}if(v){const{startPTS:y,endPTS:x,startDTS:S,endDTS:w}=v;u&&(u.elementaryStreams[ye.AUDIO]={startPTS:y,endPTS:x,startDTS:S,endDTS:w}),l.setElementaryStreamInfo(ye.AUDIO,y,x,S,w),this.bufferFragmentData(v,l,u,o)}if(g&&m!=null&&(n=m.samples)!=null&&n.length){const y={id:r,frag:l,details:g,samples:m.samples};s.trigger(T.FRAG_PARSING_METADATA,y)}if(g&&f){const y={id:r,frag:l,details:g,samples:f.samples};s.trigger(T.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,n,r,s){if(this.state!==j.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&delete n.audio;const{audio:i,video:o,audiovideo:a}=n;if(i){let l=e.audioCodec;const u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const c=i.metadata;c&&"channelCount"in c&&(c.channelCount||1)!==1&&u.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&u.indexOf("android")!==-1&&i.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),i.levelCodec=l,i.id="main",this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${i.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger(T.BUFFER_CODECS,n),Object.keys(n).forEach(l=>{const c=n[l].initSegment;c!=null&&c.byteLength&&this.hls.trigger(T.BUFFER_APPENDING,{type:l,data:c,frag:r,part:null,chunkMeta:s,parent:r.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,J.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=j.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(Ee.isBuffered(e,r)?n=this.getAppendedFrag(r):Ee.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const s=this.fragPlaying,i=n.level;(!s||n.sn!==s.sn||s.level!==i)&&(this.fragPlaying=n,this.hls.trigger(T.FRAG_CHANGED,{frag:n}),(!s||s.level!==i)&&this.hls.trigger(T.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const n=e.currentTime,r=this.currentFrag;if(r&&Y(n)&&Y(r.programDateTime)){const s=r.programDateTime+(n-r.start)*1e3;return new Date(s)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class pn{static get version(){return"1.5.20"}static isMSESupported(){return R1()}static isSupported(){return M_()}static getMediaSource(){return fs()}static get Events(){return T}static get ErrorTypes(){return te}static get ErrorDetails(){return N}static get DefaultConfig(){return pn.defaultConfig?pn.defaultConfig:b1}static set DefaultConfig(e){pn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Zm,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,DD(e.debug||!1,"Hls instance");const n=this.config=P_(pn.DefaultConfig,e);this.userConfig=e,n.progressive&&N_(n);const{abrController:r,bufferController:s,capLevelController:i,errorController:o,fpsController:a}=n,l=new o(this),u=this.abrController=new r(this),c=this.bufferController=new s(this),d=this.capLevelController=new i(this),f=new a(this),m=new AP(this),p=new IP(this),g=n.contentSteeringController,v=g?new g(this):null,y=this.levelController=new __(this,v),x=new i2(this),S=new O_(this.config),w=this.streamController=new G_(this,x,S);d.setStreamController(w),f.setStreamController(w);const E=[m,y,w];v&&E.splice(1,0,v),this.networkControllers=E;const b=[u,c,d,f,p,x];this.audioTrackController=this.createController(n.audioTrackController,E);const L=n.audioStreamController;L&&E.push(new L(this,x,S)),this.subtitleTrackController=this.createController(n.subtitleTrackController,E);const R=n.subtitleStreamController;R&&E.push(new R(this,x,S)),this.createController(n.timelineController,b),S.emeController=this.emeController=this.createController(n.emeController,b),this.cmcdController=this.createController(n.cmcdController,b),this.latencyController=this.createController(DP,b),this.coreComponents=b,E.push(l);const I=l.onErrorOut;typeof I=="function"&&this.on(T.ERROR,I,l)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,s){this._emitter.off(e,n,r,s)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){if(D.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const s=e===T.ERROR;this.trigger(T.ERROR,{type:te.OTHER_ERROR,details:N.INTERNAL_EXCEPTION,fatal:s,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){D.log("destroy"),this.trigger(T.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){D.log("attachMedia"),this._media=e,this.trigger(T.MEDIA_ATTACHING,{media:e})}detachMedia(){D.log("detachMedia"),this.trigger(T.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const n=this.media,r=this.url,s=this.url=Bm.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,D.log(`loadSource:${s}`),n&&r&&(r!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(T.MANIFEST_LOADING,{url:e})}startLoad(e=-1){D.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e),!(!this.started||!this.networkControllers));n++);}stopLoad(){D.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){D.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){D.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){D.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){D.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){D.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){D.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){D.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){D.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){D.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(D.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){PP(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let s=0;s<r;s++)if(e[s].maxBitrate>=n)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let s;if(n===-1&&e!=null&&e.length?s=e.length-1:s=n,r)for(let i=s;i--;){const o=e[i].attrs["HDCP-LEVEL"];if(o&&o<=r)return i}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var n;return(n=this.audioTrackController)==null?void 0:n.setAudioOption(e)}setSubtitleOption(e){var n;return(n=this.subtitleTrackController)==null||n.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}pn.defaultConfig=void 0;var L1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Fy=Q.createContext&&Q.createContext(L1),H_=["attr","size","title"];function K_(t,e){if(t==null)return{};var n=W_(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function W_(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vu.apply(this,arguments)}function jy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jy(Object(n),!0).forEach(function(r){z_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z_(t,e,n){return e=q_(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q_(t){var e=Y_(t,"string");return typeof e=="symbol"?e:e+""}function Y_(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C1(t){return t&&t.map((e,n)=>Q.createElement(e.tag,xu({key:n},e.attr),C1(e.child)))}function Ve(t){return e=>Q.createElement(Q_,vu({attr:xu({},t.attr)},e),C1(t.child))}function Q_(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=K_(t,H_),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Q.createElement("svg",vu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:xu(xu({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&Q.createElement("title",null,i),t.children)};return Fy!==void 0?Q.createElement(Fy.Consumer,null,n=>e(n)):e(L1)}function X_(t){return Ve({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function J_(){var vs,Up,Bp;const t=Nt(),e=(vs=t.state)==null?void 0:vs.Anime,n=A.useRef(null),r=A.useRef(null),[s,i]=A.useState(null),[o,a]=A.useState([]),[l,u]=A.useState([]),[c,d]=A.useState(!0),[f,m]=A.useState(),[p,g]=A.useState(""),[v,y]=A.useState(""),[x,S]=A.useState(!1),[w,E]=A.useState(!1),[b,L]=A.useState(""),[R,I]=A.useState(!1),[C,k]=A.useState(1),[U,B]=A.useState(!1),H=100,W=(Up=t.state)==null?void 0:Up.preplayer,V=(Bp=t.state)==null?void 0:Bp.id;if(!V&&!W)return h.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:h.jsx("div",{className:"text-3xl md:text-5xl font-bold text-center px-4",children:"Seems like you're in a hurry! Sorry, hotlinks won't work. Go back and complete the proper steps 😁"})});A.useEffect(()=>{(async()=>{try{const de=await Ce.get(`/meta/anilist/info/${V}?fetchFiller=true`);if(a(de.data.episodes||[]),m(de.data.currentEpisode),de.data.nextAiringEpisode){let Le=new Date(de.data.nextAiringEpisode.airingTime*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});y(Le)}else y("");if(i(de.data.episodes[0]),jn(de.data.episodes),W){const Le=await Ce.get(`/meta/anilist/watch/${W}?fetchFiller=true`);Le.data.sources.length>0&&(i(de.data.episodes.find(Qe=>Qe.id===Le.data.id)),L(Le.data.sources[0].url),u(Le.data.sources.filter(Qe=>Qe.quality!=="default"&&Qe.quality!=="backup")))}}catch(de){console.error(de)}})()},[V,W]),A.useEffect(()=>{(async()=>{if(s){S(!1),E(!1);const de=s.id;try{const Le=await Ce.get(`/meta/anilist/watch/${de}`);if(Le.data.sources.length>0){const Qe=Le.data.sources.filter(ia=>ia.quality!=="default"&&ia.quality!=="backup"),Un=Qe.find(ia=>ia.quality==="720p")||Qe[Qe.length-1];u(Qe),g(Un.quality),L(Un.url);const db=s.id.replace("-episode-","-dub-episode-"),fb=await Ce.get(`/meta/anilist/watch/${db}`);E(fb.data.sources.length>0)}}catch(Le){console.error(Le)}}})()},[s]),A.useEffect(()=>{if(n.current&&b)if(pn.isSupported()){r.current&&r.current.destroy();const ie=new pn;ie.loadSource(b),ie.attachMedia(n.current),ie.on(pn.Events.MANIFEST_PARSED,()=>{n.current.play()}),r.current=ie}else n.current.canPlayType("application/vnd.apple.mpegurl")&&(n.current.src=b,n.current.addEventListener("loadedmetadata",()=>{n.current.play()}));return()=>{r.current&&r.current.destroy()}},[b]);const K=async()=>{if(s){const ie=s.id.replace("-episode-","-dub-episode-");try{const de=await Ce.get(`/meta/anilist/watch/${ie}`);if(de.data.sources.length>0){L(de.data.sources[0].url);const Le=de.data.sources.filter(Qe=>Qe.quality!=="default"&&Qe.quality!=="backup");u(Le)}else E(!1)}catch(de){E(!1),console.error(de)}}},F=ie=>{i(ie)},M=async()=>{if(S(!x),!x)await K();else{const ie=s.id,Le=(await Ce.get(`/meta/anilist/watch/${ie}`)).data.sources.filter(Un=>Un.quality!=="default"&&Un.quality!=="backup"),Qe=Le.find(Un=>Un.quality==="default")||Le[0];u(Le),g(Qe.quality),L(Qe.url)}},O=ie=>{const de=l.find(Le=>Le.quality===ie);if(g(ie),de){const Le=n.current.currentTime;L(de.url),setTimeout(()=>{n.current.currentTime=Le},100)}},z=()=>{const ie=o.findIndex(de=>de.id===s.id);ie>0&&i(o[ie-1])},G=()=>{const ie=o.findIndex(de=>de.id===s.id);ie<o.length-1&&i(o[ie+1])},ee=()=>{I(!R)},ne=C*H,ue=ne-H,ce=o.slice(ue,ne),be=ie=>k(ie),jn=async ie=>{let de=parseInt(ie[ie.length-1].number)+1,Le=[...ie];for(d(!0);;){const Qe=ie[0].id.replace(/-episode-\d+/,`-episode-${de}`);try{if((await Ce.get(`/meta/anilist/watch/${Qe}`)).data.sources.length>0)Le.push({id:Qe,number:de}),de++;else break}catch{break}}d(!1),a(Le)};return h.jsxs("div",{className:"flex flex-col md:flex-row h-screen bg-gray-900 text-white",children:[h.jsx("div",{className:"h-1/3 md:h-full md:w-1/4 overflow-y-auto bg-gray-800 p-4",children:c?h.jsx("div",{className:"text-center text-red-300 animate-pulse",children:"Loading... This might take time 😢"}):h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Episodes"}),h.jsx("div",{children:h.jsx("h2",{className:"text-xl font-bold mb-2",children:e})}),h.jsx("div",{className:"grid grid-cols-3 md:grid-cols-2 lg:grid-cols-3 gap-2 mb-4",children:ce.map(ie=>h.jsxs("button",{onClick:()=>F(ie),className:`p-2 text-sm rounded ${(s==null?void 0:s.id)===ie.id?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:["Ep ",ie.number]},ie.id))}),h.jsx("div",{className:"flex justify-center space-x-2",children:Array.from({length:Math.ceil(o.length/H)},(ie,de)=>h.jsx("button",{onClick:()=>be(de+1),className:`px-2 py-1 text-sm rounded ${C===de+1?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:de+1},de))})]})}),h.jsxs("div",{className:"flex flex-col md:flex-1 h-2/3 md:h-full bg-gray-900",children:[h.jsxs("div",{className:"relative w-full h-full",children:[h.jsx("video",{onEnded:()=>{R&&G()},ref:n,controls:!0,className:"w-full h-full bg-black"}),h.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2",children:[w&&h.jsx("button",{onClick:M,className:`px-4 py-2 text-sm rounded ${x?"bg-green-600":"bg-gray-600 hover:bg-gray-500"}`,children:x?"Sub":"Dub"}),h.jsxs("button",{onClick:ee,className:`px-4 py-2 text-sm rounded ${R?"bg-green-600":"bg-gray-600 hover:bg-gray-500"}`,children:["Auto Play: ",R?"On":"Off"]}),h.jsx("button",{onClick:()=>B(!U),className:"px-4 py-2 text-sm rounded bg-gray-600 hover:bg-gray-500",children:h.jsx(X_,{})})]}),U&&h.jsxs("div",{className:"absolute top-12 right-4 bg-gray-700 p-4 rounded shadow-md",children:[h.jsx("h3",{className:"text-lg mb-2",children:"Select Quality:"}),h.jsx("ul",{children:l.map(ie=>h.jsx("li",{children:h.jsx("button",{onClick:()=>O(ie.quality),className:`px-4 py-2 text-sm rounded mb-2 ${p===ie.quality?"bg-blue-600":"bg-gray-600 hover:bg-gray-500"}`,children:ie.quality})},ie.quality))})]})]}),h.jsxs("div",{className:"flex justify-between bg-gray-800 p-4",children:[h.jsx("button",{onClick:z,className:"px-4 py-2 text-sm rounded bg-gray-600 hover:bg-gray-500",children:"Previous"}),v?h.jsxs("span",{className:"text-lg text-green-400 font-bold",children:["Next Episode Airing: ",v]}):null,h.jsx("button",{onClick:G,className:"px-4 py-2 text-sm rounded bg-gray-600 hover:bg-gray-500",children:"Next"})]})]})]})}function Z_(){const{geners:t}=gs(),[e,n]=A.useState([]),[r,s]=A.useState(1),[i,o]=A.useState(!0),[a,l]=A.useState(!1),u=$e();A.useEffect(()=>{if(t)(async()=>{l(!0);const m=await Ce.get(`/anime/gogoanime/genre/${t}?page=${r}`);n(m.data.results),console.log(m.data),o(m.data.hasNextPage),l(!1)})();else return window.location.href="/"},[t,r]);const c=()=>{s(r+1)},d=()=>{r>1&&s(r-1)};return a?h.jsx(Fn,{}):h.jsxs("div",{className:"container mx-auto",children:[h.jsxs("h1",{className:"text-3xl font-bold mt-8 mb-4",children:["List of anime matching : ",t]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(f=>f.status!=="NOT_YET_RELEASED"&&h.jsxs("div",{onClick:()=>u(`/anime/${f.id}`),className:"flex flex-col items-center mb-4 border-2 border-gray-300 rounded p-4 hover:shadow-lg transition duration-300 cursor-pointer",children:[h.jsx("img",{src:f.image,alt:f.title,className:"w-40 h-52 rounded mb-2"}),h.jsxs("div",{className:"mt-2 text-center",children:[h.jsx("h3",{className:"font-bold",children:f.title}),h.jsx("p",{children:h.jsxs("span",{className:"font-bold",children:["Released Year :  ",f.released," "]})})]})]},f.id))}),h.jsxs("div",{className:"flex justify-center mt-8",children:[r>1&&h.jsx("button",{onClick:d,className:`px-4 py-2 text-black font-bold rounded mr-2 ${r===1?"bg-gray-200":"bg-gray-300 hover:bg-gray-400"}`,disabled:r===1,children:"Previous"}),h.jsxs("span",{className:"px-4 py-2  text-black font-bold bg-gray-300 rounded mr-2",children:["Page ",r," "]}),i&&h.jsx("button",{onClick:()=>{event.target.disabled=!0,c()},className:"px-4 py-2 text-black font-bold bg-gray-300 rounded hover:bg-gray-400",children:"Next"})]})]})}const sp=A.createContext({});function ip(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const ic=A.createContext(null),op=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class eO extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tO({children:t,isPresent:e,anchorX:n}){const r=A.useId(),s=A.useRef(null),i=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=A.useContext(op);return A.useInsertionEffect(()=>{const{width:a,height:l,top:u,left:c,right:d}=i.current;if(e||!s.current||!a||!l)return;const f=n==="left"?`left: ${c}`:`right: ${d}`;s.current.dataset.motionPopId=r;const m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${f}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),h.jsx(eO,{isPresent:e,childRef:s,sizeRef:i,children:A.cloneElement(t,{ref:s})})}const nO=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a})=>{const l=ip(rO),u=A.useId(),c=A.useCallback(f=>{l.set(f,!0);for(const m of l.values())if(!m)return;r&&r()},[l,r]),d=A.useMemo(()=>({id:u,initial:e,isPresent:n,custom:s,onExitComplete:c,register:f=>(l.set(f,!1),()=>l.delete(f))}),i?[Math.random(),c]:[n,c]);return A.useMemo(()=>{l.forEach((f,m)=>l.set(m,!1))},[n]),A.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=h.jsx(tO,{isPresent:n,anchorX:a,children:t})),h.jsx(ic.Provider,{value:d,children:t})};function rO(){return new Map}function k1(t=!0){const e=A.useContext(ic);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=A.useId();A.useEffect(()=>{if(t)return s(i)},[t]);const o=A.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const Ba=t=>t.key||"";function Uy(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const ap=typeof window<"u",I1=ap?A.useLayoutEffect:A.useEffect,D1=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,u]=k1(o),c=A.useMemo(()=>Uy(t),[t]),d=o&&!l?[]:c.map(Ba),f=A.useRef(!0),m=A.useRef(c),p=ip(()=>new Map),[g,v]=A.useState(c),[y,x]=A.useState(c);I1(()=>{f.current=!1,m.current=c;for(let E=0;E<y.length;E++){const b=Ba(y[E]);d.includes(b)?p.delete(b):p.get(b)!==!0&&p.set(b,!1)}},[y,d.length,d.join("-")]);const S=[];if(c!==g){let E=[...c];for(let b=0;b<y.length;b++){const L=y[b],R=Ba(L);d.includes(R)||(E.splice(b,0,L),S.push(L))}return i==="wait"&&S.length&&(E=S),x(Uy(E)),v(c),null}const{forceRender:w}=A.useContext(sp);return h.jsx(h.Fragment,{children:y.map(E=>{const b=Ba(E),L=o&&!l?!1:c===y||d.includes(b),R=()=>{if(p.has(b))p.set(b,!0);else return;let I=!0;p.forEach(C=>{C||(I=!1)}),I&&(w==null||w(),x(m.current),o&&(u==null||u()),r&&r())};return h.jsx(nO,{isPresent:L,initial:!f.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,onExitComplete:L?void 0:R,anchorX:a,children:E},b)})})},Bt=t=>t;let hh=Bt;function lp(t){let e;return()=>(e===void 0&&(e=t()),e)}const ci=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Xn=t=>t*1e3,Jn=t=>t/1e3,sO={skipAnimations:!1,useManualTiming:!1},$a=["read","resolveKeyframes","update","preRender","render","postRender"],By={value:null,addProjectionMetrics:null};function iO(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(d){o.has(d)&&(c.schedule(d),t()),l++,d(a)}const c={schedule:(d,f=!1,m=!1)=>{const g=m&&s?n:r;return f&&o.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&By.value&&By.value.frameloop[e].push(l),l=0,n.clear(),s=!1,i&&(i=!1,c.process(d))}};return c}const oO=40;function P1(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=$a.reduce((y,x)=>(y[x]=iO(i,e?x:void 0),y),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=o,m=()=>{const y=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(y-s.timestamp,oO),1),s.timestamp=y,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),d.process(s),f.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(m))},p=()=>{n=!0,r=!0,s.isProcessing||t(m)};return{schedule:$a.reduce((y,x)=>{const S=o[x];return y[x]=(w,E=!1,b=!1)=>(n||p(),S.schedule(w,E,b)),y},{}),cancel:y=>{for(let x=0;x<$a.length;x++)o[$a[x]].cancel(y)},state:s,steps:o}}const{schedule:we,cancel:Ir,state:it,steps:Sd}=P1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bt,!0),N1=A.createContext({strict:!1}),$y={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},di={};for(const t in $y)di[t]={isEnabled:e=>$y[t].some(n=>!!e[n])};function aO(t){for(const e in t)di[e]={...di[e],...t[e]}}const lO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Su(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||lO.has(t)}let _1=t=>!Su(t);function uO(t){t&&(_1=e=>e.startsWith("on")?!Su(e):t(e))}try{uO(require("@emotion/is-prop-valid").default)}catch{}function cO(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(_1(s)||n===!0&&Su(s)||!e&&!Su(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function dO(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const oc=A.createContext({});function ac(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Io(t){return typeof t=="string"||Array.isArray(t)}const up=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cp=["initial",...up];function lc(t){return ac(t.animate)||cp.some(e=>Io(t[e]))}function O1(t){return!!(lc(t)||t.variants)}function fO(t,e){if(lc(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Io(n)?n:void 0,animate:Io(r)?r:void 0}}return t.inherit!==!1?e:{}}function hO(t){const{initial:e,animate:n}=fO(t,A.useContext(oc));return A.useMemo(()=>({initial:e,animate:n}),[Vy(e),Vy(n)])}function Vy(t){return Array.isArray(t)?t.join(" "):t}const mO=Symbol.for("motionComponentSymbol");function js(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pO(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):js(n)&&(n.current=r))},[e])}const dp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gO="framerAppearId",M1="data-"+dp(gO),{schedule:fp,cancel:P3}=P1(queueMicrotask,!1),F1=A.createContext({});function yO(t,e,n,r,s){var i,o;const{visualElement:a}=A.useContext(oc),l=A.useContext(N1),u=A.useContext(ic),c=A.useContext(op).reducedMotion,d=A.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,m=A.useContext(F1);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&vO(d.current,n,s,m);const p=A.useRef(!1);A.useInsertionEffect(()=>{f&&p.current&&f.update(n,u)});const g=n[M1],v=A.useRef(!!g&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return I1(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),fp.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),v.current=!1))}),f}function vO(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:j1(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&js(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function j1(t){if(t)return t.options.allowProjection!==!1?t.projection:j1(t.parent)}function xO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&aO(t);function a(u,c){let d;const f={...A.useContext(op),...u,layoutId:SO(u)},{isStatic:m}=f,p=hO(u),g=r(u,m);if(!m&&ap){EO();const v=TO(f);d=v.MeasureLayout,p.visualElement=yO(s,g,f,e,v.ProjectionNode)}return h.jsxs(oc.Provider,{value:p,children:[d&&p.visualElement?h.jsx(d,{visualElement:p.visualElement,...f}):null,n(s,u,pO(g,p.visualElement,c),g,m,p.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=A.forwardRef(a);return l[mO]=s,l}function SO({layoutId:t}){const e=A.useContext(sp).id;return e&&t!==void 0?e+"-"+t:t}function EO(t,e){A.useContext(N1).strict}function TO(t){const{drag:e,layout:n}=di;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const U1=t=>e=>typeof e=="string"&&e.startsWith(t),hp=U1("--"),wO=U1("var(--"),mp=t=>wO(t)?bO.test(t.split("/*")[0].trim()):!1,bO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Do={};function AO(t){for(const e in t)Do[e]=t[e],hp(e)&&(Do[e].isCSSVariable=!0)}const Si=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ys=new Set(Si);function B1(t,{layout:e,layoutId:n}){return ys.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Do[t]||t==="opacity")}const gt=t=>!!(t&&t.getVelocity),$1=(t,e)=>e&&typeof t=="number"?e.transform(t):t,rr=(t,e,n)=>n>e?e:n<t?t:n,Ei={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Po={...Ei,transform:t=>rr(0,1,t)},Va={...Ei,default:1},ta=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),lr=ta("deg"),_n=ta("%"),Z=ta("px"),RO=ta("vh"),LO=ta("vw"),Gy={..._n,parse:t=>_n.parse(t)/100,transform:t=>_n.transform(t*100)},CO={borderWidth:Z,borderTopWidth:Z,borderRightWidth:Z,borderBottomWidth:Z,borderLeftWidth:Z,borderRadius:Z,radius:Z,borderTopLeftRadius:Z,borderTopRightRadius:Z,borderBottomRightRadius:Z,borderBottomLeftRadius:Z,width:Z,maxWidth:Z,height:Z,maxHeight:Z,top:Z,right:Z,bottom:Z,left:Z,padding:Z,paddingTop:Z,paddingRight:Z,paddingBottom:Z,paddingLeft:Z,margin:Z,marginTop:Z,marginRight:Z,marginBottom:Z,marginLeft:Z,backgroundPositionX:Z,backgroundPositionY:Z},kO={rotate:lr,rotateX:lr,rotateY:lr,rotateZ:lr,scale:Va,scaleX:Va,scaleY:Va,scaleZ:Va,skew:lr,skewX:lr,skewY:lr,distance:Z,translateX:Z,translateY:Z,translateZ:Z,x:Z,y:Z,z:Z,perspective:Z,transformPerspective:Z,opacity:Po,originX:Gy,originY:Gy,originZ:Z},Hy={...Ei,transform:Math.round},pp={...CO,...kO,zIndex:Hy,size:Z,fillOpacity:Po,strokeOpacity:Po,numOctaves:Hy},IO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DO=Si.length;function PO(t,e,n){let r="",s=!0;for(let i=0;i<DO;i++){const o=Si[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=$1(a,pp[o]);if(!l){s=!1;const c=IO[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function gp(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(ys.has(l)){o=!0;continue}else if(hp(l)){s[l]=u;continue}else{const c=$1(u,pp[l]);l.startsWith("origin")?(a=!0,i[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=PO(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}const yp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function V1(t,e,n){for(const r in e)!gt(e[r])&&!B1(r,n)&&(t[r]=e[r])}function NO({transformTemplate:t},e){return A.useMemo(()=>{const n=yp();return gp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function _O(t,e){const n=t.style||{},r={};return V1(r,n,t),Object.assign(r,NO(t,e)),r}function OO(t,e){const n={},r=_O(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const MO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vp(t){return typeof t!="string"||t.includes("-")?!1:!!(MO.indexOf(t)>-1||/[A-Z]/u.test(t))}const FO={offset:"stroke-dashoffset",array:"stroke-dasharray"},jO={offset:"strokeDashoffset",array:"strokeDasharray"};function UO(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?FO:jO;t[i.offset]=Z.transform(-r);const o=Z.transform(e),a=Z.transform(n);t[i.array]=`${o} ${a}`}function Ky(t,e,n){return typeof t=="string"?t:Z.transform(e+n*t)}function BO(t,e,n){const r=Ky(e,t.x,t.width),s=Ky(n,t.y,t.height);return`${r} ${s}`}function xp(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,d){if(gp(t,u,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:p}=t;f.transform&&(p&&(m.transform=f.transform),delete f.transform),p&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=BO(p,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&UO(f,o,a,l,!1)}const G1=()=>({...yp(),attrs:{}}),Sp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $O(t,e,n,r){const s=A.useMemo(()=>{const i=G1();return xp(i,e,Sp(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};V1(i,t.style,t),s.style={...i,...s.style}}return s}function VO(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(vp(n)?$O:OO)(r,i,o,n),u=cO(r,typeof n=="string",t),c=n!==A.Fragment?{...u,...l,ref:s}:{},{children:d}=r,f=A.useMemo(()=>gt(d)?d.get():d,[d]);return A.createElement(n,{...c,children:f})}}function Wy(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ep(t,e,n,r){if(typeof e=="function"){const[s,i]=Wy(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Wy(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const mh=t=>Array.isArray(t),GO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),HO=t=>mh(t)?t[t.length-1]||0:t;function Sl(t){const e=gt(t)?t.get():t;return GO(e)?e.toValue():e}function KO({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:WO(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const H1=t=>(e,n)=>{const r=A.useContext(oc),s=A.useContext(ic),i=()=>KO(t,e,r,s);return n?i():ip(i)};function WO(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=Sl(i[f]);let{initial:o,animate:a}=t;const l=lc(t),u=O1(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!ac(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const p=Ep(t,f[m]);if(p){const{transitionEnd:g,transition:v,...y}=p;for(const x in y){let S=y[x];if(Array.isArray(S)){const w=c?S.length-1:0;S=S[w]}S!==null&&(s[x]=S)}for(const x in g)s[x]=g[x]}}}return s}function Tp(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(gt(s[o])||e.style&&gt(e.style[o])||B1(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}const zO={useVisualState:H1({scrapeMotionValuesFromProps:Tp,createRenderState:yp})};function K1(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function W1(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const z1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function q1(t,e,n,r){W1(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(z1.has(s)?s:dp(s),e.attrs[s])}function Y1(t,e,n){const r=Tp(t,e,n);for(const s in t)if(gt(t[s])||gt(e[s])){const i=Si.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const zy=["x","y","width","height","cx","cy","r"],qO={useVisualState:H1({scrapeMotionValuesFromProps:Y1,createRenderState:G1,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(ys.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<zy.length;a++){const l=zy[a];t[l]!==e[l]&&(o=!0)}o&&we.read(()=>{K1(n,r),we.render(()=>{xp(r,s,Sp(n.tagName),t.transformTemplate),q1(n,r)})})}})};function YO(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...vp(r)?qO:zO,preloadedFeatures:t,useRender:VO(s),createVisualElement:e,Component:r};return xO(o)}}function No(t,e,n){const r=t.getProps();return Ep(r,e,n!==void 0?n:r.custom,t)}const QO=lp(()=>window.ScrollTimeline!==void 0);class XO{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(QO()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class JO extends XO{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function wp(t,e){return t?t[e]||t.default||t:void 0}const ph=2e4;function Q1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ph;)e+=n,r=t.next(e);return e>=ph?1/0:e}function bp(t){return typeof t=="function"}function qy(t,e){t.timeline=e,t.onfinish=null}const Ap=t=>Array.isArray(t)&&typeof t[0]=="number",ZO={linearEasing:void 0};function eM(t,e){const n=lp(t);return()=>{var r;return(r=ZO[e])!==null&&r!==void 0?r:n()}}const Eu=eM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),X1=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(ci(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function J1(t){return!!(typeof t=="function"&&Eu()||!t||typeof t=="string"&&(t in gh||Eu())||Ap(t)||Array.isArray(t)&&t.every(J1))}const Bi=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,gh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bi([0,.65,.55,1]),circOut:Bi([.55,0,1,.45]),backIn:Bi([.31,.01,.66,-.59]),backOut:Bi([.33,1.53,.69,.99])};function Z1(t,e){if(t)return typeof t=="function"&&Eu()?X1(t,e):Ap(t)?Bi(t):Array.isArray(t)?t.map(n=>Z1(n,e)||gh.easeOut):gh[t]}const un={x:!1,y:!1};function ew(){return un.x||un.y}function tM(t,e,n){var r;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function tw(t,e){const n=tM(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function Yy(t){return!(t.pointerType==="touch"||ew())}function nM(t,e,n={}){const[r,s,i]=tw(t,n),o=a=>{if(!Yy(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=d=>{Yy(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}function Tu(t,e){const n=`${e}PointerCapture`;if(t.target instanceof Element&&n in t.target&&t.pointerId!==void 0)try{t.target[n](t.pointerId)}catch{}}const nw=(t,e)=>e?t===e?!0:nw(t,e.parentElement):!1,Rp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,rM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sM(t){return rM.has(t.tagName)||t.tabIndex!==-1}const $i=new WeakSet;function Qy(t){return e=>{e.key==="Enter"&&t(e)}}function Ed(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iM=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Qy(()=>{if($i.has(n))return;Ed(n,"down");const s=Qy(()=>{Ed(n,"up")}),i=()=>Ed(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Xy(t){return Rp(t)&&!ew()}function oM(t,e,n={}){const[r,s,i]=tw(t,n),o=a=>{const l=a.currentTarget;if(!l||!Xy(a)||$i.has(l))return;$i.add(l),Tu(a,"set");const u=e(l,a),c=(m,p)=>{l.removeEventListener("pointerup",d),l.removeEventListener("pointercancel",f),Tu(m,"release"),!(!Xy(m)||!$i.has(l))&&($i.delete(l),typeof u=="function"&&u(m,{success:p}))},d=m=>{(m.isTrusted?aM(m,l instanceof Element?l.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?c(m,!1):c(m,!(l instanceof Element)||nw(l,m.target))},f=m=>{c(m,!1)};l.addEventListener("pointerup",d,s),l.addEventListener("pointercancel",f,s),l.addEventListener("lostpointercapture",f,s)};return r.forEach(a=>{a=n.useGlobalTarget?window:a;let l=!1;a instanceof HTMLElement&&(l=!0,!sM(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0)),a.addEventListener("pointerdown",o,s),l&&a.addEventListener("focus",u=>iM(u,s),s)}),i}function aM(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}function lM(t){return t==="x"||t==="y"?un[t]?null:(un[t]=!0,()=>{un[t]=!1}):un.x||un.y?null:(un.x=un.y=!0,()=>{un.x=un.y=!1})}const rw=new Set(["width","height","top","left","right","bottom",...Si]);let El;function uM(){El=void 0}const On={now:()=>(El===void 0&&On.set(it.isProcessing||sO.useManualTiming?it.timestamp:performance.now()),El),set:t=>{El=t,queueMicrotask(uM)}};function Lp(t,e){t.indexOf(e)===-1&&t.push(e)}function Cp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class kp{constructor(){this.subscriptions=[]}add(e){return Lp(this.subscriptions,e),()=>Cp(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function sw(t,e){return e?t*(1e3/e):0}const Jy=30,cM=t=>!isNaN(parseFloat(t));class dM{constructor(e,n={}){this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=On.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=On.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new kp);const r=this.events[e].add(n);return e==="change"?()=>{r(),we.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Jy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Jy);return sw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _o(t,e){return new dM(t,e)}function fM(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,_o(n))}function hM(t,e){const n=No(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=HO(i[o]);fM(t,o,a)}}function mM(t){return!!(gt(t)&&t.add)}function yh(t,e){const n=t.getValue("willChange");if(mM(n))return n.add(e)}function iw(t){return t.props[M1]}const ow=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,pM=1e-7,gM=12;function yM(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=ow(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>pM&&++a<gM);return o}function na(t,e,n,r){if(t===e&&n===r)return Bt;const s=i=>yM(i,0,1,t,n);return i=>i===0||i===1?i:ow(s(i),e,r)}const aw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,lw=t=>e=>1-t(1-e),uw=na(.33,1.53,.69,.99),Ip=lw(uw),cw=aw(Ip),dw=t=>(t*=2)<1?.5*Ip(t):.5*(2-Math.pow(2,-10*(t-1))),Dp=t=>1-Math.sin(Math.acos(t)),fw=lw(Dp),hw=aw(Dp),mw=t=>/^0[^.\s]+$/u.test(t);function vM(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||mw(t):!0}const to=t=>Math.round(t*1e5)/1e5,Pp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xM(t){return t==null}const SM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Np=(t,e)=>n=>!!(typeof n=="string"&&SM.test(n)&&n.startsWith(t)||e&&!xM(n)&&Object.prototype.hasOwnProperty.call(n,e)),pw=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Pp);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},EM=t=>rr(0,255,t),Td={...Ei,transform:t=>Math.round(EM(t))},Jr={test:Np("rgb","red"),parse:pw("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Td.transform(t)+", "+Td.transform(e)+", "+Td.transform(n)+", "+to(Po.transform(r))+")"};function TM(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const vh={test:Np("#"),parse:TM,transform:Jr.transform},Us={test:Np("hsl","hue"),parse:pw("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+_n.transform(to(e))+", "+_n.transform(to(n))+", "+to(Po.transform(r))+")"},ht={test:t=>Jr.test(t)||vh.test(t)||Us.test(t),parse:t=>Jr.test(t)?Jr.parse(t):Us.test(t)?Us.parse(t):vh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Jr.transform(t):Us.transform(t)},wM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bM(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Pp))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(wM))===null||n===void 0?void 0:n.length)||0)>0}const gw="number",yw="color",AM="var",RM="var(",Zy="${}",LM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Oo(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(LM,l=>(ht.test(l)?(r.color.push(i),s.push(yw),n.push(ht.parse(l))):l.startsWith(RM)?(r.var.push(i),s.push(AM),n.push(l)):(r.number.push(i),s.push(gw),n.push(parseFloat(l))),++i,Zy)).split(Zy);return{values:n,split:a,indexes:r,types:s}}function vw(t){return Oo(t).values}function xw(t){const{split:e,types:n}=Oo(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===gw?i+=to(s[o]):a===yw?i+=ht.transform(s[o]):i+=s[o]}return i}}const CM=t=>typeof t=="number"?0:t;function kM(t){const e=vw(t);return xw(t)(e.map(CM))}const Dr={test:bM,parse:vw,createTransformer:xw,getAnimatableNone:kM},IM=new Set(["brightness","contrast","saturate","opacity"]);function DM(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Pp)||[];if(!r)return t;const s=n.replace(r,"");let i=IM.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const PM=/\b([a-z-]*)\(.*?\)/gu,xh={...Dr,getAnimatableNone:t=>{const e=t.match(PM);return e?e.map(DM).join(" "):t}},NM={...pp,color:ht,backgroundColor:ht,outlineColor:ht,fill:ht,stroke:ht,borderColor:ht,borderTopColor:ht,borderRightColor:ht,borderBottomColor:ht,borderLeftColor:ht,filter:xh,WebkitFilter:xh},_p=t=>NM[t];function Sw(t,e){let n=_p(t);return n!==xh&&(n=Dr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const _M=new Set(["auto","none","0"]);function OM(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!_M.has(i)&&Oo(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=Sw(n,s)}const ev=t=>t===Ei||t===Z,tv=(t,e)=>parseFloat(t.split(", ")[e]),nv=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return tv(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?tv(i[1],t):0}},MM=new Set(["x","y","z"]),FM=Si.filter(t=>!MM.has(t));function jM(t){const e=[];return FM.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const fi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:nv(4,13),y:nv(5,14)};fi.translateX=fi.x;fi.translateY=fi.y;const ss=new Set;let Sh=!1,Eh=!1;function Ew(){if(Eh){const t=Array.from(ss).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=jM(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Eh=!1,Sh=!1,ss.forEach(t=>t.complete()),ss.clear()}function Tw(){ss.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Eh=!0)})}function UM(){Tw(),Ew()}class Op{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ss.add(this),Sh||(Sh=!0,we.read(Tw),we.resolveKeyframes(Ew))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ss.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ss.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ww=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),BM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $M(t){const e=BM.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function bw(t,e,n=1){const[r,s]=$M(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return ww(o)?parseFloat(o):o}return mp(s)?bw(s,e,n+1):s}const Aw=t=>e=>e.test(t),VM={test:t=>t==="auto",parse:t=>t},Rw=[Ei,Z,_n,lr,LO,RO,VM],rv=t=>Rw.find(Aw(t));class Lw extends Op{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),mp(u))){const c=bw(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!rw.has(r)||e.length!==2)return;const[s,i]=e,o=rv(s),a=rv(i);if(o!==a)if(ev(o)&&ev(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)vM(e[s])&&r.push(s);r.length&&OM(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=fi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const sv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Dr.test(t)||t==="0")&&!t.startsWith("url("));function GM(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function HM(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=sv(s,e),a=sv(i,e);return!o||!a?!1:GM(t)||(n==="spring"||bp(n))&&r}const KM=t=>t!==null;function uc(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(KM),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const WM=40;class Cw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=On.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>WM?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&UM(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=On.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!HM(e,r,s,i))if(o)this.options.duration=0;else{l&&l(uc(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Pe=(t,e,n)=>t+(e-t)*n;function wd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zM({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=wd(l,a,t+1/3),i=wd(l,a,t),o=wd(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function wu(t,e){return n=>n>0?e:t}const bd=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},qM=[vh,Jr,Us],YM=t=>qM.find(e=>e.test(t));function iv(t){const e=YM(t);if(!e)return!1;let n=e.parse(t);return e===Us&&(n=zM(n)),n}const ov=(t,e)=>{const n=iv(t),r=iv(e);if(!n||!r)return wu(t,e);const s={...n};return i=>(s.red=bd(n.red,r.red,i),s.green=bd(n.green,r.green,i),s.blue=bd(n.blue,r.blue,i),s.alpha=Pe(n.alpha,r.alpha,i),Jr.transform(s))},QM=(t,e)=>n=>e(t(n)),ra=(...t)=>t.reduce(QM),Th=new Set(["none","hidden"]);function XM(t,e){return Th.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function JM(t,e){return n=>Pe(t,e,n)}function Mp(t){return typeof t=="number"?JM:typeof t=="string"?mp(t)?wu:ht.test(t)?ov:tF:Array.isArray(t)?kw:typeof t=="object"?ht.test(t)?ov:ZM:wu}function kw(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Mp(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function ZM(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Mp(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function eF(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const tF=(t,e)=>{const n=Dr.createTransformer(e),r=Oo(t),s=Oo(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Th.has(t)&&!s.values.length||Th.has(e)&&!r.values.length?XM(t,e):ra(kw(eF(r,s),s.values),n):wu(t,e)};function Iw(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Pe(t,e,n):Mp(t)(t,e)}const nF=5;function Dw(t,e,n){const r=Math.max(e-nF,0);return sw(n-t(r),e-r)}const Me={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ad=.001;function rF({duration:t=Me.duration,bounce:e=Me.bounce,velocity:n=Me.velocity,mass:r=Me.mass}){let s,i,o=1-e;o=rr(Me.minDamping,Me.maxDamping,o),t=rr(Me.minDuration,Me.maxDuration,Jn(t)),o<1?(s=u=>{const c=u*o,d=c*t,f=c-n,m=wh(u,o),p=Math.exp(-d);return Ad-f/m*p},i=u=>{const d=u*o*t,f=d*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,p=Math.exp(-d),g=wh(Math.pow(u,2),o);return(-s(u)+Ad>0?-1:1)*((f-m)*p)/g}):(s=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-Ad+c*d},i=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=iF(s,i,a);if(t=Xn(t),isNaN(l))return{stiffness:Me.stiffness,damping:Me.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const sF=12;function iF(t,e,n){let r=n;for(let s=1;s<sF;s++)r=r-t(r)/e(r);return r}function wh(t,e){return t*Math.sqrt(1-e*e)}const oF=["duration","bounce"],aF=["stiffness","damping","mass"];function av(t,e){return e.some(n=>t[n]!==void 0)}function lF(t){let e={velocity:Me.velocity,stiffness:Me.stiffness,damping:Me.damping,mass:Me.mass,isResolvedFromDuration:!1,...t};if(!av(t,aF)&&av(t,oF))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*rr(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Me.mass,stiffness:s,damping:i}}else{const n=rF(t);e={...e,...n,mass:Me.mass},e.isResolvedFromDuration=!0}return e}function Pw(t=Me.visualDuration,e=Me.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:m}=lF({...n,velocity:-Jn(n.velocity||0)}),p=f||0,g=u/(2*Math.sqrt(l*c)),v=o-i,y=Jn(Math.sqrt(l/c)),x=Math.abs(v)<5;r||(r=x?Me.restSpeed.granular:Me.restSpeed.default),s||(s=x?Me.restDelta.granular:Me.restDelta.default);let S;if(g<1){const E=wh(y,g);S=b=>{const L=Math.exp(-g*y*b);return o-L*((p+g*y*v)/E*Math.sin(E*b)+v*Math.cos(E*b))}}else if(g===1)S=E=>o-Math.exp(-y*E)*(v+(p+y*v)*E);else{const E=y*Math.sqrt(g*g-1);S=b=>{const L=Math.exp(-g*y*b),R=Math.min(E*b,300);return o-L*((p+g*y*v)*Math.sinh(R)+E*v*Math.cosh(R))/E}}const w={calculatedDuration:m&&d||null,next:E=>{const b=S(E);if(m)a.done=E>=d;else{let L=0;g<1&&(L=E===0?Xn(p):Dw(S,E,b));const R=Math.abs(L)<=r,I=Math.abs(o-b)<=s;a.done=R&&I}return a.value=a.done?o:b,a},toString:()=>{const E=Math.min(Q1(w),ph),b=X1(L=>w.next(E*L).value,E,30);return E+"ms "+b}};return w}function lv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},m=R=>a!==void 0&&R<a||l!==void 0&&R>l,p=R=>a===void 0?l:l===void 0||Math.abs(a-R)<Math.abs(l-R)?a:l;let g=n*e;const v=d+g,y=o===void 0?v:o(v);y!==v&&(g=y-d);const x=R=>-g*Math.exp(-R/r),S=R=>y+x(R),w=R=>{const I=x(R),C=S(R);f.done=Math.abs(I)<=u,f.value=f.done?y:C};let E,b;const L=R=>{m(f.value)&&(E=R,b=Pw({keyframes:[f.value,p(f.value)],velocity:Dw(S,R,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return L(0),{calculatedDuration:null,next:R=>{let I=!1;return!b&&E===void 0&&(I=!0,w(R),L(R)),E!==void 0&&R>=E?b.next(R-E):(!I&&w(R),f)}}}const uF=na(.42,0,1,1),cF=na(0,0,.58,1),Nw=na(.42,0,.58,1),dF=t=>Array.isArray(t)&&typeof t[0]!="number",uv={linear:Bt,easeIn:uF,easeInOut:Nw,easeOut:cF,circIn:Dp,circInOut:hw,circOut:fw,backIn:Ip,backInOut:cw,backOut:uw,anticipate:dw},cv=t=>{if(Ap(t)){hh(t.length===4);const[e,n,r,s]=t;return na(e,n,r,s)}else if(typeof t=="string")return hh(uv[t]!==void 0),uv[t];return t};function fF(t,e,n){const r=[],s=n||Iw,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Bt:e;a=ra(l,a)}r.push(a)}return r}function hF(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(hh(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=fF(e,r,s),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const f=ci(t[d],t[d+1],c);return a[d](f)};return n?c=>u(rr(t[0],t[i-1],c)):u}function mF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=ci(0,e,r);t.push(Pe(n,1,s))}}function pF(t){const e=[0];return mF(e,t.length-1),e}function gF(t,e){return t.map(n=>n*e)}function yF(t,e){return t.map(()=>e||Nw).splice(0,t.length-1)}function bu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=dF(r)?r.map(cv):cv(r),i={done:!1,value:e[0]},o=gF(n&&n.length===e.length?n:pF(e),t),a=hF(o,e,{ease:Array.isArray(s)?s:yF(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const vF=t=>{const e=({timestamp:n})=>t(n);return{start:()=>we.update(e,!0),stop:()=>Ir(e),now:()=>it.isProcessing?it.timestamp:On.now()}},xF={decay:lv,inertia:lv,tween:bu,keyframes:bu,spring:Pw},SF=t=>t/100;class Fp extends Cw{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||Op,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=bp(n)?n:xF[n]||bu;let l,u;a!==bu&&typeof e[0]!="number"&&(l=ra(SF,Iw(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});i==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Q1(c));const{calculatedDuration:d}=c,f=d+s,m=f*(r+1)-s;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:m,repeatType:p,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),x=this.speed>=0?y<0:y>c;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let S=this.currentTime,w=i;if(m){const R=Math.min(this.currentTime,c)/d;let I=Math.floor(R),C=R%1;!C&&R>=1&&(C=1),C===1&&I--,I=Math.min(I,m+1),!!(I%2)&&(p==="reverse"?(C=1-C,g&&(C-=g/d)):p==="mirror"&&(w=o)),S=rr(0,1,C)*d}const E=x?{done:!1,value:l[0]}:w.next(S);a&&(E.value=a(E.value));let{done:b}=E;!x&&u!==null&&(b=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return L&&s!==void 0&&(E.value=uc(l,this.options,s)),v&&v(E.value),L&&this.finish(),E}get duration(){const{resolved:e}=this;return e?Jn(e.calculatedDuration):0}get time(){return Jn(this.currentTime)}set time(e){e=Xn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Jn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=vF,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const EF=new Set(["opacity","clipPath","filter","transform"]);function TF(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=Z1(a,s);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:s,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const wF=lp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Au=10,bF=2e4;function AF(t){return bp(t.type)||t.type==="spring"||!J1(t.ease)}function RF(t,e){const n=new Fp({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<bF;)r=n.sample(i),s.push(r.value),i+=Au;return{times:void 0,keyframes:s,duration:i-Au,ease:"linear"}}const _w={anticipate:dw,backInOut:cw,circInOut:hw};function LF(t){return t in _w}class dv extends Cw{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new Lw(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&Eu()&&LF(i)&&(i=_w[i]),AF(this.options)){const{onComplete:d,onUpdate:f,motionValue:m,element:p,...g}=this.options,v=RF(e,g);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,s=v.times,i=v.ease,o="keyframes"}const c=TF(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(qy(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;a.set(uc(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Jn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Jn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Xn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Bt;const{animation:r}=n;qy(r,e)}return Bt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...m}=this.options,p=new Fp({...m,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),g=Xn(this.time);u.setWithVelocity(p.sample(g-Au).value,p.sample(g).value,Au)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return wF()&&r&&EF.has(r)&&!l&&!u&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const CF={type:"spring",stiffness:500,damping:25,restSpeed:10},kF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IF={type:"keyframes",duration:.8},DF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PF=(t,{keyframes:e})=>e.length>2?IF:ys.has(t)?t.startsWith("scale")?kF(e[1]):CF:DF;function NF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const jp=(t,e,n,r={},s,i)=>o=>{const a=wp(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Xn(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};NF(a)||(c={...c,...PF(t,c)}),c.duration&&(c.duration=Xn(c.duration)),c.repeatDelay&&(c.repeatDelay=Xn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const f=uc(c.keyframes,a);if(f!==void 0)return we.update(()=>{c.onUpdate(f),c.onComplete()}),new JO([])}return!i&&dv.supports(c)?new dv(c):new Fp(c)};function _F({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Ow(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const f=t.getValue(d,(i=t.latestValues[d])!==null&&i!==void 0?i:null),m=l[d];if(m===void 0||c&&_F(c,d))continue;const p={delay:n,...wp(o||{},d)};let g=!1;if(window.MotionHandoffAnimation){const y=iw(t);if(y){const x=window.MotionHandoffAnimation(y,d,we);x!==null&&(p.startTime=x,g=!0)}}yh(t,d),f.start(jp(d,f,m,t.shouldReduceMotion&&rw.has(d)?{type:!1}:p,t,g));const v=f.animation;v&&u.push(v)}return a&&Promise.all(u).then(()=>{we.update(()=>{a&&hM(t,a)})}),u}function bh(t,e,n={}){var r;const s=No(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(Ow(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=i;return OF(t,e,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function OF(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(MF).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(bh(u,e,{...i,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function MF(t,e){return t.sortNodePosition(e)}function FF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>bh(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=bh(t,e,n);else{const s=typeof e=="function"?No(t,e,n.custom):e;r=Promise.all(Ow(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Mw(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const jF=cp.length;function Fw(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Fw(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<jF;n++){const r=cp[n],s=t.props[r];(Io(s)||s===!1)&&(e[r]=s)}return e}const UF=[...up].reverse(),BF=up.length;function $F(t){return e=>Promise.all(e.map(({animation:n,options:r})=>FF(t,n,r)))}function VF(t){let e=$F(t),n=fv(),r=!0;const s=l=>(u,c)=>{var d;const f=No(t,c,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:p,...g}=f;u={...u,...g,...p}}return u};function i(l){e=l(t)}function o(l){const{props:u}=t,c=Fw(t.parent)||{},d=[],f=new Set;let m={},p=1/0;for(let v=0;v<BF;v++){const y=UF[v],x=n[y],S=u[y]!==void 0?u[y]:c[y],w=Io(S),E=y===l?x.isActive:null;E===!1&&(p=v);let b=S===c[y]&&S!==u[y]&&w;if(b&&r&&t.manuallyAnimateOnMount&&(b=!1),x.protectedKeys={...m},!x.isActive&&E===null||!S&&!x.prevProp||ac(S)||typeof S=="boolean")continue;const L=GF(x.prevProp,S);let R=L||y===l&&x.isActive&&!b&&w||v>p&&w,I=!1;const C=Array.isArray(S)?S:[S];let k=C.reduce(s(y),{});E===!1&&(k={});const{prevResolvedValues:U={}}=x,B={...U,...k},H=K=>{R=!0,f.has(K)&&(I=!0,f.delete(K)),x.needsAnimating[K]=!0;const F=t.getValue(K);F&&(F.liveStyle=!1)};for(const K in B){const F=k[K],M=U[K];if(m.hasOwnProperty(K))continue;let O=!1;mh(F)&&mh(M)?O=!Mw(F,M):O=F!==M,O?F!=null?H(K):f.add(K):F!==void 0&&f.has(K)?H(K):x.protectedKeys[K]=!0}x.prevProp=S,x.prevResolvedValues=k,x.isActive&&(m={...m,...k}),r&&t.blockInitialAnimation&&(R=!1),R&&(!(b&&L)||I)&&d.push(...C.map(K=>({animation:K,options:{type:y}})))}if(f.size){const v={};if(typeof u.initial!="boolean"){const y=No(t,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(v.transition=y.transition)}f.forEach(y=>{const x=t.getBaseTarget(y),S=t.getValue(y);S&&(S.liveStyle=!0),v[y]=x??null}),d.push({animation:v})}let g=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(d):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=fv(),r=!0}}}function GF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Mw(e,t):!1}function Ur(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fv(){return{animate:Ur(!0),whileInView:Ur(),whileHover:Ur(),whileTap:Ur(),whileDrag:Ur(),whileFocus:Ur(),exit:Ur()}}class Mr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class HF extends Mr{constructor(e){super(e),e.animationState||(e.animationState=VF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ac(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let KF=0;class WF extends Mr{constructor(){super(...arguments),this.id=KF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const zF={animation:{Feature:HF},exit:{Feature:WF}};function Mo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function sa(t){return{point:{x:t.pageX,y:t.pageY}}}const qF=t=>e=>Rp(e)&&t(e,sa(e));function Bs(t,e,n,r){return Mo(t,e,qF(n),r)}function jw({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function YF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function QF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Uw=1e-4,XF=1-Uw,JF=1+Uw,Bw=.01,ZF=0-Bw,e4=0+Bw;function Et(t){return t.max-t.min}function t4(t,e,n){return Math.abs(t-e)<=n}function hv(t,e,n,r=.5){t.origin=r,t.originPoint=Pe(e.min,e.max,t.origin),t.scale=Et(n)/Et(e),t.translate=Pe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=XF&&t.scale<=JF||isNaN(t.scale))&&(t.scale=1),(t.translate>=ZF&&t.translate<=e4||isNaN(t.translate))&&(t.translate=0)}function no(t,e,n,r){hv(t.x,e.x,n.x,r?r.originX:void 0),hv(t.y,e.y,n.y,r?r.originY:void 0)}function mv(t,e,n){t.min=n.min+e.min,t.max=t.min+Et(e)}function n4(t,e,n){mv(t.x,e.x,n.x),mv(t.y,e.y,n.y)}function pv(t,e,n){t.min=e.min-n.min,t.max=t.min+Et(e)}function ro(t,e,n){pv(t.x,e.x,n.x),pv(t.y,e.y,n.y)}const gv=()=>({translate:0,scale:1,origin:0,originPoint:0}),$s=()=>({x:gv(),y:gv()}),yv=()=>({min:0,max:0}),Ue=()=>({x:yv(),y:yv()});function zt(t){return[t("x"),t("y")]}function Rd(t){return t===void 0||t===1}function Ah({scale:t,scaleX:e,scaleY:n}){return!Rd(t)||!Rd(e)||!Rd(n)}function Hr(t){return Ah(t)||$w(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $w(t){return vv(t.x)||vv(t.y)}function vv(t){return t&&t!=="0%"}function Ru(t,e,n){const r=t-n,s=e*r;return n+s}function xv(t,e,n,r,s){return s!==void 0&&(t=Ru(t,s,r)),Ru(t,n,r)+e}function Rh(t,e=0,n=1,r,s){t.min=xv(t.min,e,n,r,s),t.max=xv(t.max,e,n,r,s)}function Vw(t,{x:e,y:n}){Rh(t.x,e.translate,e.scale,e.originPoint),Rh(t.y,n.translate,n.scale,n.originPoint)}const Sv=.999999999999,Ev=1.0000000000001;function r4(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Gs(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Vw(t,o)),r&&Hr(i.latestValues)&&Gs(t,i.latestValues))}e.x<Ev&&e.x>Sv&&(e.x=1),e.y<Ev&&e.y>Sv&&(e.y=1)}function Vs(t,e){t.min=t.min+e,t.max=t.max+e}function Tv(t,e,n,r,s=.5){const i=Pe(t.min,t.max,s);Rh(t,e,n,i,r)}function Gs(t,e){Tv(t.x,e.x,e.scaleX,e.scale,e.originX),Tv(t.y,e.y,e.scaleY,e.scale,e.originY)}function Gw(t,e){return jw(QF(t.getBoundingClientRect(),e))}function s4(t,e,n){const r=Gw(t,n),{scroll:s}=e;return s&&(Vs(r.x,s.offset.x),Vs(r.y,s.offset.y)),r}const wv=(t,e)=>Math.abs(t-e);function i4(t,e){const n=wv(t.x,e.x),r=wv(t.y,e.y);return Math.sqrt(n**2+r**2)}class Hw{constructor(e,n,{transformPagePoint:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=Cd(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=i4(c.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:m}=c,{timestamp:p}=it;this.history.push({...m,timestamp:p});const{onStart:g,onMove:v}=this.handlers;d||(g&&g(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,c)},this.handlePointerMove=(c,d)=>{if(c.target instanceof Element&&c.target.hasPointerCapture&&c.pointerId!==void 0)try{if(!c.target.hasPointerCapture(c.pointerId))return}catch{}this.lastMoveEvent=c,this.lastMoveEventInfo=Ld(d,this.transformPagePoint),we.update(this.updatePoint,!0)},this.handlePointerUp=(c,d)=>{Tu(c,"release"),this.end();const{onEnd:f,onSessionEnd:m,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Cd(c.type==="pointercancel"||c.type==="lostpointercapture"?this.lastMoveEventInfo:Ld(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(c,g),m&&m(c,g)},!Rp(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r;const i=sa(e),o=Ld(i,this.transformPagePoint),{point:a}=o,{timestamp:l}=it;this.history=[{...a,timestamp:l}];const{onSessionStart:u}=n;u&&u(e,Cd(o,this.history)),Tu(e,"set"),this.removeListeners=ra(Bs(e.currentTarget,"pointermove",this.handlePointerMove),Bs(e.currentTarget,"pointerup",this.handlePointerUp),Bs(e.currentTarget,"pointercancel",this.handlePointerUp),Bs(e.currentTarget,"lostpointercapture",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ir(this.updatePoint)}}function Ld(t,e){return e?{point:e(t.point)}:t}function bv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Cd({point:t},e){return{point:t,delta:bv(t,Kw(e)),offset:bv(t,o4(e)),velocity:a4(e,.1)}}function o4(t){return t[0]}function Kw(t){return t[t.length-1]}function a4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Kw(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Xn(e)));)n--;if(!r)return{x:0,y:0};const i=Jn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function l4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Pe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Pe(n,t,r.max):Math.min(t,n)),t}function Av(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function u4(t,{top:e,left:n,bottom:r,right:s}){return{x:Av(t.x,n,s),y:Av(t.y,e,r)}}function Rv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function c4(t,e){return{x:Rv(t.x,e.x),y:Rv(t.y,e.y)}}function d4(t,e){let n=.5;const r=Et(t),s=Et(e);return s>r?n=ci(e.min,e.max-r,t.min):r>s&&(n=ci(t.min,t.max-s,e.min)),rr(0,1,n)}function f4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Lh=.35;function h4(t=Lh){return t===!1?t=0:t===!0&&(t=Lh),{x:Lv(t,"left","right"),y:Lv(t,"top","bottom")}}function Lv(t,e,n){return{min:Cv(t,e),max:Cv(t,n)}}function Cv(t,e){return typeof t=="number"?t:t[e]||0}const m4=new WeakMap;class p4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ue(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sa(c).point)},i=(c,d)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lM(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zt(v=>{let y=this.getAxisMotionValue(v).get()||0;if(_n.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[v];S&&(y=Et(S)*(parseFloat(y)/100))}}this.originPoint[v]=y}),p&&we.postRender(()=>p(c,d)),yh(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(c,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=d;if(m&&this.currentDirection===null){this.currentDirection=g4(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),g&&g(c,d)},a=(c,d)=>this.stop(c,d),l=()=>zt(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Hw(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&we.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Ga(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=l4(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&js(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=u4(s.layoutBox,n):this.constraints=!1,this.elastic=h4(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&zt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=f4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!js(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=s4(r,s.root,this.visualElement.getTransformPagePoint());let o=c4(s.layout.layoutBox,i);if(n){const a=n(YF(o));this.hasMutatedConstraints=!!a,a&&(o=jw(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=zt(c=>{if(!Ga(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return yh(this.visualElement,e),r.start(jp(e,r,0,n,this.visualElement,!1))}stopAnimation(){zt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zt(n=>{const{drag:r}=this.getProps();if(!Ga(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Pe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!js(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=d4({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zt(o=>{if(!Ga(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Pe(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;m4.set(this.visualElement,this);const e=this.visualElement.current,n=Bs(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();js(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),we.read(r);const o=Mo(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(zt(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Lh,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Ga(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function g4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class y4 extends Mr{constructor(e){super(e),this.removeGroupControls=Bt,this.removeListeners=Bt,this.controls=new p4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bt}unmount(){this.removeGroupControls(),this.removeListeners()}}const kv=t=>(e,n)=>{t&&we.postRender(()=>t(e,n))};class v4 extends Mr{constructor(){super(...arguments),this.removePointerDownListener=Bt}onPointerDown(e){this.session=new Hw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:kv(e),onStart:kv(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&we.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Bs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Iv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _i={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Z.test(t))t=parseFloat(t);else return t;const n=Iv(t,e.target.x),r=Iv(t,e.target.y);return`${n}% ${r}%`}},x4={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Dr.parse(t);if(s.length>5)return r;const i=Dr.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=Pe(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class S4 extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;AO(E4),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Tl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||we.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ww(t){const[e,n]=k1(),r=A.useContext(sp);return h.jsx(S4,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(F1),isPresent:e,safeToRemove:n})}const E4={borderRadius:{..._i,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_i,borderTopRightRadius:_i,borderBottomLeftRadius:_i,borderBottomRightRadius:_i,boxShadow:x4};function T4(t,e,n){const r=gt(t)?t:_o(t);return r.start(jp("",r,e,n)),r.animation}function w4(t){return t instanceof SVGElement&&t.tagName!=="svg"}const b4=(t,e)=>t.depth-e.depth;class A4{constructor(){this.children=[],this.isDirty=!1}add(e){Lp(this.children,e),this.isDirty=!0}remove(e){Cp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(b4),this.isDirty=!1,this.children.forEach(e)}}function R4(t,e){const n=On.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Ir(r),t(i-e))};return we.read(r,!0),()=>Ir(r)}const zw=["TopLeft","TopRight","BottomLeft","BottomRight"],L4=zw.length,Dv=t=>typeof t=="string"?parseFloat(t):t,Pv=t=>typeof t=="number"||Z.test(t);function C4(t,e,n,r,s,i){s?(t.opacity=Pe(0,n.opacity!==void 0?n.opacity:1,k4(r)),t.opacityExit=Pe(e.opacity!==void 0?e.opacity:1,0,I4(r))):i&&(t.opacity=Pe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<L4;o++){const a=`border${zw[o]}Radius`;let l=Nv(e,a),u=Nv(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Pv(l)===Pv(u)?(t[a]=Math.max(Pe(Dv(l),Dv(u),r),0),(_n.test(u)||_n.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Pe(e.rotate||0,n.rotate||0,r))}function Nv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const k4=qw(0,.5,fw),I4=qw(.5,.95,Bt);function qw(t,e,n){return r=>r<t?0:r>e?1:n(ci(t,e,r))}function _v(t,e){t.min=e.min,t.max=e.max}function Kt(t,e){_v(t.x,e.x),_v(t.y,e.y)}function Ov(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Mv(t,e,n,r,s){return t-=e,t=Ru(t,1/n,r),s!==void 0&&(t=Ru(t,1/s,r)),t}function D4(t,e=0,n=1,r=.5,s,i=t,o=t){if(_n.test(e)&&(e=parseFloat(e),e=Pe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Pe(i.min,i.max,r);t===i&&(a-=e),t.min=Mv(t.min,e,n,a,s),t.max=Mv(t.max,e,n,a,s)}function Fv(t,e,[n,r,s],i,o){D4(t,e[n],e[r],e[s],e.scale,i,o)}const P4=["x","scaleX","originX"],N4=["y","scaleY","originY"];function jv(t,e,n,r){Fv(t.x,e,P4,n?n.x:void 0,r?r.x:void 0),Fv(t.y,e,N4,n?n.y:void 0,r?r.y:void 0)}function Uv(t){return t.translate===0&&t.scale===1}function Yw(t){return Uv(t.x)&&Uv(t.y)}function Bv(t,e){return t.min===e.min&&t.max===e.max}function _4(t,e){return Bv(t.x,e.x)&&Bv(t.y,e.y)}function $v(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Qw(t,e){return $v(t.x,e.x)&&$v(t.y,e.y)}function Vv(t){return Et(t.x)/Et(t.y)}function Gv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class O4{constructor(){this.members=[]}add(e){Lp(this.members,e),e.scheduleRender()}remove(e){if(Cp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function M4(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:m,skewY:p}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const kd=["","X","Y","Z"],F4={visibility:"hidden"},Hv=1e3;let j4=0;function Id(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Xw(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=iw(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",we,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Xw(r)}function Jw({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=j4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($4),this.nodes.forEach(W4),this.nodes.forEach(z4),this.nodes.forEach(V4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new A4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new kp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=w4(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=R4(f,250),Tl.hasAnimatedSinceResize&&(Tl.hasAnimatedSinceResize=!1,this.nodes.forEach(Wv))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||J4,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=c.getProps(),x=!this.targetLayout||!Qw(this.targetLayout,p),S=!f&&m;if(this.options.layoutRoot||this.resumeFrom||S||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const w={...wp(g,"layout"),onPlay:v,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||Wv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ir(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(q4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Xw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kv);return}this.isUpdating||this.nodes.forEach(H4),this.isUpdating=!1,this.nodes.forEach(K4),this.nodes.forEach(U4),this.nodes.forEach(B4),this.clearAllSnapshots();const a=On.now();it.delta=rr(0,1e3/60,a-it.timestamp),it.timestamp=a,it.isProcessing=!0,Sd.update.process(it),Sd.preRender.process(it),Sd.render.process(it),it.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(G4),this.sharedNodes.forEach(Y4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,we.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){we.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Et(this.snapshot.measuredBox.x)&&!Et(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Yw(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Hr(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Z4(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ue();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(ej))){const{scroll:c}=this.root;c&&(Vs(l.x,c.offset.x),Vs(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=Ue();if(Kt(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Kt(l,o),Vs(l.x,d.offset.x),Vs(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Ue();Kt(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Gs(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Hr(c.latestValues)&&Gs(l,c.latestValues)}return Hr(this.latestValues)&&Gs(l,this.latestValues),l}removeTransform(o){const a=Ue();Kt(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Hr(u.latestValues))continue;Ah(u.latestValues)&&u.updateSnapshot();const c=Ue(),d=u.measurePageBox();Kt(c,d),jv(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Hr(this.latestValues)&&jv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==it.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=it.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),ro(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Kt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ue(),this.targetWithTransforms=Ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),n4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kt(this.target,this.layout.layoutBox),Vw(this.target,this.targetDelta)):Kt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),ro(this.relativeTargetOrigin,this.target,m.target),Kt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ah(this.parent.latestValues)||$w(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===it.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Kt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;r4(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ue());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ov(this.prevProjectionDelta.x,this.projectionDelta.x),Ov(this.prevProjectionDelta.y,this.projectionDelta.y)),no(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Gv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Gv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$s(),this.projectionDelta=$s(),this.projectionDeltaWithTransform=$s()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=$s();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ue(),m=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,v=this.getStack(),y=!v||v.members.length<=1,x=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(X4));this.animationProgress=0;let S;this.mixTargetDelta=w=>{const E=w/1e3;zv(d.x,o.x,E),zv(d.y,o.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ro(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Q4(this.relativeTarget,this.relativeTargetOrigin,f,E),S&&_4(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Ue()),Kt(S,this.relativeTarget)),g&&(this.animationValues=c,C4(c,u,this.latestValues,E,x,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ir(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=we.update(()=>{Tl.hasAnimatedSinceResize=!0,this.currentAnimation=T4(0,Hv,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&Zw(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ue();const d=Et(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Et(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Kt(a,l),Gs(a,c),no(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new O4),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Id("z",o,u,this.animationValues);for(let c=0;c<kd.length;c++)Id(`rotate${kd[c]}`,o,u,this.animationValues),Id(`skew${kd[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return F4;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Sl(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Sl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Hr(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=M4(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:m,y:p}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Do){if(f[g]===void 0)continue;const{correct:v,applyTo:y,isCSSVariable:x}=Do[g],S=u.transform==="none"?f[g]:v(f[g],d);if(y){const w=y.length;for(let E=0;E<w;E++)u[y[E]]=S}else x?this.options.visualElement.renderState.vars[g]=S:u[g]=S}return this.options.layoutId&&(u.pointerEvents=d===this?Sl(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Kv),this.root.sharedNodes.clear()}}}function U4(t){t.updateLayout()}function B4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?zt(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],m=Et(f);f.min=r[d].min,f.max=f.min+m}):Zw(i,n.layoutBox,r)&&zt(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],m=Et(r[d]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=$s();no(a,r,n.layoutBox);const l=$s();o?no(l,t.applyTransform(s,!0),n.measuredBox):no(l,r,n.layoutBox);const u=!Yw(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const p=Ue();ro(p,n.layoutBox,f.layoutBox);const g=Ue();ro(g,r,m.layoutBox),Qw(p,g)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function $4(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function V4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function G4(t){t.clearSnapshot()}function Kv(t){t.clearMeasurements()}function H4(t){t.isLayoutDirty=!1}function K4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Wv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function W4(t){t.resolveTargetDelta()}function z4(t){t.calcProjection()}function q4(t){t.resetSkewAndRotation()}function Y4(t){t.removeLeadSnapshot()}function zv(t,e,n){t.translate=Pe(e.translate,0,n),t.scale=Pe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qv(t,e,n,r){t.min=Pe(e.min,n.min,r),t.max=Pe(e.max,n.max,r)}function Q4(t,e,n,r){qv(t.x,e.x,n.x,r),qv(t.y,e.y,n.y,r)}function X4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const J4={duration:.45,ease:[.4,0,.1,1]},Yv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Qv=Yv("applewebkit/")&&!Yv("chrome/")?Math.round:Bt;function Xv(t){t.min=Qv(t.min),t.max=Qv(t.max)}function Z4(t){Xv(t.x),Xv(t.y)}function Zw(t,e,n){return t==="position"||t==="preserve-aspect"&&!t4(Vv(e),Vv(n),.2)}function ej(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const tj=Jw({attachResizeListener:(t,e)=>Mo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dd={current:void 0},eb=Jw({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Dd.current){const t=new tj({});t.mount(window),t.setOptions({layoutScroll:!0}),Dd.current=t}return Dd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),nj={pan:{Feature:v4},drag:{Feature:y4,ProjectionNode:eb,MeasureLayout:Ww}};function Jv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&we.postRender(()=>i(e,sa(e)))}class rj extends Mr{mount(){const{current:e}=this.node;e&&(this.unmount=nM(e,(n,r)=>(Jv(this.node,r,"Start"),s=>Jv(this.node,s,"End"))))}unmount(){}}class sj extends Mr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ra(Mo(this.node.current,"focus",()=>this.onFocus()),Mo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Zv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&we.postRender(()=>i(e,sa(e)))}class ij extends Mr{mount(){const{current:e}=this.node;e&&(this.unmount=oM(e,(n,r)=>(Zv(this.node,r,"Start"),(s,{success:i})=>Zv(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ch=new WeakMap,Pd=new WeakMap,oj=t=>{const e=Ch.get(t.target);e&&e(t)},aj=t=>{t.forEach(oj)};function lj({root:t,...e}){const n=t||document;Pd.has(n)||Pd.set(n,{});const r=Pd.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(aj,{root:t,...e})),r[s]}function uj(t,e,n){const r=lj(e);return Ch.set(t,n),r.observe(t),()=>{Ch.delete(t),r.unobserve(t)}}const cj={some:0,all:1};class dj extends Mr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:cj[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return uj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(fj(e,n))&&this.startObserver()}unmount(){}}function fj({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const hj={inView:{Feature:dj},tap:{Feature:ij},focus:{Feature:sj},hover:{Feature:rj}},mj={layout:{ProjectionNode:eb,MeasureLayout:Ww}},kh={current:null},tb={current:!1};function pj(){if(tb.current=!0,!!ap)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kh.current=t.matches;t.addListener(e),e()}else kh.current=!1}const gj=[...Rw,ht,Dr],yj=t=>gj.find(Aw(t)),vj=new WeakMap;function xj(t,e,n){for(const r in e){const s=e[r],i=n[r];if(gt(s))t.addValue(r,s);else if(gt(i))t.addValue(r,_o(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,_o(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const ex=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Sj{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Op,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=On.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,we.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=lc(n),this.isVariantNode=O1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const p=f[m];l[m]!==void 0&&gt(p)&&p.set(l[m],!1)}}mount(e){this.current=e,vj.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),tb.current||pj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ir(this.notifyUpdate),Ir(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ys.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&we.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in di){const n=di[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ue()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ex.length;r++){const s=ex[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=xj(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=_o(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(ww(s)||mw(s))?s=parseFloat(s):!yj(s)&&Dr.test(n)&&(s=Sw(e,n)),this.setBaseTarget(e,gt(s)?s.get():s)),gt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=Ep(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!gt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new kp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class nb extends Sj{constructor(){super(...arguments),this.KeyframeResolver=Lw}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Ej(t){return window.getComputedStyle(t)}class Tj extends nb{constructor(){super(...arguments),this.type="html",this.renderInstance=W1}readValueFromInstance(e,n){if(ys.has(n)){const r=_p(n);return r&&r.default||0}else{const r=Ej(e),s=(hp(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Gw(e,n)}build(e,n,r){gp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Tp(e,n,r)}}class wj extends nb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ue,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&K1(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ys.has(n)){const r=_p(n);return r&&r.default||0}return n=z1.has(n)?n:dp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Y1(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&we.postRender(this.updateDimensions)}build(e,n,r){xp(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){q1(e,n,r,s)}mount(e){this.isSVGTag=Sp(e.tagName),super.mount(e)}}const bj=(t,e)=>vp(t)?new wj(e):new Tj(e,{allowProjection:t!==A.Fragment}),Aj=YO({...zF,...hj,...nj,...mj},bj),Ye=dO(Aj);function Rj(t,e,n){var r=this,s=A.useRef(null),i=A.useRef(0),o=A.useRef(null),a=A.useRef([]),l=A.useRef(),u=A.useRef(),c=A.useRef(t),d=A.useRef(!0);c.current=t;var f=typeof window<"u",m=!e&&e!==0&&f;if(typeof t!="function")throw new TypeError("Expected a function");e=+e||0;var p=!!(n=n||{}).leading,g=!("trailing"in n)||!!n.trailing,v="maxWait"in n,y="debounceOnServer"in n&&!!n.debounceOnServer,x=v?Math.max(+n.maxWait||0,e):null;A.useEffect(function(){return d.current=!0,function(){d.current=!1}},[]);var S=A.useMemo(function(){var w=function(C){var k=a.current,U=l.current;return a.current=l.current=null,i.current=C,u.current=c.current.apply(U,k)},E=function(C,k){m&&cancelAnimationFrame(o.current),o.current=m?requestAnimationFrame(C):setTimeout(C,k)},b=function(C){if(!d.current)return!1;var k=C-s.current;return!s.current||k>=e||k<0||v&&C-i.current>=x},L=function(C){return o.current=null,g&&a.current?w(C):(a.current=l.current=null,u.current)},R=function C(){var k=Date.now();if(b(k))return L(k);if(d.current){var U=e-(k-s.current),B=v?Math.min(U,x-(k-i.current)):U;E(C,B)}},I=function(){if(f||y){var C=Date.now(),k=b(C);if(a.current=[].slice.call(arguments),l.current=r,s.current=C,k){if(!o.current&&d.current)return i.current=s.current,E(R,e),p?w(s.current):u.current;if(v)return E(R,e),w(s.current)}return o.current||E(R,e),u.current}};return I.cancel=function(){o.current&&(m?cancelAnimationFrame(o.current):clearTimeout(o.current)),i.current=0,a.current=s.current=l.current=o.current=null},I.isPending=function(){return!!o.current},I.flush=function(){return o.current?L(Date.now()):u.current},I},[p,v,e,x,g,m,f,y]);return S}function Lj(t,e){return t===e}function Cj(t,e,n){var r=Lj,s=A.useRef(t),i=A.useState({})[1],o=Rj(A.useCallback(function(l){s.current=l,i({})},[i]),e,n),a=A.useRef(t);return r(a.current,t)||(o(t),a.current=t),[s.current,o]}function Lu(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function kj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(t)}function Ih(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(t)}function rb(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function cc(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function dc(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function Ij(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"7 13 12 18 17 13"},child:[]},{tag:"polyline",attr:{points:"7 6 12 11 17 6"},child:[]}]})(t)}function Dj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"17 11 12 6 7 11"},child:[]},{tag:"polyline",attr:{points:"17 18 12 13 7 18"},child:[]}]})(t)}function Pj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function sb(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function Nj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(t)}function _j(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function Oj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function Mj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function Fj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function Fo(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function jj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}function Uj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(t)}function Bj(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function ib(t){return Ve({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const $j=({genres:t})=>{const[e,n]=A.useState(""),r=A.useMemo(()=>e.trim()?t.filter(s=>s.name.toLowerCase().includes(e.toLowerCase())):t,[t,e]);return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Find a genre...",value:e,onChange:s=>n(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent transition-colors text-gray-900 dark:text-white"}),h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Fo,{className:"text-gray-500 dark:text-gray-400"})})]}),h.jsx("div",{className:"max-h-[320px] overflow-y-auto pr-1 custom-scrollbar",children:h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:r.map((s,i)=>h.jsx(Ze,{to:`/genre/${s.name.replace(/ /g,"-").toLowerCase()}`,className:"block",children:h.jsx(Ye.div,{whileHover:{scale:1.04},whileTap:{scale:.98},className:"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 p-3 rounded-lg text-white text-center font-medium shadow-md hover:shadow-lg transition-all duration-300",children:s.name})},s.id||`genre-${i}`))})}),r.length===0&&h.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:['No genres found matching "',e,'"']})]})},tx=()=>h.jsx("div",{className:"flex justify-center items-center h-64",children:h.jsxs("div",{className:"relative w-24 h-24",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-gray-300 rounded-full"}),h.jsx(Ye.div,{className:"absolute top-0 left-0 w-full h-full border-4 border-t-indigo-600 rounded-full",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"}}),h.jsx("p",{className:"absolute inset-0 flex justify-center items-center text-sm font-medium",children:"Loading"})]})}),Vj=()=>{const[t,e]=A.useState(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));return A.useEffect(()=>{const n=window.document.documentElement;t==="dark"?(n.classList.add("dark"),localStorage.setItem("theme","dark")):(n.classList.remove("dark"),localStorage.setItem("theme","light"))},[t]),[t,e]},Gj=({suggestions:t,searchTerm:e,onSelectSuggestion:n,onClose:r})=>{if(!t.length||!e)return null;const s=(i,o)=>{if(!o)return i;const a=new RegExp(`(${o})`,"gi");return i.split(a).map((u,c)=>a.test(u)?h.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-700",children:u},c):u)};return h.jsxs(Ye.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-20 mt-1 w-full bg-white dark:bg-gray-800 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 max-h-64 overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-gray-200 dark:border-gray-700",children:[h.jsx("h3",{className:"text-sm font-medium",children:"Suggestions"}),h.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:h.jsx(ib,{})})]}),h.jsx("ul",{children:t.map(i=>h.jsx(Ye.li,{whileHover:{backgroundColor:"rgba(99, 102, 241, 0.1)"},className:"p-2 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0",onClick:()=>n(i),children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("img",{src:i.image,alt:i.title,className:"w-10 h-14 object-cover rounded"}),h.jsx("div",{className:"text-sm",children:s(i.title,e)})]})},i.id))})]})};function Hj(){const[t,e]=A.useState(1),[n,r]=A.useState([]),[s,i]=A.useState(!1);Vj();const o=A.useRef(null),[a,l]=A.useState(""),[u,c]=A.useState(""),d=$e(),f=`
    * {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="none" stroke="%236366F1" stroke-width="1.5"/></svg>'), auto;
    }
    
    a, button, [role="button"], input, select, textarea, .cursor-pointer {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="%236366F1" fill-opacity="0.2" stroke="%236366F1" stroke-width="1.5"/><circle cx="12" cy="12" r="4" fill="%236366F1"/></svg>'), pointer;
    }
    
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.05);
      border-radius: 4px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background-color: rgba(99, 102, 241, 0.5);
      border-radius: 4px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background-color: rgba(99, 102, 241, 0.7);
    }
  `,{data:m,isLoading:p,isError:g,error:v,refetch:y}=Ff(["mangaList",t],async()=>{const k=`https://manga-api-vercel.vercel.app/api/mangalist?page=${t}`;return(await Se.get(k)).data},{keepPreviousData:!0,staleTime:5*60*1e3,retry:2,onError:k=>{console.error("Error fetching manga list:",k)}}),{data:x,isLoading:S}=Ff(["genres",t],async()=>{var U;const k=[{id:"romance",name:"Romance"},{id:"action",name:"Action"},{id:"comedy",name:"Comedy"},{id:"drama",name:"Drama"},{id:"yuri",name:"Yuri"},{id:"fantasy",name:"Fantasy"},{id:"shoujo",name:"Shoujo"},{id:"seinen",name:"Seinen"},{id:"shounen",name:"Shounen"},{id:"slice-of-life",name:"Slice of Life"},{id:"bloody",name:"Bloody"},{id:"demons",name:"Demons"},{id:"system",name:"System"},{id:"loli",name:"Loli"},{id:"ninja",name:"Ninja"},{id:"incest",name:"Incest"},{id:"crime",name:"Crime"},{id:"office-workers",name:"Office Workers"},{id:"sexual-violence",name:"Sexual Violence"},{id:"crossdressing",name:"Crossdressing"},{id:"gore",name:"Gore"},{id:"delinquents",name:"Delinquents"},{id:"shota",name:"Shota"},{id:"police",name:"Police"},{id:"manga",name:"Manga"},{id:"time-travel",name:"Time Travel"},{id:"monster-girls",name:"Monster Girls"},{id:"anthology",name:"Anthology"},{id:"4-koma",name:"4-Koma"},{id:"oneshot",name:"Oneshot"},{id:"animals",name:"Animals"},{id:"heartwarming",name:"Heartwarming"},{id:"superhero",name:"Superhero"},{id:"magic",name:"Magic"},{id:"genderswap",name:"Genderswap"},{id:"post-apocalyptic",name:"Post-Apocalyptic"},{id:"music",name:"Music"},{id:"sci-fi",name:"Sci-Fi"},{id:"self-published",name:"Self-Published"},{id:"aliens",name:"Aliens"},{id:"villainess",name:"Villainess"},{id:"virtual-reality",name:"Virtual Reality"},{id:"ghosts",name:"Ghosts"},{id:"award-winning",name:"Award Winning"},{id:"video-games",name:"Video Games"},{id:"magical-girls",name:"Magical Girls"},{id:"reverse-harem",name:"Reverse Harem"},{id:"fan-colored",name:"Fan Colored"},{id:"zombies",name:"Zombies"},{id:"mafia",name:"Mafia"},{id:"webtoon",name:"Webtoon"},{id:"royal-family",name:"Royal Family"},{id:"manhwa-hot",name:"Manhwa Hot"},{id:"traditional-games",name:"Traditional Games"},{id:"magical",name:"Magical"},{id:"vampires",name:"Vampires"},{id:"revenge",name:"Revenge"},{id:"ecchi",name:"Ecchi"},{id:"samurai",name:"Samurai"},{id:"yaoi",name:"Yaoi(BL)"},{id:"monster",name:"Monster"},{id:"super-power",name:"Super Power"},{id:"animal",name:"Animal"},{id:"game",name:"Game"}];try{return((U=(await Se.get(`https://manga-api-vercel.vercel.app/api/mangalist?page=${t}`)).data.metaData)==null?void 0:U.category)||k}catch(B){return console.error("Error fetching genres:",B),k}},{staleTime:1/0}),w={};A.useEffect(()=>{(async()=>{if(a.length<2){r([]);return}if(w[a]){r(w[a]),i(!0);return}try{const U=await Se.get(`https://manga-api-vercel.vercel.app/api/search/${a.replace(/ /g,"-").toLowerCase()}`);if(U.data&&Array.isArray(U.data.mangaList)){const B=U.data.mangaList.slice(0,5);w[a]=B,r(B),i(!0)}}catch(U){console.error("Error fetching suggestions:",U),r([])}})()},[a]);const E=k=>{c(k.target.value),k.target.value.length>0?i(!0):i(!1)},b=k=>{i(!1),d(`/mangainfo/${k.id}`)};A.useEffect(()=>{const k=U=>{o.current&&!o.current.contains(U.target)&&i(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const L=k=>{k.preventDefault(),u.trim()&&(d(`/searchmanga/${u.replace(/ /g,"-").toLowerCase()}`),i(!1))};A.useEffect(()=>{const k=setTimeout(()=>{l(u)},1e3);return()=>clearTimeout(k)},[u]);const R=k=>{e(k),window.scrollTo({top:0,behavior:"smooth"})},I=()=>!m||!m.mangaList?null:h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6",children:m.mangaList.map(k=>h.jsxs(Ye.div,{whileHover:{scale:1.03},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},onClick:()=>d(`/mangainfo/${k.id}`),className:"group bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer",children:[h.jsxs("div",{className:"relative pb-[140%] overflow-hidden",children:[h.jsx("img",{src:k.image,alt:k.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),h.jsxs("div",{className:"p-3 space-y-2",children:[h.jsx("h2",{className:"font-medium text-gray-900 dark:text-white line-clamp-2 min-h-[2.5rem]",children:k.title}),k.chapter&&h.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[h.jsx("span",{className:"font-medium",children:"Chapter:"})," ",k.chapter]}),k.view&&h.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[h.jsx("span",{className:"font-medium",children:"Views:"})," ",k.view]})]})]},k.id))}),C=()=>{if(!m||!m.metaData||!m.metaData.totalPages)return null;const k=parseInt(m.metaData.totalPages);return h.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-2",children:[h.jsx("button",{onClick:()=>R(t-1),disabled:t<=1,className:"flex items-center px-3 py-2 bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:pointer-events-none transition-colors",children:h.jsx(cc,{className:"w-5 h-5"})}),h.jsx("div",{className:"px-4 py-2 rounded-md bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600",children:h.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[t," / ",k]})}),h.jsx("button",{onClick:()=>R(t+1),disabled:t>=k,className:"flex items-center px-3 py-2 bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:pointer-events-none transition-colors",children:h.jsx(dc,{className:"w-5 h-5"})})]})};return h.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[h.jsx("style",{children:f}),h.jsxs("main",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[h.jsx("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:h.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full",children:h.jsx("div",{className:"relative flex-grow",ref:o,children:h.jsxs("form",{onSubmit:L,className:"relative",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search for manga...",value:u,onChange:E,className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent transition-colors text-gray-900 dark:text-white"}),h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Fo,{className:"text-gray-500 dark:text-gray-400"})})]}),h.jsx(D1,{children:s&&h.jsx(Gj,{suggestions:n,searchTerm:u,onSelectSuggestion:b,onClose:()=>i(!1)})})]})})})}),h.jsxs("section",{className:"mb-8",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:"Browse by Genre"}),h.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:x?`${x.length} genres available`:""})]}),S?h.jsx("div",{className:"h-40 flex items-center justify-center",children:h.jsx(tx,{})}):h.jsx($j,{genres:x||[]})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Latest Updates"}),g&&h.jsxs("div",{className:"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 p-4 rounded-md mb-6",children:[h.jsxs("p",{children:["Error loading manga list: ",(v==null?void 0:v.message)||"Unknown error occurred"]}),h.jsx("button",{onClick:()=>y(),className:"mt-2 px-4 py-2 bg-red-200 dark:bg-red-800 rounded-md hover:bg-red-300 dark:hover:bg-red-700 transition-colors",children:"Try Again"})]}),p?h.jsx(tx,{}):h.jsxs(h.Fragment,{children:[I(),C()]})]})]}),h.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6 mt-8 transition-colors",children:h.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400",children:["© ",new Date().getFullYear()," Botsailer aka Hrs God"]})})})]})}function Kj(){const{manga:t}=gs(),[e,n]=A.useState([]),[r,s]=A.useState(!1),[i,o]=A.useState(0),[a,l]=A.useState(1),[u,c]=A.useState(0),d=$e(),f=y=>decodeURIComponent(y).replace(/-/g," ").split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ");A.useEffect(()=>{if(!t)return window.location.href="/manga";(async()=>{s(!0),window.scrollTo(0,0);try{const x=await Ce.get(`https://manga-api-vercel.vercel.app/api/search/${t}?page=${a}`);n(x.data.mangaList),o(x.data.metaData.totalPages),c(x.data.metaData.totalStories||0)}catch(x){console.error("Error fetching search results:",x)}finally{s(!1)}})()},[t,a]);const m=()=>{l(a+1)},p=()=>{a>1&&l(a-1)},g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};return h.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[h.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md",children:h.jsx("div",{className:"container mx-auto px-4 py-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[h.jsxs("div",{className:"mb-4 md:mb-0",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Ze,{to:"/",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:h.jsx(_j,{className:"w-5 h-5"})}),h.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"/"}),h.jsx(Ze,{to:"/manga",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:h.jsx(kj,{className:"w-5 h-5"})}),h.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"/"}),h.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Search"})]}),h.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mt-2 flex items-center",children:[h.jsx(Fo,{className:"mr-2 h-6 w-6 text-purple-600 dark:text-purple-400"}),h.jsx("span",{children:"Results for"}),h.jsxs("span",{className:"ml-2 text-purple-700 dark:text-purple-400",children:['"',f(t),'"']})]})]}),h.jsx("div",{className:"flex items-center",children:h.jsxs("div",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-4 py-2 rounded-full text-sm font-medium",children:[u," Titles Found"]})})]})})}),h.jsx("div",{className:"container mx-auto px-4 py-8",children:r?h.jsx("div",{className:"flex justify-center items-center py-12",children:h.jsxs("div",{className:"relative w-20 h-20",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-gray-200 dark:border-gray-700 rounded-full"}),h.jsx(Ye.div,{className:"absolute top-0 left-0 w-full h-full border-4 border-t-purple-600 rounded-full",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"}})]})}):h.jsxs(h.Fragment,{children:[e.length>0?h.jsx(Ye.section,{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5 md:gap-6",variants:g,initial:"hidden",animate:"visible",children:e.map((y,x)=>h.jsxs(Ye.div,{variants:v,whileHover:{scale:1.03,y:-5},whileTap:{scale:.98},onClick:()=>d(`/mangainfo/${y.id}`),className:"flex flex-col bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer h-full",children:[h.jsxs("div",{className:"relative pb-[140%] overflow-hidden",children:[h.jsx("img",{src:y.image,alt:y.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 hover:scale-110",loading:"lazy"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})]}),h.jsxs("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 mb-2",children:y.title}),y.type&&h.jsx("div",{className:"mt-auto pt-2",children:h.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:y.type})})]})]},y.id||x))}):h.jsxs("div",{className:"text-center py-16 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[h.jsx(Fo,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No results found"}),h.jsxs("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[`We couldn't find any manga matching "`,f(t),'". Try a different search term.']}),h.jsx("div",{className:"mt-6",children:h.jsx("button",{onClick:()=>d("/"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:"Return to Home"})})]}),i>0&&h.jsx("div",{className:"mt-10 mb-6 flex justify-center",children:h.jsxs("nav",{className:"flex items-center bg-white dark:bg-gray-800 px-4 py-3 rounded-lg shadow-md space-x-2",children:[h.jsxs("button",{onClick:p,disabled:a===1,className:`flex items-center px-3 py-2 rounded-md text-sm font-medium ${a===1?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[h.jsx(cc,{className:"mr-1"}),"Previous"]}),h.jsxs("div",{className:"px-4 py-2 rounded-md bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 font-medium text-sm",children:["Page ",a," of ",i]}),h.jsxs("button",{onClick:m,disabled:a>=i,className:`flex items-center px-3 py-2 rounded-md text-sm font-medium ${a>=i?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:["Next",h.jsx(dc,{className:"ml-1"})]})]})})]})})]})}const Wj=()=>h.jsx("div",{className:"flex justify-center items-center h-screen",children:h.jsxs("div",{className:"relative w-24 h-24",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-gray-200 dark:border-gray-700 rounded-full"}),h.jsx(Ye.div,{className:"absolute top-0 left-0 w-full h-full border-4 border-t-purple-600 dark:border-t-purple-500 rounded-full",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"}}),h.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:h.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Loading"})})]})}),zj=({children:t,color:e})=>{const n={green:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",blue:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",purple:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",gray:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",red:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"};return h.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n[e]||n.gray}`,children:t})};function qj(){const{manga:t}=gs(),[e,n]=A.useState(null),[r,s]=A.useState(!1),[i,o]=A.useState("details"),a=$e(),l=c=>c>=1e6?(c/1e6).toFixed(1)+"M":c>=1e3?(c/1e3).toFixed(1)+"K":c,u=c=>{switch(c==null?void 0:c.toLowerCase()){case"ongoing":return"green";case"completed":return"blue";case"hiatus":return"yellow";case"cancelled":return"red";default:return"gray"}};return A.useEffect(()=>{(async()=>{try{s(!0);const d=await Ce.get(`https://manga-api-vercel.vercel.app/api/manga/${t}`);n(d.data)}catch(d){console.log("Error fetching manga data:",d)}s(!1)})(),window.scrollTo(0,0)},[t]),r?h.jsx(Wj,{}):h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-200",children:[e&&h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:{height:"400px"},children:[h.jsx("div",{className:"absolute inset-0 bg-cover bg-center blur opacity-30",style:{backgroundImage:`url(${e.imageUrl})`}}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-800/40 via-gray-900/70 to-gray-900"})]}),h.jsxs("div",{className:"container mx-auto px-4 py-8 relative",children:[h.jsxs("button",{onClick:()=>a(-1),className:"inline-flex items-center space-x-2 text-white bg-gray-900/50 dark:bg-gray-800/50 backdrop-blur-sm px-4 py-2 rounded-full mb-4 hover:bg-gray-900/70 dark:hover:bg-gray-800/70 transition-colors duration-200",children:[h.jsx(Lu,{className:"h-4 w-4"}),h.jsx("span",{children:"Back to Home"})]}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-8 items-start pt-4",children:[h.jsxs("div",{className:"col-span-3 md:col-span-1 flex flex-col items-center",children:[h.jsx(Ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative rounded-lg overflow-hidden shadow-2xl mb-4",children:h.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-auto object-cover"})}),h.jsxs(Ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"w-full mt-4 space-y-3",children:[h.jsxs("button",{onClick:()=>a("/manga/chapters",{state:e.chapterList}),className:"w-full py-3 px-6 bg-purple-600 hover:bg-purple-700 text-white rounded-lg shadow-lg transition duration-200 flex items-center justify-center space-x-2 font-medium",children:[h.jsx(Ih,{className:"h-5 w-5"}),h.jsx("span",{children:"Read Now"})]}),h.jsxs("button",{className:"w-full py-3 px-6 bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-700 rounded-lg shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200 flex items-center justify-center space-x-2 font-medium",children:[h.jsx(Nj,{className:"h-5 w-5 text-red-500"}),h.jsx("span",{children:"Add to Favorites"})]})]})]}),h.jsxs(Ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"col-span-3 md:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 md:p-8",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 md:mb-0",children:e.name}),h.jsx(zj,{color:u(e.status),children:e.status})]}),h.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:h.jsx("nav",{className:"-mb-px flex space-x-6",children:h.jsx("button",{onClick:()=>o("details"),className:`py-2 font-medium text-sm border-b-2 transition-colors duration-200 ${i==="details"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Details"})})}),h.jsx("div",{className:"prose prose-lg max-w-none dark:prose-invert",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx(Bj,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-3"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Author"}),h.jsx("div",{className:"text-gray-900 dark:text-white",children:e.author||"Unknown"})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx(Ih,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-3"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Chapters"}),h.jsx("div",{className:"text-gray-900 dark:text-white",children:e.chapterList.length>0?e.chapterList.length:"N/A"})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx(sb,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-3"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Views"}),h.jsx("div",{className:"text-gray-900 dark:text-white",children:l(e.view)||"N/A"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx(rb,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-3"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Last Updated"}),h.jsx("div",{className:"text-gray-900 dark:text-white",children:e.updated||"N/A"})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx(Oj,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-3"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),h.jsx("div",{className:"text-gray-900 dark:text-white",children:e.status||"N/A"})]})]}),h.jsxs("div",{className:"flex items-start",children:[h.jsx(Pj,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-3"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Reading Time"}),h.jsx("div",{className:"text-gray-900 dark:text-white",children:e.chapterList.length>0?`~${Math.ceil(e.chapterList.length*7)} mins`:"N/A"})]})]})]})]}),h.jsxs("div",{className:"flex items-start mt-6",children:[h.jsx(Uj,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mt-0.5 mr-3"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Genres"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:e.genres.map((c,d)=>h.jsx(Ze,{to:`/genre/${c.toLowerCase().replace(/ /g,"-")}`,className:"px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm hover:bg-purple-100 dark:hover:bg-purple-900 hover:text-purple-800 dark:hover:text-purple-100 transition-colors duration-200",children:c},d))})]})]})]})})]})]})]})]}),!r&&!e&&h.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Manga Not Found"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"The manga you're looking for couldn't be located or may have been removed."}),h.jsx("button",{onClick:()=>a("/"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition duration-200",children:"Return to Home"})]})]})}function Yj(){const t=Nt(),e=$e(),n=t.state,[r,s]=A.useState(1),[i]=A.useState(20),[o,a]=A.useState("desc"),[l,u]=A.useState(!0),c=b=>{if(!b)return"N/A";try{return new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return b}},d=b=>!b&&b!==0?"N/A":b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),f=b=>{if(!b)return null;const L=b.match(/Chapter\s+(\d+(\.\d+)?)/i)||b.match(/Ch\.\s*(\d+(\.\d+)?)/i)||b.match(/(\d+(\.\d+)?)/);return L?parseFloat(L[1]):null};if(A.useEffect(()=>{const b=setTimeout(()=>{u(!1)},500);return()=>clearTimeout(b)},[]),!n)return h.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex justify-center items-center p-4",children:h.jsxs("div",{className:"text-center max-w-md bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[h.jsx(Ih,{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-500 mb-4"}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"No Chapters Found"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"It seems you may have skipped a step or the manga doesn't have any available chapters yet."}),h.jsxs("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-200 flex items-center justify-center mx-auto",children:[h.jsx(Lu,{className:"mr-2"})," Return to Manga Details"]})]})});const m=[...n].sort((b,L)=>{const R=f(b.name),I=f(L.name);return R!==null&&I!==null?o==="desc"?I-R:R-I:o==="desc"?L.name.localeCompare(b.name):b.name.localeCompare(L.name)}),p=r*i,g=p-i,v=m.slice(g,p),y=Math.ceil(n.length/i),x=b=>{s(b),window.scrollTo({top:0,behavior:"smooth"})},S=[];if(y<=7)for(let b=1;b<=y;b++)S.push(b);else if(r<=3){for(let b=1;b<=5;b++)S.push(b);S.push("..."),S.push(y)}else if(r>=y-2){S.push(1),S.push("...");for(let b=y-4;b<=y;b++)S.push(b)}else{S.push(1),S.push("...");for(let b=r-1;b<=r+1;b++)S.push(b);S.push("..."),S.push(y)}const w={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},E={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}};return h.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4 sm:px-6 lg:px-8 transition-colors duration-200",children:h.jsxs("div",{className:"container mx-auto max-w-7xl",children:[h.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[h.jsxs("div",{className:"mb-4 sm:mb-0",children:[h.jsxs("button",{onClick:()=>e(-1),className:"inline-flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 mb-2",children:[h.jsx(Lu,{className:"mr-2"}),h.jsx("span",{children:"Back"})]}),h.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:["Chapters ",h.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-lg font-normal",children:["(",n.length,")"]})]})]}),h.jsx("div",{className:"flex items-center",children:h.jsxs("button",{onClick:()=>a(o==="desc"?"asc":"desc"),className:"flex items-center space-x-2 bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[h.jsx(Mj,{}),h.jsx("span",{children:o==="desc"?"Newest First":"Oldest First"}),o==="desc"?h.jsx(Ij,{}):h.jsx(Dj,{})]})})]})}),l?h.jsx("div",{className:"flex justify-center items-center h-64",children:h.jsxs("div",{className:"relative w-20 h-20",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-gray-200 dark:border-gray-700 rounded-full"}),h.jsx(Ye.div,{className:"absolute top-0 left-0 w-full h-full border-4 border-t-indigo-600 rounded-full",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"}}),h.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:h.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Loading"})})]})}):h.jsx(Ye.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",variants:w,initial:"hidden",animate:"visible",children:v.map(b=>h.jsx(Ye.div,{variants:E,whileHover:{y:-5,transition:{duration:.2}},className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-all duration-200",children:h.jsxs("div",{className:"p-6 cursor-pointer h-full flex flex-col",onClick:()=>e(`/manga/read?id=${b.path.replace("/chapter/","")}`),children:[h.jsx("div",{className:"flex-grow",children:h.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 line-clamp-2",children:b.name})}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mb-2",children:[h.jsx(rb,{className:"mr-2 h-4 w-4"}),h.jsx("span",{children:c(b.createdAt)})]}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[h.jsx(sb,{className:"mr-2 h-4 w-4"}),h.jsxs("span",{children:[d(b.view)," views"]})]})]})]})},b.id||b.path))}),!l&&n.length>i&&h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsxs("nav",{className:"flex items-center bg-white dark:bg-gray-800 px-4 py-3 rounded-lg shadow-md",children:[h.jsx("button",{onClick:()=>x(r-1),disabled:r===1,className:`flex items-center px-3 py-2 rounded-md mr-2 ${r===1?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:h.jsx(cc,{className:"h-5 w-5"})}),h.jsx("div",{className:"hidden sm:flex",children:S.map((b,L)=>h.jsx("button",{onClick:()=>typeof b=="number"?x(b):null,disabled:b==="...",className:`px-4 py-2 mx-1 rounded-md ${b===r?"bg-indigo-600 text-white":b==="..."?"text-gray-500 dark:text-gray-400 cursor-default":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:b},L))}),h.jsxs("div",{className:"sm:hidden px-4 py-2 text-gray-700 dark:text-gray-300",children:["Page ",r," of ",y]}),h.jsx("button",{onClick:()=>x(r+1),disabled:r===y,className:`flex items-center px-3 py-2 rounded-md ml-2 ${r===y?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:h.jsx(dc,{className:"h-5 w-5"})})]})})]})})}function Qj(){const[t]=km(),e=t.get("id");Nt();const n=$e(),[r,s]=A.useState({}),[i,o]=A.useState(!0),[a,l]=A.useState(!0);A.useEffect(()=>{const v=async()=>{try{l(!0),s({});const x=(await Ce.get(`https://manga-api-vercel.vercel.app/api/manga/${e}`)).data;x.chapterListIds=x.chapterListIds.reverse(),x.currentChapter=e,s(x)}catch(y){console.log("Error fetching manga data:",y)}finally{l(!1)}};window.scrollTo(0,0),v()},[e]);const u=()=>{o(!i)},c=()=>{const v=e.split("/").pop(),y=r.chapterListIds.findIndex(x=>x.id.endsWith(v));if(y!==-1&&y<r.chapterListIds.length-1){const x=r.chapterListIds[y+1].id;n(`/manga/read?id=${x}`)}},d=()=>{const v=e.split("/").pop(),y=r.chapterListIds.findIndex(x=>x.id.endsWith(v));if(y>0){const x=r.chapterListIds[y-1].id;n(`/manga/read?id=${x}`)}};if(a||!r.images||r.images.length===0)return h.jsx(Fn,{});const f=e.split("/").pop(),m=r.chapterListIds.findIndex(v=>v.id.endsWith(f)),p=m!==-1&&m<r.chapterListIds.length-1,g=m>0;return h.jsxs("div",{className:"bg-gray-900 min-h-screen text-white",children:[h.jsxs("div",{className:"sticky top-0 z-10 bg-gray-800 shadow-lg p-4",children:[h.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center",children:[g&&h.jsx("button",{onClick:d,className:"mr-4 bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-full transition-all duration-200","aria-label":"Previous Chapter",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("h1",{className:"text-xl font-bold truncate max-w-xs md:max-w-sm",children:r.title||"Reading Manga"})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 md:px-6 rounded-full transition-all duration-200 flex items-center mr-3",onClick:u,children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i?h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"}):h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),h.jsx("span",{className:"hidden md:inline",children:i?"Horizontal View":"Vertical View"})]}),p&&h.jsx("button",{onClick:c,className:"bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-full transition-all duration-200","aria-label":"Next Chapter",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),h.jsxs("div",{className:"container mx-auto mt-2 flex justify-between text-gray-400 text-sm",children:[h.jsx("span",{children:m!==-1&&r.chapterListIds[m].name}),h.jsxs("span",{children:[m+1," / ",r.chapterListIds.length]})]})]}),h.jsx("div",{className:"container mx-auto px-4 py-6",children:h.jsx("div",{className:`
          ${i?"flex flex-col space-y-4":"flex flex-row space-x-4 overflow-x-auto pb-4"}
          transition-all duration-300 ease-in-out
        `,children:r.images.map((v,y)=>h.jsx("div",{className:` 
      ${i?"w-full":"flex-none"} 
      bg-gray-800 overflow-hidden shadow-xl
    `,style:{margin:0,padding:0},children:h.jsx("img",{src:v.image,alt:`Chapter ${e.split("/").pop()} - Page ${y+1}`,className:` 
        ${i?"w-full h-auto":"h-[85vh] w-auto"}
        object-contain mx-auto
      `,style:{margin:0,padding:0},loading:"lazy"})},y))})}),h.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col space-y-3",children:[h.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg transition-all duration-200",onClick:u,"aria-label":"Toggle View",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i?h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"}):h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),p&&h.jsx("button",{onClick:c,className:"bg-gray-700 hover:bg-gray-600 text-white p-4 rounded-full shadow-lg transition-all duration-200","aria-label":"Next Chapter",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),g&&h.jsx("button",{onClick:d,className:"bg-gray-700 hover:bg-gray-600 text-white p-4 rounded-full shadow-lg transition-all duration-200","aria-label":"Previous Chapter",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]})]})}const Xj=()=>h.jsx("div",{className:"flex justify-center items-center h-64",children:h.jsxs("div",{className:"relative w-24 h-24",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-gray-300 rounded-full"}),h.jsx(Ye.div,{className:"absolute top-0 left-0 w-full h-full border-4 border-t-indigo-600 rounded-full",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"}}),h.jsx("p",{className:"absolute inset-0 flex justify-center items-center text-sm font-medium",children:"Loading"})]})}),Jj=()=>{const[t,e]=A.useState(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));return A.useEffect(()=>{const n=window.document.documentElement;t==="dark"?(n.classList.add("dark"),localStorage.setItem("theme","dark")):(n.classList.remove("dark"),localStorage.setItem("theme","light"))},[t]),[t,e]},Zj=({suggestions:t,searchTerm:e,onSelectSuggestion:n,onClose:r})=>{if(!t.length||!e)return null;const s=(i,o)=>{if(!o)return i;const a=new RegExp(`(${o})`,"gi");return i.split(a).map((u,c)=>a.test(u)?h.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-700",children:u},c):u)};return h.jsxs(Ye.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-20 mt-1 w-full bg-white dark:bg-gray-800 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 max-h-64 overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-gray-200 dark:border-gray-700",children:[h.jsx("h3",{className:"text-sm font-medium",children:"Suggestions"}),h.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:h.jsx(ib,{})})]}),h.jsx("ul",{children:t.map((i,o)=>h.jsx(Ye.li,{whileHover:{backgroundColor:"rgba(99, 102, 241, 0.1)"},className:"p-2 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0",onClick:()=>n(i),children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("img",{src:i.image,alt:i.title,className:"w-10 h-14 object-cover rounded"}),h.jsx("div",{className:"text-sm",children:s(i.title,e)})]})},i.id||`suggestion-${o}`))})]})};function e3(){const{genreId:t}=gs(),[e,n]=A.useState(1),[r,s]=A.useState(""),[i]=Cj(r,300),[o,a]=A.useState([]),[l,u]=A.useState(!1),[c,d]=Jj(),f=A.useRef(null),m=$e(),p=`
    * {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="none" stroke="%236366F1" stroke-width="1.5"/></svg>'), auto;
    }
    
    a, button, [role="button"], input, select, textarea, .cursor-pointer {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="%236366F1" fill-opacity="0.2" stroke="%236366F1" stroke-width="1.5"/><circle cx="12" cy="12" r="4" fill="%236366F1"/></svg>'), pointer;
    }
    
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.05);
      border-radius: 4px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background-color: rgba(99, 102, 241, 0.5);
      border-radius: 4px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background-color: rgba(99, 102, 241, 0.7);
    }
  `,g=k=>({romance:"Romance",action:"Action",comedy:"Comedy",drama:"Drama",yuri:"Yuri",fantasy:"Fantasy",shoujo:"Shoujo",seinen:"Seinen",shounen:"Shounen","slice-of-life":"Slice of Life"})[k]||k.charAt(0).toUpperCase()+k.slice(1).replace(/-/g," "),{data:v,isLoading:y,isError:x,error:S}=Ff(["genreManga",t,e],async()=>{const k=`https://manga-api-vercel.vercel.app/api/genere/${t}?page=${e}`;return(await Se.get(k)).data},{keepPreviousData:!0,staleTime:5*60*1e3,retry:2,onError:k=>{console.error(`Error fetching manga for genre ${t}:`,k)}});A.useEffect(()=>{(async()=>{if(i.length<2){a([]);return}try{const U=await Se.get(`https://manga-api-vercel.vercel.app/api/search/${i.replace(/ /g,"-").toLowerCase()}`);U.data&&Array.isArray(U.data.mangaList)&&(a(U.data.mangaList.slice(0,5)),u(!0))}catch(U){console.error("Error fetching suggestions:",U),a([])}})()},[i]);const w=k=>{s(k.target.value),k.target.value.length>0?u(!0):u(!1)},E=k=>{u(!1),m(`/mangainfo/${k.id}`)};A.useEffect(()=>{const k=U=>{f.current&&!f.current.contains(U.target)&&u(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const b=k=>{k.preventDefault(),r.trim()&&(m(`/searchmanga/${r.replace(/ /g,"-").toLowerCase()}`),u(!1))},L=()=>{d(c==="dark"?"light":"dark")},R=k=>{n(k),window.scrollTo({top:0,behavior:"smooth"})},I=()=>!v||!v.mangaList||v.mangaList.length===0?h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No manga found for this genre."})}):h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6",children:v.mangaList.map((k,U)=>h.jsxs(Ye.div,{whileHover:{scale:1.03},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},onClick:()=>m(`/mangainfo/${k.id}`),className:"group bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer",children:[h.jsxs("div",{className:"relative pb-[140%] overflow-hidden",children:[h.jsx("img",{src:k.image,alt:k.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),h.jsxs("div",{className:"p-3 space-y-2",children:[h.jsx("h2",{className:"font-medium text-gray-900 dark:text-white line-clamp-2 min-h-[2.5rem]",children:k.title}),k.chapter&&h.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[h.jsx("span",{className:"font-medium",children:"Chapter:"})," ",k.chapter]}),k.view&&h.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[h.jsx("span",{className:"font-medium",children:"Views:"})," ",k.view]})]})]},k.id||`manga-${U}`))}),C=()=>{if(!v||!v.metaData||!v.metaData.totalPages)return null;const k=parseInt(v.metaData.totalPages);return h.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-2",children:[h.jsx("button",{onClick:()=>R(e-1),disabled:e<=1,className:"flex items-center px-3 py-2 bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:pointer-events-none transition-colors",children:h.jsx(cc,{className:"w-5 h-5"})}),h.jsx("div",{className:"px-4 py-2 rounded-md bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600",children:h.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[e," / ",k]})}),h.jsx("button",{onClick:()=>R(e+1),disabled:e>=k,className:"flex items-center px-3 py-2 bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:pointer-events-none transition-colors",children:h.jsx(dc,{className:"w-5 h-5"})})]})};return h.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[h.jsx("style",{children:p}),h.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-30 transition-colors",children:h.jsx("div",{className:"container mx-auto px-4 py-3 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Ze,{to:"/manga",className:"mr-3 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:h.jsx(Lu,{className:"w-5 h-5"})}),h.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white transition-colors",children:g(t)})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full sm:w-auto",children:[h.jsx("div",{className:"relative flex-grow",ref:f,children:h.jsxs("form",{onSubmit:b,className:"relative",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search for manga...",value:r,onChange:w,className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent transition-colors text-gray-900 dark:text-white"}),h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Fo,{className:"text-gray-500 dark:text-gray-400"})})]}),h.jsx(D1,{children:l&&h.jsx(Zj,{suggestions:o,searchTerm:r,onSelectSuggestion:E,onClose:()=>u(!1)})})]})}),h.jsx("div",{className:"flex space-x-2",children:h.jsx("button",{onClick:L,className:"p-2 bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:ring-opacity-50",children:c==="dark"?h.jsx(jj,{className:"w-5 h-5"}):h.jsx(Fj,{className:"w-5 h-5"})})})]})]})})}),h.jsxs("main",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[(v==null?void 0:v.metaData)&&h.jsx("div",{className:"mb-6",children:h.jsxs("div",{className:"inline-block px-4 py-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-md",children:[h.jsx("span",{className:"font-medium",children:g(t)}),": ",v.metaData.totalStories||0," manga"]})}),x&&h.jsxs("div",{className:"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 p-4 rounded-md mb-6",children:[h.jsxs("p",{children:["Error loading manga list: ",(S==null?void 0:S.message)||"Unknown error occurred"]}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-red-200 dark:bg-red-800 rounded-md hover:bg-red-300 dark:hover:bg-red-700 transition-colors",children:"Try Again"})]}),y?h.jsx(Xj,{}):h.jsxs(h.Fragment,{children:[I(),C()]})]}),h.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6 mt-8 transition-colors",children:h.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400",children:["© ",new Date().getFullYear()," Botsailer aka Hrs God"]})})})]})}const t3=()=>{const[t,e]=A.useState(""),[n,r]=A.useState([]),[s,i]=A.useState(!0),o=$e(),a=async l=>{l.preventDefault(),e(t.trim());try{const u=await Ce.get(`/movies/dramacool/${t}`);r(u.data.results),i(!1)}catch(u){console.log(u),r([]),i(!0)}};return h.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-800 text-white",children:[s?h.jsx("div",{className:"flex justify-center items-center h-screen",children:h.jsxs("form",{onSubmit:a,className:"flex items-center",children:[h.jsx("input",{type:"text",placeholder:"Search Kdrama",required:!0,className:"border-2 border-gray-600 bg-gray-900 h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none text-white placeholder:text-gray-400 focus:border-purple-400",value:t,onChange:l=>e(l.target.value)}),h.jsx("button",{type:"submit",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded ml-2",children:"Search"})]})}):h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"text",placeholder:"Search Kdrama",className:"border-2 border-gray-600 bg-gray-900 h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none text-white placeholder:text-gray-400 focus:border-purple-400",value:t,onChange:l=>e(l.target.value)}),h.jsx("button",{onClick:a,className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded ml-2",children:"Search"})]})}),n.length>0?h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:n.map(l=>h.jsxs("div",{onClick:()=>o(`/Kdramainfo?id=${l.id}`),className:"flex flex-col items-center bg-gray-700 rounded-lg shadow-md overflow-hidden cursor-pointer",children:[h.jsx("img",{src:l.image,alt:l.title,className:"w-full h-48 object-cover"}),h.jsx("div",{className:"p-4",children:h.jsx("h1",{className:"text-center text-lg font-semibold",children:l.title})})]},l.id))}):n.length===0&&s?h.jsx("div",{className:"flex justify-center items-center h-full",children:h.jsx("p",{className:"font-bold",children:"No results found. Please check your spelling and try again."})}):null]})},n3=()=>{const[t]=km(),e=t.get("id"),[n,r]=A.useState(null),s=$e();A.useEffect(()=>{e&&(async()=>{try{const a=await Ce.get(`/movies/dramacool/info?id=${e}`);r(a.data)}catch(a){console.log(a)}})()},[e]);const i=()=>{s("/KdramaWatch",{state:{id:e,episodes:n.episodes}})};return n?h.jsx("div",{className:"bg-gray-100 min-h-screen py-6 flex flex-col justify-center sm:py-12",children:h.jsx("div",{className:"max-w-screen mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"shadow-lg rounded-lg overflow-hidden sm:flex",children:[h.jsx("div",{className:"sm:w-1/3",children:h.jsx("img",{src:n.image,alt:n.title,className:"w-full h-64 object-cover sm:h-auto"})}),h.jsxs("div",{className:"p-6 sm:w-2/3 bg-white",children:[h.jsx("h2",{className:"text-2xl font-bold mb-2",children:n.title}),h.jsx("p",{className:"mb-4 text-gray-700",children:n.description}),h.jsxs("p",{className:"mb-2",children:[h.jsx("span",{className:"font-bold",children:"Status:"})," ",n.status]}),h.jsxs("p",{className:"mb-2",children:[h.jsx("span",{className:"font-bold",children:"Genres:"})," ",n.genres.join(", ")]}),h.jsxs("p",{className:"mb-2",children:[h.jsx("span",{className:"font-bold",children:"Other Names:"})," ",n.otherNames.join(", ")]}),h.jsxs("p",{className:"mb-4",children:[h.jsx("span",{className:"font-bold",children:"Release Date:"})," ",n.releaseDate]}),h.jsx("button",{onClick:i,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Watch Now"})]})]})})}):h.jsx(Fn,{})};function r3(){const t=Nt(),e=$e(),n=A.useRef(null),r=A.useRef(null),{id:s,episodes:i}=t.state,[o,a]=A.useState(null),[l,u]=A.useState(""),[c,d]=A.useState(!1);A.useEffect(()=>{if(!s)return h.jsx("div",{className:"fixed top-1/2 left-1/2 w-full h-full overflow-hidden",children:h.jsx("h1",{className:"text-center font-bold ",children:"Seems like you skipped a step "})});i&&i.length>0&&a(i[0])},[s,i,e]),A.useEffect(()=>{(async()=>{if(o){const S=(await Ce.get(`/movies/dramacool/watch?episodeId=${o.id}&mediaId=${s}`)).data.sources;if(S&&S.length>0){const w=S.find(E=>E.quality==="default")||S[0];u(w.url)}}})()},[o]),A.useEffect(()=>{n.current&&l&&f(l)},[l,n]);const f=y=>{r.current&&r.current.destroy(),pn.isSupported()?(r.current=new pn({capLevelToPlayerSize:!0,autoLevelCapping:-1}),r.current.loadSource(y),r.current.attachMedia(n.current)):n.current.canPlayType("application/vnd.apple.mpegurl")&&(n.current.src=y)},m=y=>{a(y)},p=()=>{const y=i.findIndex(x=>x.id===o.id);y>0&&a(i[y-1])},g=()=>{d(!c)},v=()=>{const y=i.findIndex(x=>x.id===o.id);y<i.length-1&&a(i[y+1])};return!i||!i.length||!s||!s.length?h.jsx("div",{className:" text-center  ",children:"Hmmmmm seems wrong maybe a skipped step? "}):h.jsx(h.Fragment,{children:h.jsxs("div",{className:"flex flex-col md:flex-row h-screen bg-gray-900",children:[h.jsxs("div",{className:"h-full md:w-1/5 overflow-y-auto bg-gray-800 text-white p-4",children:[h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Episodes"}),h.jsx("div",{className:"flex flex-col space-y-2",children:i.map((y,x)=>h.jsx("div",{className:`py-2 px-4 flex flex-grow bg-gray-700 hover:bg-gray-600 rounded cursor-pointer ${(o==null?void 0:o.id)===y.id?"bg-green-500":""}`,onClick:()=>m(y),children:h.jsx("p",{className:"text-sm text-gray-300",children:y.title})},x))})]}),h.jsx("div",{className:"h-full md:w-4/5 flex flex-col items-center justify-center",children:l?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"relative w-full h-0",style:{paddingBottom:"56.25%"},children:h.jsx("video",{ref:n,autoPlay:!0,controls:!0,width:"100%",height:"100%",className:"absolute top-0 left-0 w-full h-full rounded-md shadow-lg",onEnded:c?v:null})}),h.jsxs("div",{className:"flex justify-between w-full mt-4 px-4",children:[o!==i[0]&&h.jsx("button",{onClick:p,disabled:o===i[0],className:"bg-gray-700 text-white py-2 px-4 rounded hover:bg-gray-600 disabled:bg-gray-500",children:"Previous"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"mr-3 text-white",children:"Autoplay Next:"}),h.jsx("label",{htmlFor:"autoplay-toggle",className:"flex items-center cursor-pointer",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"checkbox",id:"autoplay-toggle",className:"sr-only",checked:c,onChange:g}),h.jsx("div",{className:"w-10 h-6 bg-gray-400 rounded-full shadow-inner"}),h.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full shadow inset-y-0.5 left-0 transform transition ${c?"translate-x-5 bg-green-500":"translate-x-0"}`})]})})]}),o!==i[i.length-1]&&h.jsx("button",{onClick:v,disabled:o===i[i.length-1],className:"bg-gray-700 text-white py-2 px-4 rounded hover:bg-gray-600 disabled:bg-gray-500",children:"Next"})]})]}):h.jsx(Fn,{})})]})})}function s3(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[s,i]=A.useState(""),[o,a]=A.useState(!1),l=$e();if(A.useEffect(()=>{a(!0),(async()=>{try{const p=await Ce.get("/movies/flixhq/recent-movies");e(p.data);const g=await Ce.get("/movies/flixhq/recent-shows");r(g.data)}catch(p){console.error("Error fetching data",p)}a(!1)})()},[]),o)return h.jsx(Fn,{});const u=()=>{s.trim()!==""&&l(`/movie/search/${s}`)},c=m=>{m.key==="Enter"&&u()},d=({item:m})=>h.jsx("div",{className:"relative group w-64 m-4 transform transition-all duration-300 hover:scale-105",children:h.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-lg bg-gray-900",children:[h.jsxs("div",{className:"relative h-96",children:[h.jsx("img",{src:m.image,alt:m.title,className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition-all duration-300 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100",children:h.jsx("button",{onClick:()=>l(`/movie/info?id=${m.id}`),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full transform transition-all duration-300 hover:scale-105",children:"View Details"})})]}),h.jsxs("div",{className:"p-4 bg-gray-900",children:[h.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:m.title}),h.jsxs("div",{className:"mt-2 space-y-1",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-400",children:[h.jsx("span",{children:m.releaseDate}),h.jsx("span",{children:m.duration})]}),m.type==="TV Series"&&h.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-400",children:[h.jsx("span",{children:m.season}),h.jsx("span",{children:m.latestEpisode})]})]})]}),h.jsx("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:h.jsx("button",{onClick:()=>l(`/watch/${m.id}`),className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transform transition hover:scale-110",children:"▶"})})]})}),f=m=>h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 justify-items-center",children:m.map(p=>h.jsx(d,{item:p},p.id))});return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[h.jsx("div",{className:"relative mb-12 p-8 rounded-2xl bg-gradient-to-r from-blue-600 to-purple-600",children:h.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[h.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Discover Movies & TV Shows"}),h.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[h.jsx("input",{type:"text",value:s,onChange:m=>i(m.target.value),onKeyPress:c,className:"w-full px-6 py-4 text-lg text-gray-800 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Search for movies or shows..."}),h.jsx("button",{onClick:u,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full transition duration-300",children:"Search"})]})]})}),h.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[h.jsxs("section",{children:[h.jsx("h2",{className:"text-3xl font-bold mb-6 pl-4 border-l-4 border-blue-600",children:"Recent Movies"}),t.length>0?f(t):h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-400 text-lg",children:"Loading movies..."})})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-3xl font-bold mb-6 pl-4 border-l-4 border-purple-600",children:"Recent Shows"}),n.length>0?f(n):h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-400 text-lg",children:"Loading shows..."})})]})]})]})}function i3(){const t=gs(),[e,n]=A.useState(!1),[r,s]=A.useState([]),i=$e();return A.useEffect(()=>{if(!t||t===void 0||t==="")return;console.log(t),(async()=>{try{n(!0);const a=await Ce.get(`/meta/tmdb/${t.id}`);console.log(a.data),s(a.data.results)}catch(a){console.error("Error searching data",a)}n(!1)})()},[t]),!t||t===void 0||t===""?h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-800",children:[h.jsx("h1",{className:"text-6xl font-bold",children:"404"}),h.jsx("h2",{className:"text-4xl",children:"Oops! Page not found."}),h.jsx("p",{className:"mt-4 text-xl",children:"We can't find the page you're looking for."}),h.jsx("p",{className:"mt-4 text-xl",children:"But don't worry, Here's solution put query in url."}),h.jsx("img",{className:"w-64 h-64 mt-8",src:"https://i.imgur.com/qIufhof.png",alt:"Cute cat stating: I have no idea what I'm doing"})]}):e?h.jsx(Fn,{}):h.jsx(h.Fragment,{children:r.length>0?h.jsx("div",{className:"flex flex-wrap justify-center",children:r.map(o=>h.jsxs("div",{onClick:()=>{i(`/movie/info?Id=${o.id}&type=${o.type}`)},className:"m-4 w-64",children:[h.jsx("img",{src:o.image,alt:o.title,className:"w-full h-96 object-cover rounded-md shadow-lg"}),h.jsxs("div",{className:"mt-2",children:[h.jsx("h1",{className:"text-xl font-bold",children:o.title}),h.jsxs("p",{className:"text-xl text-black",children:["Year: ",o.releaseDate]}),h.jsxs("p",{className:"text-xl text-black",children:["Type : ",o.type]})]})]},o.id))}):h.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-800",children:h.jsx("h1",{className:"text-6xl font-bold",children:"No contents Found maybe not exists "})})})}function ob(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ob(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function vr(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ob(t))&&(r&&(r+=" "),r+=e);return r}const jo=t=>typeof t=="number"&&!isNaN(t),is=t=>typeof t=="string",Ft=t=>typeof t=="function",wl=t=>is(t)||Ft(t)?t:null,Dh=t=>A.isValidElement(t)||is(t)||Ft(t)||jo(t);function o3(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function fc(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:i=300}=t;return function(o){let{children:a,position:l,preventExitTransition:u,done:c,nodeRef:d,isIn:f,playToast:m}=o;const p=r?`${e}--${l}`:e,g=r?`${n}--${l}`:n,v=A.useRef(0);return A.useLayoutEffect(()=>{const y=d.current,x=p.split(" "),S=w=>{w.target===d.current&&(m(),y.removeEventListener("animationend",S),y.removeEventListener("animationcancel",S),v.current===0&&w.type!=="animationcancel"&&y.classList.remove(...x))};y.classList.add(...x),y.addEventListener("animationend",S),y.addEventListener("animationcancel",S)},[]),A.useEffect(()=>{const y=d.current,x=()=>{y.removeEventListener("animationend",x),s?o3(y,c,i):c()};f||(u?x():(v.current=1,y.className+=` ${g}`,y.addEventListener("animationend",x)))},[f]),Q.createElement(Q.Fragment,null,a)}}function nx(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const St=new Map;let Uo=[];const Ph=new Set,a3=t=>Ph.forEach(e=>e(t)),ab=()=>St.size>0;function lb(t,e){var n;if(e)return!((n=St.get(e))==null||!n.isToastActive(t));let r=!1;return St.forEach(s=>{s.isToastActive(t)&&(r=!0)}),r}function ub(t,e){Dh(t)&&(ab()||Uo.push({content:t,options:e}),St.forEach(n=>{n.buildToast(t,e)}))}function rx(t,e){St.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function l3(t){const{subscribe:e,getSnapshot:n,setProps:r}=A.useRef(function(i){const o=i.containerId||1;return{subscribe(a){const l=function(c,d,f){let m=1,p=0,g=[],v=[],y=[],x=d;const S=new Map,w=new Set,E=()=>{y=Array.from(S.values()),w.forEach(R=>R())},b=R=>{v=R==null?[]:v.filter(I=>I!==R),E()},L=R=>{const{toastId:I,onOpen:C,updateId:k,children:U}=R.props,B=k==null;R.staleId&&S.delete(R.staleId),S.set(I,R),v=[...v,R.props.toastId].filter(H=>H!==R.staleId),E(),f(nx(R,B?"added":"updated")),B&&Ft(C)&&C(A.isValidElement(U)&&U.props)};return{id:c,props:x,observe:R=>(w.add(R),()=>w.delete(R)),toggle:(R,I)=>{S.forEach(C=>{I!=null&&I!==C.props.toastId||Ft(C.toggle)&&C.toggle(R)})},removeToast:b,toasts:S,clearQueue:()=>{p-=g.length,g=[]},buildToast:(R,I)=>{if((G=>{let{containerId:ee,toastId:ne,updateId:ue}=G;const ce=ee?ee!==c:c!==1,be=S.has(ne)&&ue==null;return ce||be})(I))return;const{toastId:C,updateId:k,data:U,staleId:B,delay:H}=I,W=()=>{b(C)},V=k==null;V&&p++;const K={...x,style:x.toastStyle,key:m++,...Object.fromEntries(Object.entries(I).filter(G=>{let[ee,ne]=G;return ne!=null})),toastId:C,updateId:k,data:U,closeToast:W,isIn:!1,className:wl(I.className||x.toastClassName),bodyClassName:wl(I.bodyClassName||x.bodyClassName),progressClassName:wl(I.progressClassName||x.progressClassName),autoClose:!I.isLoading&&(F=I.autoClose,M=x.autoClose,F===!1||jo(F)&&F>0?F:M),deleteToast(){const G=S.get(C),{onClose:ee,children:ne}=G.props;Ft(ee)&&ee(A.isValidElement(ne)&&ne.props),f(nx(G,"removed")),S.delete(C),p--,p<0&&(p=0),g.length>0?L(g.shift()):E()}};var F,M;K.closeButton=x.closeButton,I.closeButton===!1||Dh(I.closeButton)?K.closeButton=I.closeButton:I.closeButton===!0&&(K.closeButton=!Dh(x.closeButton)||x.closeButton);let O=R;A.isValidElement(R)&&!is(R.type)?O=A.cloneElement(R,{closeToast:W,toastProps:K,data:U}):Ft(R)&&(O=R({closeToast:W,toastProps:K,data:U}));const z={content:O,props:K,staleId:B};x.limit&&x.limit>0&&p>x.limit&&V?g.push(z):jo(H)?setTimeout(()=>{L(z)},H):L(z)},setProps(R){x=R},setToggle:(R,I)=>{S.get(R).toggle=I},isToastActive:R=>v.some(I=>I===R),getSnapshot:()=>y}}(o,i,a3);St.set(o,l);const u=l.observe(a);return Uo.forEach(c=>ub(c.content,c.options)),Uo=[],()=>{u(),St.delete(o)}},setProps(a){var l;(l=St.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=St.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const s=A.useSyncExternalStore(e,n,n);return{getToastToRender:function(i){if(!s)return[];const o=new Map;return t.newestOnTop&&s.reverse(),s.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>i(a[0],a[1]))},isToastActive:lb,count:s==null?void 0:s.length}}function u3(t){const[e,n]=A.useState(!1),[r,s]=A.useState(!1),i=A.useRef(null),o=A.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:u,onClick:c,closeOnClick:d}=t;var f,m;function p(){n(!0)}function g(){n(!1)}function v(S){const w=i.current;o.canDrag&&w&&(o.didMove=!0,e&&g(),o.delta=t.draggableDirection==="x"?S.clientX-o.start:S.clientY-o.start,o.start!==S.clientX&&(o.canCloseOnClick=!1),w.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,w.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function y(){document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",y);const S=i.current;if(o.canDrag&&o.didMove&&S){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),t.closeToast(),void t.collapseAll();S.style.transition="transform 0.2s, opacity 0.2s",S.style.removeProperty("transform"),S.style.removeProperty("opacity")}}(m=St.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||m.setToggle(f.id,f.fn),A.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||g(),window.addEventListener("focus",p),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",g)}},[t.pauseOnFocusLoss]);const x={onPointerDown:function(S){if(t.draggable===!0||t.draggable===S.pointerType){o.didMove=!1,document.addEventListener("pointermove",v),document.addEventListener("pointerup",y);const w=i.current;o.canCloseOnClick=!0,o.canDrag=!0,w.style.transition="none",t.draggableDirection==="x"?(o.start=S.clientX,o.removalDistance=w.offsetWidth*(t.draggablePercent/100)):(o.start=S.clientY,o.removalDistance=w.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(S){const{top:w,bottom:E,left:b,right:L}=i.current.getBoundingClientRect();S.nativeEvent.type!=="touchend"&&t.pauseOnHover&&S.clientX>=b&&S.clientX<=L&&S.clientY>=w&&S.clientY<=E?g():p()}};return a&&l&&(x.onMouseEnter=g,t.stacked||(x.onMouseLeave=p)),d&&(x.onClick=S=>{c&&c(S),o.canCloseOnClick&&u()}),{playToast:p,pauseToast:g,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:x}}function c3(t){let{delay:e,isRunning:n,closeToast:r,type:s="default",hide:i,className:o,style:a,controlledProgress:l,progress:u,rtl:c,isIn:d,theme:f}=t;const m=i||l&&u===0,p={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(p.transform=`scaleX(${u})`);const g=vr("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),v=Ft(o)?o({rtl:c,type:s,defaultClassName:g}):vr(g,o),y={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{d&&r()}};return Q.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},Q.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${s}`}),Q.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:v,style:p,...y}))}let d3=1;const cb=()=>""+d3++;function f3(t){return t&&(is(t.toastId)||jo(t.toastId))?t.toastId:cb()}function so(t,e){return ub(t,e),e.toastId}function Cu(t,e){return{...e,type:e&&e.type||t,toastId:f3(e)}}function Ha(t){return(e,n)=>so(e,Cu(t,n))}function xe(t,e){return so(t,Cu("default",e))}xe.loading=(t,e)=>so(t,Cu("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),xe.promise=function(t,e,n){let r,{pending:s,error:i,success:o}=e;s&&(r=is(s)?xe.loading(s,n):xe.loading(s.render,{...n,...s}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(c,d,f)=>{if(d==null)return void xe.dismiss(r);const m={type:c,...a,...n,data:f},p=is(d)?{render:d}:d;return r?xe.update(r,{...m,...p}):xe(p.render,{...m,...p}),f},u=Ft(t)?t():t;return u.then(c=>l("success",o,c)).catch(c=>l("error",i,c)),u},xe.success=Ha("success"),xe.info=Ha("info"),xe.error=Ha("error"),xe.warning=Ha("warning"),xe.warn=xe.warning,xe.dark=(t,e)=>so(t,Cu("default",{theme:"dark",...e})),xe.dismiss=function(t){(function(e){var n;if(ab()){if(e==null||is(n=e)||jo(n))St.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=St.get(e.containerId);r?r.removeToast(e.id):St.forEach(s=>{s.removeToast(e.id)})}}else Uo=Uo.filter(r=>e!=null&&r.options.toastId!==e)})(t)},xe.clearWaitingQueue=function(t){t===void 0&&(t={}),St.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},xe.isActive=lb,xe.update=function(t,e){e===void 0&&(e={});const n=((r,s)=>{var i;let{containerId:o}=s;return(i=St.get(o||1))==null?void 0:i.toasts.get(r)})(t,e);if(n){const{props:r,content:s}=n,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:cb()};i.toastId!==t&&(i.staleId=t);const o=i.render||s;delete i.render,so(o,i)}},xe.done=t=>{xe.update(t,{progress:1})},xe.onChange=function(t){return Ph.add(t),()=>{Ph.delete(t)}},xe.play=t=>rx(!0,t),xe.pause=t=>rx(!1,t);const h3=typeof window<"u"?A.useLayoutEffect:A.useEffect,Ka=t=>{let{theme:e,type:n,isLoading:r,...s}=t;return Q.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},Nd={info:function(t){return Q.createElement(Ka,{...t},Q.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return Q.createElement(Ka,{...t},Q.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return Q.createElement(Ka,{...t},Q.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return Q.createElement(Ka,{...t},Q.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Q.createElement("div",{className:"Toastify__spinner"})}},m3=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:i}=u3(t),{closeButton:o,children:a,autoClose:l,onClick:u,type:c,hideProgressBar:d,closeToast:f,transition:m,position:p,className:g,style:v,bodyClassName:y,bodyStyle:x,progressClassName:S,progressStyle:w,updateId:E,role:b,progress:L,rtl:R,toastId:I,deleteToast:C,isIn:k,isLoading:U,closeOnClick:B,theme:H}=t,W=vr("Toastify__toast",`Toastify__toast-theme--${H}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":R},{"Toastify__toast--close-on-click":B}),V=Ft(g)?g({rtl:R,position:p,type:c,defaultClassName:W}):vr(W,g),K=function(z){let{theme:G,type:ee,isLoading:ne,icon:ue}=z,ce=null;const be={theme:G,type:ee};return ue===!1||(Ft(ue)?ce=ue({...be,isLoading:ne}):A.isValidElement(ue)?ce=A.cloneElement(ue,be):ne?ce=Nd.spinner():(jn=>jn in Nd)(ee)&&(ce=Nd[ee](be))),ce}(t),F=!!L||!l,M={closeToast:f,type:c,theme:H};let O=null;return o===!1||(O=Ft(o)?o(M):A.isValidElement(o)?A.cloneElement(o,M):function(z){let{closeToast:G,theme:ee,ariaLabel:ne="close"}=z;return Q.createElement("button",{className:`Toastify__close-button Toastify__close-button--${ee}`,type:"button",onClick:ue=>{ue.stopPropagation(),G(ue)},"aria-label":ne},Q.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Q.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(M)),Q.createElement(m,{isIn:k,done:C,position:p,preventExitTransition:n,nodeRef:r,playToast:i},Q.createElement("div",{id:I,onClick:u,"data-in":k,className:V,...s,style:v,ref:r},Q.createElement("div",{...k&&{role:b},className:Ft(y)?y({type:c}):vr("Toastify__toast-body",y),style:x},K!=null&&Q.createElement("div",{className:vr("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!U})},K),Q.createElement("div",null,a)),O,Q.createElement(c3,{...E&&!F?{key:`pb-${E}`}:{},rtl:R,theme:H,delay:l,isRunning:e,isIn:k,closeToast:f,hide:d,type:c,style:w,className:S,controlledProgress:F,progress:L||0})))},hc=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},p3=fc(hc("bounce",!0));fc(hc("slide",!0));fc(hc("zoom"));fc(hc("flip"));const g3={position:"top-right",transition:p3,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function y3(t){let e={...g3,...t};const n=t.stacked,[r,s]=A.useState(!0),i=A.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=l3(e),{className:u,style:c,rtl:d,containerId:f}=e;function m(g){const v=vr("Toastify__toast-container",`Toastify__toast-container--${g}`,{"Toastify__toast-container--rtl":d});return Ft(u)?u({position:g,rtl:d,defaultClassName:v}):vr(v,wl(u))}function p(){n&&(s(!0),xe.play())}return h3(()=>{if(n){var g;const v=i.current.querySelectorAll('[data-in="true"]'),y=12,x=(g=e.position)==null?void 0:g.includes("top");let S=0,w=0;Array.from(v).reverse().forEach((E,b)=>{const L=E;L.classList.add("Toastify__toast--stacked"),b>0&&(L.dataset.collapsed=`${r}`),L.dataset.pos||(L.dataset.pos=x?"top":"bot");const R=S*(r?.2:1)+(r?0:y*b);L.style.setProperty("--y",`${x?R:-1*R}px`),L.style.setProperty("--g",`${y}`),L.style.setProperty("--s",""+(1-(r?w:0))),S+=L.offsetHeight,w+=.025})}},[r,l,n]),Q.createElement("div",{ref:i,className:"Toastify",id:f,onMouseEnter:()=>{n&&(s(!1),xe.pause())},onMouseLeave:p},o((g,v)=>{const y=v.length?{...c}:{...c,pointerEvents:"none"};return Q.createElement("div",{className:m(g),style:y,key:`container-${g}`},v.map(x=>{let{content:S,props:w}=x;return Q.createElement(m3,{...w,stacked:n,collapseAll:p,isIn:a(w.toastId,w.containerId),style:w.style,key:`toast-${w.key}`},S)}))}))}const v3=()=>{const t=Nt(),n=new URLSearchParams(t.search).get("id"),r=$e(),[s,i]=A.useState(!0),[o,a]=A.useState(null),l=A.useRef(null),[u,c]=A.useState(0);if(A.useEffect(()=>{const R=()=>{c(window.scrollY)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),A.useEffect(()=>{(async()=>{if(!n){xe.error("Missing movie ID");return}try{i(!0);const I=await Ce.get(`/movies/flixhq/info?id=${n}`);a(I.data)}catch(I){xe.error(I.message||"Failed to fetch movie data"),console.error("Error fetching movie data:",I)}finally{i(!1)}})()},[n]),s)return h.jsx(Fn,{});if(!o)return h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center p-8 bg-gray-800 rounded-lg",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Movie Found"}),h.jsx("button",{onClick:()=>r(-1),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition",children:"Go Back"})]})});const{title:d,description:f,image:m,cover:p,rating:g,duration:v,releaseDate:y,genres:x,casts:S,recommendations:w,production:E,country:b,episodes:L}=o;return console.log(o),h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[h.jsx(y3,{position:"top-right",theme:"dark"}),h.jsxs("div",{ref:l,className:"relative h-[70vh] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 w-full h-full",style:{transform:`translateY(${u*.5}px)`,backgroundImage:`url(${p})`,backgroundSize:"cover",backgroundPosition:"center"},children:h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/50"})}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 z-10",children:h.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-end gap-8",children:[h.jsx("div",{className:"w-64 flex-shrink-0 transform hover:scale-105 transition duration-300",children:h.jsx("img",{src:m,alt:d,className:"w-full rounded-lg shadow-2xl"})}),h.jsxs("div",{className:"flex-grow",children:[h.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 animate-fade-in",children:d}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-lg opacity-90",children:[h.jsx("span",{children:y}),h.jsx("span",{children:"•"}),h.jsx("span",{children:v}),h.jsx("span",{children:"•"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-yellow-400",children:"★"}),h.jsx("span",{className:"ml-1",children:g})]})]})]})]})})]}),h.jsxs("div",{className:"container mx-auto px-4 py-12",children:[h.jsxs("div",{className:"grid md:grid-cols-3 gap-12",children:[h.jsxs("div",{className:"md:col-span-2 space-y-8",children:[h.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg transform hover:scale-[1.01] transition",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Overview"}),h.jsx("p",{className:"text-gray-300 leading-relaxed",children:f})]}),h.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg transform hover:scale-[1.01] transition",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Cast"}),h.jsx("div",{className:"flex flex-wrap gap-3",children:S.map(R=>h.jsx("span",{className:"px-4 py-2 bg-gray-700 rounded-full text-sm hover:bg-gray-600 transition cursor-pointer",children:R},R))})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[h.jsx("h3",{className:"text-xl font-bold mb-4",children:"Movie Details"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-400",children:"Production:"}),h.jsx("p",{children:E})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-400",children:"Country:"}),h.jsx("p",{children:b})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-400",children:"Genres:"}),h.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:x.map(R=>h.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded-full text-sm",children:R},R))})]})]})]}),L.length>1?h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-xl font-bold",children:"Episodes"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:L.map(R=>h.jsx("button",{onClick:()=>r(`/movie/watch?episodeId=${R.id}&mediaId=${n}`),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition",children:R.title},R.id))})]}):h.jsx("button",{onClick:()=>r(`/movie/watch?episodeId=${L[0].id}&mediaId=${n}`),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105",children:"Watch Now"})]})]}),h.jsxs("div",{className:"mt-16",children:[h.jsx("h2",{className:"text-2xl font-bold mb-8",children:"You May Also Like"}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:w.map(R=>h.jsx("div",{className:"group cursor-pointer transform hover:scale-105 transition duration-300",onClick:()=>r(`/movie/info/${R.id}`),children:h.jsxs("div",{className:"relative aspect-[2/3] overflow-hidden rounded-lg",children:[h.jsx("img",{src:R.image,alt:R.title,className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[h.jsx("h3",{className:"text-white font-bold",children:R.title}),h.jsxs("p",{className:"text-gray-300 text-sm",children:[R.duration," min"]})]})})]})},R.id))})]})]}),h.jsx("style",{jsx:!0,children:`
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fade-in 0.6s ease-out forwards;
        }
      `})]})},x3="https://cdn.jwplayer.com/libraries/IDzF9Zmk.js",S3=()=>new Promise((t,e)=>{if(window.jwplayer){t();return}const n=document.createElement("script");n.src=x3,n.async=!0,n.onload=()=>t(),n.onerror=()=>e(new Error("Failed to load JW Player script")),document.body.appendChild(n)}),E3=()=>{const t=Nt(),e=$e(),n=new URLSearchParams(t.search),r=n.get("episodeId"),s=n.get("mediaId"),i=A.useRef(null),[o,a]=A.useState(r),[l,u]=A.useState([]),[c,d]=A.useState([]),[f,m]=A.useState([]),[p,g]=A.useState(null),[v,y]=A.useState(!0),[x,S]=A.useState(null);A.useEffect(()=>{s&&Se.get(`/movies/flixhq/info?id=${s}`).then(E=>{E.data.episodes&&u(E.data.episodes)}).catch(E=>console.error("Error fetching episodes:",E))},[s]),A.useEffect(()=>{!o||!s||(y(!0),Se.get(`/movies/flixhq/watch?episodeId=${o}&mediaId=${s}`).then(E=>{const{sources:b=[],subtitles:L=[]}=E.data;d(b),m(L),y(!1)}).catch(E=>{console.error("Error fetching video data:",E),S("Failed to load video"),y(!1)}))},[o,s]),A.useEffect(()=>{if(!(v||c.length===0))return S3().then(()=>{if(!document.getElementById("player"))return;const b=window.jwplayer("player");b.setup({autostart:!1,playlist:[{sources:c.map(L=>({file:L.url,label:L.quality})),tracks:f.map(L=>({file:L.url,label:L.lang,kind:"captions"}))}],captions:{color:"#FFFFFF",fontSize:14,backgroundOpacity:75,backgroundColor:"#000000",edgeStyle:"raised"}}),i.current=b}).catch(E=>{console.error("JW Player failed to load:",E),S("Video player failed to initialize.")}),()=>{i.current&&i.current.remove()}},[c,f,v]);const w=E=>{i.current&&i.current.stop(),g(E),a(E.id),e(`/movie/watch?episodeId=${E.id}&mediaId=${s}`,{replace:!0}),y(!0)};return x?h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:h.jsxs("div",{className:"text-center text-white p-8",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:x}),h.jsx("button",{onClick:()=>e(-1),className:"bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg transition",children:"Go Back"})]})}):h.jsx("div",{className:"min-h-screen bg-gray-900 p-4",children:h.jsxs("div",{className:"container mx-auto",children:[h.jsx("div",{className:"relative aspect-video mb-6",children:h.jsx("div",{id:"player"})}),l.length>1?h.jsxs("div",{className:"mt-8",children:[h.jsx("h2",{className:"text-white text-2xl font-bold mb-4",children:"Episodes"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:l.map(E=>h.jsx("button",{onClick:()=>w(E),className:`p-4 rounded-lg transition ${o===E.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:h.jsx("div",{className:"text-sm font-medium",children:E.title})},E.id))})]}):l.length===1&&h.jsx("button",{onClick:()=>e(`/movie/watch?episodeId=${l[0].id}&mediaId=${s}`),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105",children:"Watch Now"})]})})};function T3({darkMode:t=!0,setDarkMode:e}){const[n,r]=A.useState(!1),s=Nt(),i=()=>{e(!t)},o=()=>{r(!n)},a=l=>s.pathname===l;return A.useEffect(()=>{const l=document.querySelector("html");t?l.classList.add("dark"):l.classList.remove("dark")},[t]),h.jsxs("nav",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 dark:from-gray-800 dark:to-gray-900 ",children:[h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex items-center justify-between h-16",children:[h.jsx("div",{className:"flex items-center",children:h.jsx(Ze,{to:"/",className:"text-white font-bold text-lg",children:"Depressed Zone"})}),h.jsx("div",{className:"hidden md:block",children:h.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[h.jsx(Ze,{to:"/",className:`${a("/")?"bg-green-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} px-3 py-2 rounded-md text-sm font-medium`,children:"Anime"}),h.jsx(Ze,{to:"/manga",className:`${a("/manga")?"bg-green-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} px-3 py-2 rounded-md text-sm font-medium`,children:"Manga"}),h.jsx(Ze,{to:"/kdrama",className:`${a("/kdrama")?"bg-green-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} px-3 py-2 rounded-md text-sm font-medium`,children:"KDRAMA"})]})}),h.jsx("div",{className:"hidden md:block",children:h.jsx("button",{onClick:i,className:"bg-gray-800 p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:t?h.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):h.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}),h.jsx("div",{className:"-mr-2 flex md:hidden",children:h.jsxs("button",{onClick:o,className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[h.jsx("span",{className:"sr-only",children:"Open main menu"}),n?h.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):h.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),n&&h.jsxs("div",{className:"md:hidden",children:[h.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[h.jsx(Ze,{to:"/",className:`${a("/")?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} block px-3 py-2 rounded-md text-base font-medium`,children:"Anime"}),h.jsx(Ze,{to:"/manga",className:`${a("/manga")?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} block px-3 py-2 rounded-md text-base font-medium`,children:"Manga"}),h.jsx(Ze,{to:"/kdrama",className:`${a("/kdrama")?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} block px-3 py-2 rounded-md text-base font-medium`,children:"K-Drama"})]}),h.jsx("div",{className:"pt-4 pb-3 border-t border-gray-700",children:h.jsx("div",{className:"flex items-center px-5",children:h.jsx("button",{onClick:i,className:"ml-auto bg-gray-800 flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:t?h.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):h.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})})})]})]})}const w3=()=>h.jsx("footer",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 dark:from-gray-800 dark:to-gray-900 text-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About Us"}),h.jsx("p",{className:"text-sm",children:"Depressed Zone is your go-to source for anime, manga, and K-drama content."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[h.jsx("div",{children:h.jsx(Ze,{to:"/",className:"text-sm hover:text-gray-300",children:"Home"})}),h.jsx("div",{children:h.jsx(Ze,{to:"/anime",className:"text-sm hover:text-gray-300",children:"Anime"})}),h.jsx("div",{children:h.jsx(Ze,{to:"/manga",className:"text-sm hover:text-gray-300",children:"Manga"})}),h.jsx("div",{children:h.jsx(Ze,{to:"/kdrama",className:"text-sm hover:text-gray-300",children:"K-Drama"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Connect With Us"}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("a",{href:"https://github.com/botsailer",target:"_blank",className:"text-white hover:text-gray-300",children:h.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})}),h.jsx("a",{href:"https://discord.gg/kHpNrBEr4h",target:"_blank",className:"text-white hover:text-gray-300",children:h.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})})}),h.jsx("a",{href:"https://www.instagram.com/compiler.err0r.404/",target:"_blank",className:"text-white hover:text-gray-300",children:h.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})})]})]}),h.jsx("div",{children:h.jsx("div",{children:h.jsx(Ze,{to:"/dmca",className:"text-3xl hover:text-gray-300 hover:underline ",children:"DMCA"})})})]}),h.jsx("div",{className:"mt-8 border-t border-gray-700 pt-8 text-sm text-center",children:h.jsxs("p",{children:["© ",new Date().getFullYear()," Depressed Zone. All rights reserved."]})})]})}),b3=()=>h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-6",children:"DMCA Notice & Takedown Policy"}),h.jsx("p",{className:"mb-4",children:"Depressed Zone respects the intellectual property rights of others and expects its users to do the same. In accordance with the Digital Millennium Copyright Act of 1998, the text of which may be found on the U.S. Copyright Office website at http://www.copyright.gov/legislation/dmca.pdf, Depressed Zone will respond expeditiously to claims of copyright infringement committed using the Depressed Zone website that are reported to our Designated Copyright Agent identified in the sample notice below."}),h.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-4",children:"PLEASE NOTE:"}),h.jsx("p",{className:"mb-4",children:"Depressed Zone does not host any copyrighted content on its servers. All video content available through our website is hosted by licensed third-party organizations. We merely provide an interface to access this content through their APIs, for which we pay usage fees. We do not have control over the content provided by these third-party services."}),h.jsx("p",{className:"mb-4",children:"If you believe that your copyrighted work has been copied in a way that constitutes copyright infringement and is accessible via the Depressed Zone website, please notify our Designated Copyright Agent as set forth in the Digital Millennium Copyright Act of 1998 (DMCA). For your complaint to be valid under the DMCA, you must provide the following information when providing notice of the claimed copyright infringement:"}),h.jsxs("ul",{className:"list-disc pl-8 mb-4",children:[h.jsx("li",{children:"A physical or electronic signature of a person authorized to act on behalf of the copyright owner;"}),h.jsx("li",{children:"Identification of the copyrighted work claimed to have been infringed;"}),h.jsx("li",{children:"Identification of the material that is claimed to be infringing or to be the subject of infringing activity and that is to be removed or access to which is to be disabled, and information reasonably sufficient to permit Depressed Zone to locate the material;"}),h.jsx("li",{children:"Information reasonably sufficient to permit Depressed Zone to contact you, such as an address, telephone number, and, if available, an electronic mail address;"}),h.jsx("li",{children:"A statement that you have a good faith belief that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or the law; and"}),h.jsx("li",{children:"A statement that the information in the notification is accurate, and under penalty of perjury, that you are authorized to act on behalf of the owner of an exclusive right that is allegedly infringed."})]}),h.jsx("p",{className:"mb-4",children:"The above information must be submitted as a written notification to the following Designated Copyright Agent:"}),h.jsxs("div",{className:"mb-4",children:[h.jsx("p",{children:"Attn: DMCA Notice"}),h.jsx("p",{children:"Depressed Zone"}),h.jsx("p",{children:"Email: sailerbot8@gmail.com"})]}),h.jsx("p",{children:"PLEASE NOTE THAT THIS PROCEDURE IS EXCLUSIVELY FOR NOTIFYING DEPRESSED ZONE THAT YOUR COPYRIGHTED MATERIAL MAY HAVE BEEN INFRINGED."})]});function A3(){const t=()=>{window.location.href="/"};return h.jsxs("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden",children:[h.jsx("video",{autoPlay:!0,loop:!0,muted:!0,className:"absolute top-0 left-0 w-full h-full object-cover z-[-1]",children:h.jsx("source",{src:"/1.webm",type:"video/webm"})}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 z-[-1]"}),h.jsxs("div",{className:"container mx-auto h-full flex flex-col justify-center items-center text-white px-4",children:[h.jsx("h1",{style:{fontSize:"5rem",fontWeight:"bold",marginBottom:"1rem",textAlign:"center",fontFamily:"serif"},children:"Error 404. Page Not Found."}),h.jsx("p",{className:"text-2xl mb-8 text-center font-poppins",children:"Head back to previous page?"}),h.jsx("div",{className:"flex justify-center",children:h.jsx("button",{onClick:t,className:"px-8 py-3 bg-[#f74a1e] text-[#0eff06] text-xl font-bold rounded-lg shadow-lg hover:shadow-[#0ef165] transition-shadow duration-300",children:"Head Back"})})]})]})}const R3=new aC({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:3e5,retry:1}}});function L3(){const{pathname:t}=Nt();return A.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function Wt({title:t,description:e}){return h.jsxs(zC,{children:[h.jsx("title",{children:t?`${t} | Depressed Zone`:"Depressed Zone - Ad-Free Anime & Manga"}),e&&h.jsx("meta",{name:"description",content:e})]})}function C3(){const[t,e]=A.useState(()=>{if(typeof window<"u"){const n=localStorage.getItem("darkMode");return n?JSON.parse(n):window.matchMedia("(prefers-color-scheme: dark)").matches}return!1});return A.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(t))},[t]),h.jsx(GE,{children:h.jsx(hC,{client:R3,children:h.jsxs("div",{className:`App ${t?"dark":""}`,children:[h.jsx(Wt,{title:"Ad-Free Anime, Manga & K-Drama",description:"Explore ad-free anime, manga, K-dramas, and movies with no signup required. Your ultimate entertainment platform."}),h.jsxs(UL,{children:[h.jsx(L3,{}),h.jsx(T3,{darkMode:t,setDarkMode:e}),h.jsx("main",{className:"bg-white dark:bg-black text-black dark:text-white min-h-screen",children:h.jsxs(DL,{children:[h.jsx(Oe,{index:!0,path:"/",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Home - Ad-Free Anime & Manga",description:"Your ad-free platform for anime, manga, and K-dramas with zero signup requirements."}),h.jsx(xD,{})]})}),h.jsx(Oe,{path:"/search/:anime?",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Search Anime",description:"Search your favorite anime series and movies in our extensive library."}),h.jsx(SD,{})]})}),h.jsx(Oe,{path:"/anime/artwork",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Anime Artwork Gallery",description:"Browse beautiful artwork from your favorite anime series."}),h.jsx(TD,{})]})}),h.jsx(Oe,{path:"/anime/:id",element:h.jsx(ED,{})}),h.jsx(Oe,{path:"/anime/genres/:geners",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Anime by Genre",description:"Discover anime series filtered by your favorite genres."}),h.jsx(Z_,{})]})}),h.jsx(Oe,{path:"/episodes",element:h.jsx(J_,{})}),h.jsx(Oe,{path:"/manga/chapters",element:h.jsx(Yj,{})}),h.jsx(Oe,{path:"/manga/read",element:h.jsx(Qj,{})}),h.jsx(Oe,{path:"/searchmanga/:manga?",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Search Manga",description:"Find your favorite manga series in our comprehensive collection."}),h.jsx(Kj,{})]})}),h.jsx(Oe,{path:"/mangainfo/:manga?",element:h.jsx(qj,{})}),h.jsx(Oe,{path:"/genre/:genreId",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Manga by Genre",description:"Browse manga titles by your preferred genres."}),h.jsx(e3,{})]})}),h.jsx(Oe,{path:"/Manga",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Manga Library",description:"Explore our extensive collection of manga titles available to read for free."}),h.jsx(Hj,{})]})}),h.jsx(Oe,{path:"/Kdrama",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"K-Drama Collection",description:"Stream popular Korean dramas with no ads or signup requirements."}),h.jsx(t3,{})]})}),h.jsx(Oe,{path:"/Kdramainfo",element:h.jsx(n3,{})}),h.jsx(Oe,{path:"/Kdramawatch",element:h.jsx(r3,{})}),h.jsx(Oe,{path:"/movie",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Movie Collection",description:"Watch anime movies and films without interruptions or ads."}),h.jsx(s3,{})]})}),h.jsx(Oe,{path:"/movie/search/:id",element:h.jsx(i3,{})}),h.jsx(Oe,{path:"/movie/info",element:h.jsx(v3,{})}),h.jsx(Oe,{path:"/movie/watch",element:h.jsx(E3,{})}),h.jsx(Oe,{path:"/dmca",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"DMCA Policy",description:"Our DMCA policy and copyright information for content on Depressed Zone."}),h.jsx(b3,{})]})}),h.jsx(Oe,{path:"*",element:h.jsxs(h.Fragment,{children:[h.jsx(Wt,{title:"Page Not Found",description:"The page you're looking for doesn't exist. Navigate back to our homepage."}),h.jsx(A3,{})]})})]})}),h.jsx(w3,{})]})]})})})}Od.createRoot(document.getElementById("root")).render(h.jsx(Q.StrictMode,{children:h.jsx(C3,{})}));
